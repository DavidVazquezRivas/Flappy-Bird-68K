00002136 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 19/12/2023 19:46:56

00000000                             1  ; =============================================================================
00000000                             2  ; TITLE       :
00000000                             3  ; DESCRIPTION :
00000000                             4  ; AUTHOR      :
00000000                             5  ; HISTORY     :
00000000                             6  ; =============================================================================
00000000                             7  
00001000                             8              ORG     $1000
00001000                             9              
00001000                            10  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            11  
00001000                            12              INCLUDE "SYSCONST.X68"      ; SYSTEM CONSTANTS
00001000                            13  ; =============================================================================
00001000                            14  ; SYSTEM CONSTANTS
00001000                            15  ; =============================================================================
00001000                            16  
00001000                            17  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            18  
00001000  =0000003C                 19  SCRFPS      EQU     60                  ; SCREEN FRAMES PER SECOND
00001000  =00000280                 20  SCRWIDTH    EQU     640                 ; SCREEN WIDTH
00001000  =000001E0                 21  SCRHEIGH    EQU     480                 ; SCREEN HEIGHT
00001000                            22  
00001000                            23  ; --- KEYCODES ----------------------------------------------------------------
00001000                            24  
00001000  =00000020                 25  KBDSPACE    EQU     ' '
00001000  =00000050                 26  KBDP        EQU     'P'
00001000                            27  
00001000                            28  ; --- SOUND IDENTIFIERS -------------------------------------------------------
00001000                            29  
00001000  =00000000                 30  SNDDIE      EQU     0
00001000  =00000001                 31  SNDJUMP     EQU     1
00001000  =00000002                 32  SNDSCO      EQU     2
00001000                            33  
00001000                            34  ; --- TRAP NUMBERS ------------------------------------------------------------
00001000                            35  
00001000  =00000000                 36  SCRUPDTN    EQU     0                   ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                 37  KBDUPDTN    EQU     1                   ; KEYBOARD UPDATE TRAP NUMBER
00001000  =00000002                 38  SNDPLTN     EQU     2                   ; SOUND PLAY TRAP NUMBER
00001000                            39  
00001000                            40  ; --- INTERRUPTION NUMBERS ----------------------------------------------------
00001000                            41  
00001000  =00000001                 42  SCRINTN     EQU     1                   ; SCREEN INTERRUPT TRAP NUMBER    
00001000                            43  
00001000                            44  
00001000                            45  
00001000                            46  
00001000                            47  
00001000                            48  
00001000                            49  
00001000                            50  
00001000                            51  
00001000                            52  -------------------- end include --------------------
00001000                            53              INCLUDE "CONST.X68"         ; GAME CONSTANTS
00001000                            54  ; =============================================================================
00001000                            55  ; GAME CONSTANTS
00001000                            56  ; =============================================================================
00001000                            57  
00001000                            58  ; --- COLORS CONSTANTS 00BBGGRR -----------------------------------------------
00001000                            59  
00001000  =0000BBBB                 60  DKYELLOW    EQU     $0000BBBB           ; DARK YELLOW COLOR
00001000  =0000FFFF                 61  LGYELLOW    EQU     $0000FFFF           ; LIGHT YELLOW COLOR
00001000  =000C0C0C                 62  DARKGRAY    EQU     $000C0C0C           ; DARK GRAY COLOR
00001000  =00616161                 63  NORMGRAY    EQU     $00616161           ; NORMAL (NOT DARK OR LIGHT) GRAY COLOR 
00001000  =00FFBF80                 64  SKYBLUE     EQU     $00FFBF80           ; SKY BLUE COLOR
00001000  =0035DE3B                 65  LGGREEN     EQU     $0035DE3B           ; LIGHT GREEN COLOR
00001000  =00306284                 66  LGBROWN     EQU     $00306284           ; LIGHT BROWN COLOR
00001000  =00FEFDFB                 67  WHITE       EQU     $00FEFDFB           ; WHITE COLOR
00001000                            68  
00001000                            69  ; --- BIRD RELATED CONSTANTS --------------------------------------------------
00001000                            70  
00001000  =FFFFFFF6                 71  JUMPVELY    EQU     -10
00001000  =000000A0                 72  BIRDPOSX    EQU     SCRWIDTH/4
00001000  =0000000F                 73  BIRDRAD     EQU     15                  ; BIRD RADIUS
00001000                            74  
00001000                            75  ; --- PIPE RELATED CONSTANTS --------------------------------------------------
00001000                            76  
00001000  =000C0C0C                 77  PIPEPCOL    EQU     DARKGRAY           ; PIPE PEN COLOR
00001000  =00616161                 78  PIPEFCOL    EQU     NORMGRAY           ; PIPE FILL COLOR
00001000  =FFFFFFFB                 79  PIPEVELX    EQU     -5                  ; PIPE X SPEED
00001000  =00000032                 80  PIPEWIDT    EQU     50                  ; PIPE WIDTH
00001000  =00000078                 81  PIPEGAPS    EQU     120                 ; PIPE GAP SIZE
00001000  =00000001                 82  PIPEAGTP    EQU     1                   ; PIPE AGENT TYPE CODE
00001000  =0000003F                 83  MASKNWPP    EQU     %00111111           ; NEW PIPE MASK 
00001000  =00000005                 84  PPOPOVER    EQU     5                   ; PIPE OPENING OVERFLOW
00001000  =0000000F                 85  PPOPHEIG    EQU     15                  ; PIPE OPENING HEIGHT
00001000                            86  
00001000                            87  ; --- BACKGROUND RELATED CONSTANTS --------------------------------------------
00001000                            88  
00001000  =00FFBF80                 89  SKYCOLOR    EQU     SKYBLUE            ; SKY BACKGROUND COLOR
00001000  =0035DE3B                 90  GRASSCLR    EQU     LGGREEN            ; GRASS COLOR
00001000  =00306284                 91  DIRTCLR     EQU     LGBROWN            ; DIRT COLOR
00001000  =0000003C                 92  FLOHEIGH    EQU     60                 ; FLOOR HEIGHT
00001000  =0000002D                 93  DIRTHEIG    EQU     45                 ; DIRT PART HEIGHT
00001000                            94  
00001000                            95  ; --- CLOUD (BACKGROUND) RELATED CONSTANTS ------------------------------------
00001000                            96  
00001000  =FFFFFFFC                 97  CLDSPMSK    EQU     $FFFFFFFC
00001000  =0000007F                 98  MASKNWCL    EQU     %01111111
00001000  =00000002                 99  CLOUDAGT    EQU     2
00001000                           100  
00001000                           101  ; --- SCOREBOARD RELATED CONSTANTS --------------------------------------------
00001000                           102  
00001000  =00306284                103  SCOFCOL     EQU     DIRTCLR            ; TEXT BACKGROUND COLOR
00001000  =0000101D                104  SCOLINE     EQU     $101D              ; SCORE TEXT COORDINATE 
00001000  =0000101E                105  HSCOLINE    EQU     $101E              ; HIGHSCORE TEXT COORDINATE
00001000                           106  
00001000                           107  ; --- STATE RELATED CONSTANTS -------------------------------------------------
00001000                           108  
00001000  =FFFFFFFF                109  STANONE     EQU     -1                 ; NON-EXISTENT STATE NUMBER
00001000  =00000000                110  STAINTRO    EQU     0                  ; INTRO SCREEN STATE NUMBER
00001000  =00000001                111  STAINSTR    EQU     1                  ; INSTRUCTION STATE NUMBER
00001000  =00000002                112  STAGAME     EQU     2                  ; GAME SCREEN STATE NUMBER
00001000  =00000003                113  STAPAUSE    EQU     3                  ; PAUSE SCREEN STATE NUMBER
00001000  =00000004                114  STAGOVER    EQU     4                  ; GAME OVER SCREEN STATE NUMBER
00001000                           115  
00001000                           116  ; --- IMAGE DRAWING CONSTANTS -------------------------------------------------
00001000                           117  
00001000  =00000004                118  BLOCKSZ     EQU     4
00001000                           119  
00001000                           120  
00001000                           121  
00001000                           122  
00001000                           123  
00001000                           124  
00001000                           125  
00001000                           126  
00001000                           127  
00001000                           128  
00001000                           129  
00001000                           130  
00001000                           131  
00001000                           132  
00001000                           133  
00001000                           134  
00001000                           135  
00001000                           136  -------------------- end include --------------------
00001000                           137              INCLUDE "LIB/DMMCONST.X68"  ; DYNAMIC MEMORY CONSTANTS
00001000                           138  ; =============================================================================
00001000                           139  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
00001000                           140  ; =============================================================================
00001000                           141  
00001000  =00000040                142  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                143  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                144  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                145  -------------------- end include --------------------
00001000                           146              INCLUDE "LIB/UTLCONST.X68"  ; UTIL CONSTANTS 
00001000                           147  ; ==============================================================================
00001000                           148  ; UTIL CONSTANTS
00001000                           149  ; ==============================================================================
00001000                           150  
00001000  =00000008                151  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
00001000  =00000008                152  -------------------- end include --------------------
00001000                           153              INCLUDE "LIB/DMMCODE.X68"   ; DYNAMIC MEMORY CODE
00001000                           154  ; =============================================================================
00001000                           155  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001000                           156  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001000                           157  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001000                           158  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001000                           159  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001000                           160  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001000                           161  ; =============================================================================
00001000                           162  
00001000                           163  ; -----------------------------------------------------------------------------
00001000                           164  DMMINIT
00001000                           165  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001000                           166  ; INPUT    - NONE
00001000                           167  ; OUTPUT   - NONE
00001000                           168  ; MODIFIES - NONE
00001000                           169  ; -----------------------------------------------------------------------------
00001000  48E7 8080                170              MOVEM.L D0/A0,-(A7)
00001004  41F9 000021C0            171              LEA     DMMDATA,A0
0000100A  303C 0031                172              MOVE.W  #DMMBNUM-1,D0
0000100E  30BC 0000                173  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001012  D1FC 00000040            174              ADD.L   #DMMBSIZE,A0
00001018  51C8 FFF4                175              DBRA.W  D0,.LOOP
0000101C  4CDF 0101                176              MOVEM.L (A7)+,D0/A0
00001020  4E75                     177              RTS
00001022                           178  
00001022                           179  ; -----------------------------------------------------------------------------
00001022                           180  DMMFIRST
00001022                           181  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001022                           182  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001022                           183  ; INPUT    - NONE
00001022                           184  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001022                           185  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001022                           186  ; -----------------------------------------------------------------------------
00001022  41F9 000021C0            187              LEA     DMMDATA,A0
00001028  4A58                     188  DMMFRLOP    TST.W   (A0)+
0000102A  6600 0016                189              BNE     DMMFRFND
0000102E  D1FC 0000003E            190              ADD.L   #DMMBSIZE-2,A0
00001034  B1FC 00002E3F            191  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000103A  6DEC                     192              BLT     DMMFRLOP
0000103C  207C 00000000            193              MOVE.L  #0,A0
00001042  4E75                     194  DMMFRFND    RTS
00001044                           195  
00001044                           196  ; -----------------------------------------------------------------------------
00001044                           197  DMMNEXT
00001044                           198  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001044                           199  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001044                           200  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001044                           201  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001044                           202  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001044                           203  ; -----------------------------------------------------------------------------
00001044  2F00                     204              MOVE.L  D0,-(A7)
00001046  2008                     205              MOVE.L  A0,D0
00001048  C0BC FFFFFFC0            206              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000104E  0680 00000040            207              ADD.L   #DMMBSIZE,D0
00001054  2040                     208              MOVE.L  D0,A0
00001056  201F                     209              MOVE.L  (A7)+,D0
00001058  60DA                     210              BRA     DMMFRCOM
0000105A                           211  
0000105A                           212  ; -----------------------------------------------------------------------------
0000105A                           213  DMMFRSTO
0000105A                           214  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000105A                           215  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000105A                           216  ; INPUT    - D0.W : ID TO SEARCH
0000105A                           217  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000105A                           218  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000105A                           219  ; -----------------------------------------------------------------------------
0000105A  41F9 000021C0            220              LEA     DMMDATA,A0
00001060  B058                     221  DMMFLOOP    CMP.W   (A0)+,D0
00001062  6700 0016                222              BEQ     DMMFFND
00001066  D1FC 0000003E            223              ADD.L   #DMMBSIZE-2,A0
0000106C  B1FC 00002E3F            224  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001072  6DEC                     225              BLT     DMMFLOOP
00001074  207C 00000000            226              MOVE.L  #0,A0
0000107A  4E75                     227  DMMFFND     RTS
0000107C                           228  
0000107C                           229  ; -----------------------------------------------------------------------------
0000107C                           230  DMMNEXTO
0000107C                           231  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000107C                           232  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000107C                           233  ; INPUT    - D0.W : ID TO SEARCH
0000107C                           234  ;            A0   : POINTER WITHIN THE CURRENT SLOT
0000107C                           235  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000107C                           236  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000107C                           237  ; -----------------------------------------------------------------------------
0000107C  2F00                     238              MOVE.L  D0,-(A7)
0000107E  2008                     239              MOVE.L  A0,D0
00001080  C0BC FFFFFFC0            240              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001086  0680 00000040            241              ADD.L   #DMMBSIZE,D0
0000108C  2040                     242              MOVE.L  D0,A0
0000108E  201F                     243              MOVE.L  (A7)+,D0
00001090  60DA                     244              BRA     DMMFCOM
00001092                           245  
00001092                           246  ; -----------------------------------------------------------------------------
00001092                           247  DMMALLOC
00001092                           248  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001092                           249  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001092                           250  ; INPUT    - D0.W : ID TO ASSIGN
00001092                           251  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001092                           252  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001092                           253  ; -----------------------------------------------------------------------------
00001092  3F00                     254              MOVE.W  D0,-(A7)
00001094  4240                     255              CLR.W   D0
00001096  4EB8 105A                256              JSR     DMMFRSTO
0000109A  301F                     257              MOVE.W  (A7)+,D0
0000109C  B1FC 00000000            258              CMP.L   #0,A0
000010A2  6700 0006                259              BEQ     .END
000010A6  3140 FFFE                260              MOVE.W  D0,-2(A0)
000010AA  4E75                     261  .END        RTS
000010AC                           262  
000010AC                           263  ; -----------------------------------------------------------------------------
000010AC                           264  DMMFREE
000010AC                           265  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000010AC                           266  ; SYSTEM (0)
000010AC                           267  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000010AC                           268  ; OUTPUT   - NONE
000010AC                           269  ; MODIFIES - NONE
000010AC                           270  ; -----------------------------------------------------------------------------
000010AC  48E7 8080                271              MOVEM.L D0/A0,-(A7)
000010B0  2008                     272              MOVE.L  A0,D0
000010B2  C0BC FFFFFFC0            273              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000010B8  2040                     274              MOVE.L  D0,A0
000010BA  4250                     275              CLR.W   (A0)
000010BC  4CDF 0101                276              MOVEM.L (A7)+,D0/A0
000010C0  4E75                     277              RTS
000010C2                           278  
000010C2                           279  -------------------- end include --------------------
000010C2                           280              INCLUDE "LIB/AGLCODE.X68"   ; AGENTS CODE "OBJECTS"
000010C2                           281  ; =============================================================================
000010C2                           282  ; AGENT MANAGEMENT
000010C2                           283  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
000010C2                           284  ; +0 - LONG : UPDATE SUBROUTINE POINTER
000010C2                           285  ; +4 - LONG : PLOT SUBROUTINE POINTER
000010C2                           286  ; +8:END    : DATA (AGENT SPECIFIC)
000010C2                           287  ; =============================================================================
000010C2                           288  
000010C2                           289  ; -----------------------------------------------------------------------------
000010C2                           290  AGLADD
000010C2                           291  ; CREATES A NEW AGENT
000010C2                           292  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
000010C2                           293  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
000010C2                           294  ;            A3 - POINTER TO AGENT PLOT FUNCTION
000010C2                           295  ;            D0 - AGENT TYPE (USED AS OWNER BY DMM)
000010C2                           296  ;            D1 - AGENT INITIALIZATION PARAMETER 1
000010C2                           297  ;            D2 - AGENT INITIALIZATION PARAMETER 2
000010C2                           298  ;            D3 - AGENT INITIALIZATION PARAMETER 3
000010C2                           299  ; OUTPUT   - NONE
000010C2                           300  ; MODIFIES - NONE
000010C2                           301  ; -----------------------------------------------------------------------------
000010C2  2F08                     302              MOVE.L  A0,-(A7)
000010C4  4EB8 1092                303              JSR     DMMALLOC
000010C8  B1FC 00000000            304              CMP.L   #0,A0
000010CE  6700 0008                305              BEQ     .END
000010D2  20CA                     306              MOVE.L  A2,(A0)+
000010D4  20CB                     307              MOVE.L  A3,(A0)+
000010D6  4E91                     308              JSR     (A1)
000010D8  205F                     309  .END        MOVE.L  (A7)+,A0
000010DA  4E75                     310              RTS
000010DC                           311  
000010DC                           312  ; -----------------------------------------------------------------------------
000010DC                           313  AGLUPD
000010DC                           314  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
000010DC                           315  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
000010DC                           316  ; INPUT    - NONE
000010DC                           317  ; OUTPUT   - NONE
000010DC                           318  ; MODIFIES - NONE
000010DC                           319  ; -----------------------------------------------------------------------------
000010DC  48E7 00C0                320              MOVEM.L A0-A1,-(A7)
000010E0  4EB8 1022                321              JSR     DMMFIRST
000010E4  B1FC 00000000            322  .LOOP       CMP.L   #0,A0
000010EA  6700 000E                323              BEQ     .END
000010EE  2250                     324              MOVE.L  (A0),A1
000010F0  5088                     325              ADD.L   #8,A0
000010F2  4E91                     326              JSR     (A1)
000010F4  4EB8 1044                327              JSR     DMMNEXT
000010F8  60EA                     328              BRA     .LOOP
000010FA  4CDF 0300                329  .END        MOVEM.L (A7)+,A0-A1
000010FE  4E75                     330              RTS
00001100                           331  
00001100                           332  ; -----------------------------------------------------------------------------
00001100                           333  AGLPLOT
00001100                           334  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001100                           335  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001100                           336  ; INPUT    - NONE
00001100                           337  ; OUTPUT   - NONE
00001100                           338  ; MODIFIES - NONE
00001100                           339  ; -----------------------------------------------------------------------------
00001100  48E7 00C0                340              MOVEM.L A0-A1,-(A7)
00001104  4EB8 1022                341              JSR     DMMFIRST
00001108  B1FC 00000000            342  .LOOP       CMP.L   #0,A0
0000110E  6700 0010                343              BEQ     .END
00001112  2268 0004                344              MOVE.L  4(A0),A1
00001116  5088                     345              ADD.L   #8,A0
00001118  4E91                     346              JSR     (A1)
0000111A  4EB8 1044                347              JSR     DMMNEXT
0000111E  60E8                     348              BRA     .LOOP
00001120  4CDF 0300                349  .END        MOVEM.L (A7)+,A0-A1
00001124  4E75                     350              RTS
00001126                           351  
00001126                           352  ; -----------------------------------------------------------------------------
00001126                           353  AGLCLEAN
00001126                           354  ; KILLS EVERY AGENT ON AGENLIST OF THE SPECIFIED TYPE
00001126                           355  ; INPUT     - D0.W - AGENT TYPE (USED AS OWNER BY DMM)
00001126                           356  ; OUTPUT    - KILLS EVERY AGENT ON AGENTLIST
00001126                           357  ; MODIFIES  - NONE
00001126                           358  ; -----------------------------------------------------------------------------
00001126  48E7 00C0                359              MOVEM.L A0-A1,-(A7)
0000112A                           360              
0000112A  4EB8 105A                361  .LOOP       JSR     DMMFRSTO
0000112E  B1FC 00000000            362              CMP.L   #0,A0
00001134  6700 000A                363              BEQ     .END
00001138  4EB9 000010AC            364              JSR     AGLKILL
0000113E  60EA                     365              BRA     .LOOP
00001140                           366              
00001140  4CDF 0300                367  .END        MOVEM.L (A7)+,A0-A1
00001144  4E75                     368              RTS
00001146                           369  
00001146                           370              
00001146                           371  
00001146                           372  
00001146                           373  ; -----------------------------------------------------------------------------
00001146  =000010AC                374  AGLKILL     EQU     DMMFREE
00001146                           375  ; KILLS THE AGENT BY RELEASING ITS MEMORY
00001146                           376  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
00001146                           377  ; OUTPUT   - NONE
00001146                           378  ; MODIFIES - NONE
00001146                           379  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
00001146                           380  ; -----------------------------------------------------------------------------
00001146                           381  
00001146                           382  
00001146                           383  
00001146                           384  -------------------- end include --------------------
00001146                           385              INCLUDE "LIB/UTLCODE.X68"   ; UTIL SUBRUTINES
00001146                           386  ; =============================================================================
00001146                           387  ; UTILITY CODE
00001146                           388  ; =============================================================================
00001146                           389  
00001146                           390  ; -----------------------------------------------------------------------------
00001146                           391  UTLINIT
00001146                           392  ; INITIALIZES UTILITY CODE
00001146                           393  ; INPUT    - NONE
00001146                           394  ; OUTPUT   - NONE
00001146                           395  ; MODIFIES - NONE
00001146                           396  ; -----------------------------------------------------------------------------
00001146  48E7 C000                397              MOVEM.L D0-D1,-(A7)
0000114A  103C 0008                398              MOVE.B  #8,D0
0000114E  4E4F                     399              TRAP    #15
00001150  13C1 00002190            400              MOVE.B  D1,(UTLRNDIX)
00001156  4CDF 0003                401              MOVEM.L (A7)+,D0-D1
0000115A  4E75                     402              RTS
0000115C                           403              
0000115C                           404  ; -----------------------------------------------------------------------------
0000115C                           405  UTLPRINT
0000115C                           406  ; PRINT SCREEN CENTERED TEXT
0000115C                           407  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000115C                           408  ;            D0.B SCREEN ROW TO PRINT TEXT
0000115C                           409  ; OUTPUT   : D0.B NEXT ROW
0000115C                           410  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000115C                           411  ; -----------------------------------------------------------------------------
0000115C  48E7 C0C0                412              MOVEM.L D0-D1/A0-A1,-(A7)
00001160  4201                     413              CLR.B   D1
00001162  2248                     414              MOVE.L  A0,A1
00001164  4A18                     415  .LOOP       TST.B   (A0)+
00001166  6700 0006                416              BEQ     .ENDLOOP
0000116A  5201                     417              ADDQ.B  #1,D1
0000116C  60F6                     418              BRA     .LOOP
0000116E  E209                     419  .ENDLOOP    LSR.B   #1,D1
00001170  0401 0028                420              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
00001174  4401                     421              NEG.B   D1
00001176  E141                     422              ASL.W   #8,D1
00001178  8240                     423              OR.W    D0,D1
0000117A  103C 000B                424              MOVE.B  #11,D0
0000117E  4E4F                     425              TRAP    #15
00001180  103C 000D                426              MOVE.B  #13,D0
00001184  4E4F                     427              TRAP    #15
00001186  4CDF 0303                428              MOVEM.L (A7)+,D0-D1/A0-A1
0000118A  5200                     429              ADDQ.B  #1,D0
0000118C  4E75                     430              RTS
0000118E                           431  
0000118E                           432  ; -----------------------------------------------------------------------------
0000118E                           433  UTLRAND
0000118E                           434  ; PROVIDES A PSEUDO-RANDOM BYTE
0000118E                           435  ; INPUT    - NONE
0000118E                           436  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
0000118E                           437  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000118E                           438  ; -----------------------------------------------------------------------------
0000118E  2F08                     439              MOVE.L  A0,-(A7)
00001190  41F9 000011AC            440              LEA     .RANDVEC,A0
00001196  4280                     441              CLR.L   D0
00001198  1039 00002190            442              MOVE.B  (UTLRNDIX),D0
0000119E  1030 0800                443              MOVE.B  (A0,D0.L),D0
000011A2  5239 00002190            444              ADDQ.B  #1,(UTLRNDIX)
000011A8  205F                     445              MOVE.L  (A7)+,A0
000011AA  4E75                     446              RTS
000011AC                           447  
000011AC                           448  
000011AC= A2 EE 9A 0C F5 24 ...    449  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
000011B4= 2A A3 51 26 E0 AC ...    450              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
000011BC= 75 51 CA FD 33 EB ...    451              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
000011C4= 60 CC E7 B8 9A EB ...    452              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
000011CC= 1D 76 B5 95 B0 89 ...    453              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
000011D4= 39 15 48 C9 6E CA ...    454              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
000011DC= 43 E7 E2 7C 37 25 ...    455              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000011E4= E9 94 CE E9 E4 52 ...    456              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000011EC= 37 6D 9A 84 A2 28 ...    457              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000011F4= 19 E2 C6 77 80 D4 ...    458              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000011FC= 0A 5A 32 67 33 C2 ...    459              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
00001204= 59 80 DC 0E 57 FC ...    460              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
0000120C= 8A AB BC F7 07 4D ...    461              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001214= EF D5 77 6E 1E BB ...    462              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
0000121C= D6 E0 2A 8F BD 28 ...    463              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001224= 13 4F 66 EC 0A 64 ...    464              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
0000122C= 56 52 9A 16 9B 90 ...    465              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001234= 06 8A A4 F7 01 DA ...    466              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
0000123C= F2 E7 77 28 B1 76 ...    467              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001244= A4 42 E3 81 B1 67 ...    468              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000124C= BF CE FA 16 BF 38 ...    469              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001254= D1 8B 50 0C 5F 49 ...    470              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000125C= DE 4C 14 A2 40 DC ...    471              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001264= B6 9B 0A 38 5D AB ...    472              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
0000126C= E2 1B DD 75 15 82 ...    473              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001274= 8A 26 51 30 9F 47 ...    474              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
0000127C= 1E 8A BB 71 C6 6E ...    475              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001284= 9F 47 E5 34 94 27 ...    476              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
0000128C= 7D 06 D6 BA 30 0F ...    477              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001294= EC 7F 7E 03 CF 2D ...    478              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
0000129C= 94 5B 23 F2 8B CD ...    479              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
000012A4= 74 33 EC B9 0F D5 ...    480              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
000012AC                           481  
000012AC                           482  -------------------- end include --------------------
000012AC                           483              INCLUDE "SYSTEM.X68"        ; SYSTEM CODE
000012AC                           484  ; =============================================================================
000012AC                           485  ; SYSTEM
000012AC                           486  ; =============================================================================
000012AC                           487  
000012AC                           488  ; -----------------------------------------------------------------------------
000012AC                           489  SYSINIT
000012AC                           490  ; INITIALIZE SYSTEM
000012AC                           491  ; INPUT     : NONE
000012AC                           492  ; OUTPUT    : NONE
000012AC                           493  ; MODIFIES  : NONE
000012AC                           494  ; -----------------------------------------------------------------------------
000012AC                           495              ; INSTALL TRAPS AND INTERRUPTIONS
000012AC  21FC 0000139A 0080       496              MOVE.L  #SCRPLOT,($80+SCRUPDTN*4)
000012B4  21FC 000013D0 0084       497              MOVE.L  #KBDUPD,($80+KBDUPDTN*4)
000012BC  21FC 00001344 0088       498              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
000012C4  21FC 000013B4 0064       499              MOVE.L  #SCRTIM,($60+SCRINTN*4)
000012CC                           500              
000012CC  4EB9 000013C2            501              JSR     KBDINIT
000012D2  4EB9 000012EA            502              JSR     SNDINIT
000012D8  4EB9 00001356            503              JSR     SCRINIT
000012DE  4EB8 1000                504              JSR     DMMINIT
000012E2                           505              
000012E2                           506              ; SET USER MODE AND ALLOW INTERRUPTIONS
000012E2  40E7                     507              MOVE.W  SR,-(A7)
000012E4  0257 D8FF                508              ANDI.W  #$D8FF,(A7)
000012E8  4E73                     509              RTE
000012EA                           510              
000012EA                           511  ; -----------------------------------------------------------------------------
000012EA                           512  SNDINIT
000012EA                           513  ; INITIALIZES SOUND SYSTEM
000012EA                           514  ; INPUT     : NONE
000012EA                           515  ; OUTPUT    : NONE
000012EA                           516  ; MODIFIES  : NONE
000012EA                           517  ; -----------------------------------------------------------------------------
000012EA  48E7 C0C0                518              MOVEM.L D0-D1/A0-A1,-(A7)
000012EE                           519              
000012EE  4201                     520              CLR.B   D1
000012F0  41F9 00001334            521              LEA     .SNDLIST,A0
000012F6  2018                     522  .LOOP       MOVE.L  (A0)+,D0
000012F8  6700 000E                523              BEQ     .DONE
000012FC  2240                     524              MOVE.L  D0,A1
000012FE  103C 0047                525              MOVE.B  #71,D0
00001302  4E4F                     526              TRAP    #15
00001304  5201                     527              ADDQ.B  #1,D1
00001306  60EE                     528              BRA     .LOOP
00001308                           529              
00001308  4CDF 0303                530  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
0000130C  4E75                     531              RTS
0000130E                           532              
0000130E= 53 4E 44 2F 44 49 ...    533  .SNDDIE     DC.B    'SND/DIE.wav',0
0000131A= 53 4E 44 2F 4A 55 ...    534  .SNDJUMP    DC.B    'SND/JUMP.wav',0
00001327= 53 4E 44 2F 53 43 ...    535  .SNDSCO     DC.B    'SND/SCO.wav',0
00001334                           536              DS.W    0                       ; WORD ALIGN
00001334= 0000130E 0000131A ...    537  .SNDLIST    DC.L    .SNDDIE,.SNDJUMP,.SNDSCO,0
00001344                           538              
00001344                           539  ; ------------------------------------------------------------------------------
00001344                           540  SNDPLAY
00001344                           541  ; PLAY SOUND
00001344                           542  ; INPUT    : D7 SOUND ID
00001344                           543  ; OUTPUT   : NONE
00001344                           544  ; MODIFIES : NONE
00001344                           545  ; ------------------------------------------------------------------------------
00001344  48A7 C000                546              MOVEM.W D0-D1,-(A7)
00001348                           547              
00001348  103C 0048                548              MOVE.B  #72,D0
0000134C  1207                     549              MOVE.B  D7,D1
0000134E  4E4F                     550              TRAP    #15
00001350                           551              
00001350  4C9F 0003                552              MOVEM.W (A7)+,D0-D1
00001354  4E73                     553              RTE
00001356                           554  
00001356                           555  ; -----------------------------------------------------------------------------
00001356                           556  SCRINIT
00001356                           557  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
00001356                           558  ; ENABLE DOUBLE BUFFER, ENABLE TIMED INTERRUPT.
00001356                           559  ; INPUT     : NONE
00001356                           560  ; OUTPUT    : NONE
00001356                           561  ; MODIFIES  : NONE
00001356                           562  ; -----------------------------------------------------------------------------
00001356                           563  
00001356  48E7 C000                564              MOVEM.L D0-D1,-(A7)
0000135A                           565              
0000135A                           566              ; SET SCREEN RESOLUTION
0000135A  103C 0021                567              MOVE.B  #33,D0
0000135E  223C 028001E0            568              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
00001364  4E4F                     569              TRAP    #15
00001366                           570              
00001366                           571              ; SET WINDOWED MODE
00001366  7201                     572              MOVE.L  #1,D1
00001368  4E4F                     573              TRAP    #15
0000136A                           574              
0000136A                           575              ; CLEAR SCREEN
0000136A  103C 000B                576              MOVE.B  #11,D0
0000136E  323C FF00                577              MOVE.W  #$FF00,D1
00001372  4E4F                     578              TRAP    #15
00001374                           579              
00001374                           580              ; ENABLE DOUBLE BUFFER
00001374  103C 005C                581              MOVE.B  #92,D0
00001378  123C 0011                582              MOVE.B  #17,D1
0000137C  4E4F                     583              TRAP    #15
0000137E                           584              
0000137E                           585              ; ENABLE TIMED INTERRUPT
0000137E  103C 0020                586              MOVE.B  #32,D0
00001382  123C 0006                587              MOVE.B  #6,D1
00001386  143C 0081                588              MOVE.B  #$80|SCRINTN,D2
0000138A  7610                     589              MOVE.L  #1000/SCRFPS,D3
0000138C  4E4F                     590              TRAP    #15
0000138E                           591              
0000138E                           592              ; CLEAR INTERRUPT COUNTER
0000138E  4279 0000216C            593              CLR.W   (SCRINTCT)
00001394                           594              
00001394  4CDF 0003                595              MOVEM.L (A7)+,D0-D1
00001398  4E75                     596              RTS
0000139A                           597              
0000139A                           598  ; -----------------------------------------------------------------------------
0000139A                           599  SCRPLOT
0000139A                           600  ; UPDATES DOUBLE BUFFER
0000139A                           601  ; INPUT    : NONE
0000139A                           602  ; OUTPUT   : NONE
0000139A                           603  ; MODIFIES : NONE
0000139A                           604  ; -----------------------------------------------------------------------------
0000139A  48A7 C000                605              MOVEM.W D0-D1,-(A7)
0000139E                           606              
0000139E                           607              ; SWITCH BUFFERS
0000139E  103C 005E                608              MOVE.B  #94,D0
000013A2  4E4F                     609              TRAP    #15
000013A4                           610              
000013A4                           611              ; CLEAN HIDDEN BUFFER
000013A4  103C 000B                612              MOVE.B  #11,D0
000013A8  323C FF00                613              MOVE.W  #$FF00,D1
000013AC  4E4F                     614              TRAP    #15
000013AE  4C9F 0003                615              MOVEM.W (A7)+,D0-D1
000013B2  4E73                     616              RTE
000013B4                           617  
000013B4                           618  ; -----------------------------------------------------------------------------
000013B4                           619  SCRTIM
000013B4                           620  ; TIMED INTERRUPT SERVICE ROUTINE, COUNTS TIME FALLING
000013B4                           621  ; INPUT     : NONE
000013B4                           622  ; OUTPUT    : NONE
000013B4                           623  ; MODIFIES  : NONE
000013B4                           624  ; -----------------------------------------------------------------------------
000013B4  5239 0000216C            625              ADDQ.B  #1,(SCRINTCT)
000013BA  5239 0000216D            626              ADDQ.B  #1,(SCRCYCCT)
000013C0  4E73                     627              RTE
000013C2                           628              
000013C2                           629  ; -----------------------------------------------------------------------------
000013C2                           630  KBDINIT
000013C2                           631  ; INIT KEYBOARD
000013C2                           632  ; INPUT     : NONE
000013C2                           633  ; OUTPUT    : NONE
000013C2                           634  ; MODIFIES  : NONE
000013C2                           635  ; -----------------------------------------------------------------------------
000013C2  4239 0000216A            636              CLR.B   (KBDVAL)
000013C8  4239 0000216B            637              CLR.B   (KBDEDGE)
000013CE  4E75                     638              RTS
000013D0                           639              
000013D0                           640  ; -----------------------------------------------------------------------------
000013D0                           641  KBDUPD
000013D0                           642  ; UPDATE KEYBOARD INFO
000013D0                           643  ; 0 -> SPACE
000013D0                           644  ; INPUT     : NONE
000013D0                           645  ; OUTPUT    : NONE
000013D0                           646  ; MODIFIES  : NONE
000013D0                           647  ; -----------------------------------------------------------------------------
000013D0  48E7 F000                648              MOVEM.L D0-D3,-(A7)
000013D4                           649              
000013D4                           650              ; READ KEYBOARD
000013D4  103C 0013                651              MOVE.B  #19,D0
000013D8  223C 00005020            652              MOVE.L  #KBDP<<8|KBDSPACE,D1
000013DE  4E4F                     653              TRAP    #15
000013E0                           654              
000013E0                           655              ; CONVERT TO DESIRED FORMAT
000013E0  4EB9 00001402            656              JSR     .PACK
000013E6                           657  
000013E6                           658              ; COMPUTE KBDEDGE
000013E6  1039 0000216A            659              MOVE.B  (KBDVAL),D0
000013EC  4600                     660              NOT.B   D0
000013EE  C042                     661              AND.W   D2,D0
000013F0  13C0 0000216B            662              MOVE.B  D0,(KBDEDGE)
000013F6                           663              
000013F6                           664              ; STORE KBDVAL
000013F6  13C2 0000216A            665              MOVE.B  D2,(KBDVAL)
000013FC                           666              
000013FC  4CDF 000F                667              MOVEM.L (A7)+,D0-D3
00001400  4E73                     668              RTE
00001402                           669  
00001402  363C 0003                670  .PACK       MOVE.W  #3,D3
00001406  E189                     671  .LOOP       LSL.L   #8,D1
00001408  E312                     672              ROXL.B  #1,D2
0000140A  51CB FFFA                673              DBRA.W  D3,.LOOP
0000140E  4E75                     674              RTS
00001410                           675  
00001410                           676      
00001410                           677  
00001410                           678  
00001410                           679  
00001410                           680  
00001410                           681  
00001410                           682  
00001410                           683  
00001410                           684  
00001410                           685  
00001410                           686  -------------------- end include --------------------
00001410                           687              INCLUDE "STATES.X68"        ; STATES MANAGEMENT
00001410                           688  ; =============================================================================
00001410                           689  ; GAME STATE MANAGEMENT
00001410                           690  ; =============================================================================
00001410                           691  
00001410                           692  ; -----------------------------------------------------------------------------
00001410                           693  STAINIT
00001410                           694  ; INITALIZES THE STATE MANAGER
00001410                           695  ; INPUT    - NONE
00001410                           696  ; OUTPUT   - NONE
00001410                           697  ; MODIFIES - NONE
00001410                           698  ; -----------------------------------------------------------------------------
00001410  33FC FFFF 0000218C       699              MOVE.W  #STANONE,(STACUR)
00001418  4279 0000218E            700              CLR.W   (STANEXT)
0000141E  4E75                     701              RTS
00001420                           702  
00001420                           703  ; -----------------------------------------------------------------------------
00001420                           704  STAUPD
00001420                           705  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001420                           706  ; INPUT    - NONE
00001420                           707  ; OUTPUT   - NONE
00001420                           708  ; MODIFIES - NONE
00001420                           709  ; -----------------------------------------------------------------------------
00001420  48E7 8080                710              MOVEM.L D0/A0,-(A7)
00001424  4280                     711              CLR.L   D0
00001426  3039 0000218E            712              MOVE.W  (STANEXT),D0
0000142C  B079 0000218C            713              CMP.W   (STACUR),D0
00001432  6700 0012                714              BEQ     .DOUPD
00001436  33C0 0000218C            715              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
0000143C  E588                     716              LSL.L   #2,D0
0000143E  2040                     717              MOVE.L  D0,A0
00001440  2068 145E                718              MOVE.L  .INITBL(A0),A0
00001444  4E90                     719              JSR     (A0)
00001446  4280                     720  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001448  3039 0000218C            721              MOVE.W  (STACUR),D0
0000144E  E588                     722              LSL.L   #2,D0
00001450  2040                     723              MOVE.L  D0,A0
00001452  2068 1472                724              MOVE.L  .UPDTBL(A0),A0
00001456  4E90                     725              JSR     (A0)
00001458  4CDF 0101                726              MOVEM.L (A7)+,D0/A0
0000145C  4E75                     727              RTS
0000145E= 000014B8 000014F6 ...    728  .INITBL     DC.L    ISCINIT,INSINIT,GAMEINIT,PAUSINIT,GOVINIT
00001472= 000014CE 000014F8 ...    729  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMEUPD,PAUSUPD,GOVUPD
00001486                           730  
00001486                           731  ; -----------------------------------------------------------------------------
00001486                           732  STAPLOT
00001486                           733  ; PERFORMS STATE PLOT
00001486                           734  ; INPUT    - NONE
00001486                           735  ; OUTPUT   - NONE
00001486                           736  ; MODIFIES - NONE
00001486                           737  ; -----------------------------------------------------------------------------
00001486  48E7 8080                738              MOVEM.L D0/A0,-(A7)
0000148A  4280                     739              CLR.L   D0
0000148C  3039 0000218C            740              MOVE.W  (STACUR),D0
00001492  E588                     741              LSL.L   #2,D0
00001494  2040                     742              MOVE.L  D0,A0
00001496  2068 14A2                743              MOVE.L  .PLTTBL(A0),A0
0000149A  4E90                     744              JSR     (A0)
0000149C  4CDF 0101                745              MOVEM.L (A7)+,D0/A0
000014A0  4E75                     746              RTS
000014A2= 000014F0 000014FA ...    747  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMEPLOT,PAUSPLOT,GOVPLOT
000014B6                           748  
000014B6                           749  ; -----------------------------------------------------------------------------
000014B6                           750  STAEMPTY
000014B6                           751  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
000014B6                           752  ; INPUT    - NONE
000014B6                           753  ; OUTPUT   - NONE
000014B6                           754  ; MODIFIES - NONE
000014B6                           755  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
000014B6                           756  ; -----------------------------------------------------------------------------
000014B6  4E75                     757              RTS
000014B8                           758  
000014B8                           759  
000014B8                           760  
000014B8                           761  
000014B8                           762  
000014B8                           763  
000014B8                           764  
000014B8                           765  
000014B8                           766  -------------------- end include --------------------
000014B8                           767              INCLUDE "INTRO.X68"         ; INTRO STATE MANAGEMENT
000014B8                           768  ; =============================================================================
000014B8                           769  ; INTRO SCREEN MANAGEMENT
000014B8                           770  ; =============================================================================
000014B8                           771  
000014B8                           772  ; ------------------------------------------------------------------------------
000014B8                           773  ISCINIT
000014B8                           774  ; INTRO SCREEN INIT
000014B8                           775  ; INPUT    : NONE
000014B8                           776  ; OUTPUT   : NONE
000014B8                           777  ; MODIFIES : NONE
000014B8                           778  ; ------------------------------------------------------------------------------
000014B8                           779              ; INIT GAME VARIABLES
000014B8  4EB9 000015EA            780              JSR BIRDINIT
000014BE  4EB9 0000184E            781              JSR SCOINIT
000014C4                           782              ; CLEAN PIPES
000014C4  303C 0001                783              MOVE.W  #PIPEAGTP,D0
000014C8  4EB8 1126                784              JSR AGLCLEAN
000014CC  4E75                     785              RTS
000014CE                           786  
000014CE                           787  ; ------------------------------------------------------------------------------
000014CE                           788  ISCUPD
000014CE                           789  ; INTRO SCREEN UPDATE
000014CE                           790  ; INPUT    : NONE
000014CE                           791  ; OUTPUT   : NONE
000014CE                           792  ; MODIFIES : NONE
000014CE                           793  ; ------------------------------------------------------------------------------
000014CE                           794              
000014CE  4EB9 00001794            795              JSR BACKUPD
000014D4  4EB8 10DC                796              JSR AGLUPD
000014D8  1039 0000216B            797              MOVE.B  (KBDEDGE),D0
000014DE  C03C 0001                798              AND.B   #1,D0
000014E2  6700 000A                799              BEQ     .CONT
000014E6  33FC 0002 0000218E       800              MOVE.W  #STAGAME,(STANEXT)      
000014EE                           801  .CONT
000014EE  4E75                     802              RTS
000014F0                           803  
000014F0                           804  ; ------------------------------------------------------------------------------
000014F0                           805  ISCPLOT
000014F0                           806  ; INTRO SCREEN PLOT
000014F0                           807  ; INPUT    : NONE
000014F0                           808  ; OUTPUT   : NONE
000014F0                           809  ; MODIFIES : NONE
000014F0                           810  ; ------------------------------------------------------------------------------
000014F0  4EB8 1100                811              JSR AGLPLOT
000014F4  4E75                     812              RTS
000014F6                           813  
000014F6                           814  
000014F6                           815  
000014F6                           816  
000014F6                           817  
000014F6                           818  
000014F6                           819  
000014F6                           820  
000014F6                           821  
000014F6                           822  -------------------- end include --------------------
000014F6                           823              INCLUDE "INSTRUCTIONS.X68"  ; INSTRUCTIONS STATE MANAGEMENT
000014F6                           824  ; =============================================================================
000014F6                           825  ; INSTRUCTION SCREEN MANAGEMENT
000014F6                           826  ; =============================================================================
000014F6                           827  
000014F6                           828  ; ------------------------------------------------------------------------------
000014F6                           829  INSINIT
000014F6                           830  ; INSTRUCTIONS SCREEN INIT
000014F6                           831  ; INPUT    : NONE
000014F6                           832  ; OUTPUT   : NONE
000014F6                           833  ; MODIFIES : NONE
000014F6                           834  ; ------------------------------------------------------------------------------
000014F6  4E75                     835              RTS
000014F8                           836  
000014F8                           837  ; ------------------------------------------------------------------------------
000014F8                           838  INSUPD
000014F8                           839  ; INSTRUCTIONS SCREEN UPDATE
000014F8                           840  ; INPUT    : NONE
000014F8                           841  ; OUTPUT   : NONE
000014F8                           842  ; MODIFIES : NONE
000014F8                           843  ; ------------------------------------------------------------------------------
000014F8  4E75                     844              RTS
000014FA                           845  
000014FA                           846  ; ------------------------------------------------------------------------------
000014FA                           847  INSPLOT
000014FA                           848  ; INSTRUCTIONS SCREEN PLOT
000014FA                           849  ; INPUT    : NONE
000014FA                           850  ; OUTPUT   : NONE
000014FA                           851  ; MODIFIES : NONE
000014FA                           852  ; ------------------------------------------------------------------------------
000014FA  4E75                     853              RTS
000014FC                           854  
000014FC                           855  
000014FC                           856  
000014FC                           857  
000014FC                           858  
000014FC                           859  
000014FC                           860  
000014FC                           861  
000014FC                           862  
000014FC                           863  
000014FC                           864  -------------------- end include --------------------
000014FC                           865              INCLUDE "GAME.X68"          ; GAME STATE MANAGEMENT
000014FC                           866  ; =============================================================================
000014FC                           867  ; GAME MANAGEMENT
000014FC                           868  ; =============================================================================
000014FC                           869  
000014FC                           870  ; -----------------------------------------------------------------------------
000014FC                           871  GAMEINIT
000014FC                           872  ; INITIALIZES GAME.
000014FC                           873  ; INPUT    : NONE
000014FC                           874  ; OUTPUT   : NONE
000014FC                           875  ; MODIFIES : NONE
000014FC                           876  ; ------------------------------------------------------------------------------        
000014FC  13F9 0000216E 0000216D   877              MOVE.B  (GAMCYCCT),(SCRCYCCT)
00001506  4E75                     878              RTS
00001508                           879              
00001508                           880  ; -----------------------------------------------------------------------------
00001508                           881  GAMEUPD
00001508                           882  ; UPDATES GAME.
00001508                           883  ; INPUT     : NONE
00001508                           884  ; OUTPUT    : NONE
00001508                           885  ; MODIFIES  : NONE
00001508                           886  ; -----------------------------------------------------------------------------
00001508                           887  
00001508  4EB9 00001794            888              JSR     BACKUPD
0000150E  1F00                     889              MOVE.B  D0,-(A7)
00001510  1039 0000216B            890              MOVE.B  (KBDEDGE),D0
00001516  0800 0001                891              BTST    #1,D0
0000151A  6700 0014                892              BEQ     .NOPAUSE
0000151E  33FC 0003 0000218E       893              MOVE.W  #STAPAUSE, (STANEXT)
00001526  13F9 0000216D 0000216E   894              MOVE.B  (SCRCYCCT),(GAMCYCCT)
00001530                           895              
00001530  4EB9 00001544            896  .NOPAUSE    JSR     NEWPIPE
00001536  4EB8 10DC                897              JSR     AGLUPD
0000153A  4EB9 000015FA            898              JSR     BIRDUPD
00001540                           899              
00001540  101F                     900              MOVE.B  (A7)+,D0
00001542  4E75                     901              RTS
00001544                           902  
00001544                           903  ; -----------------------------------------------------------------------------
00001544                           904  NEWPIPE
00001544                           905  ; CREATES A NEW PIPE IN CASE IT'S NECESSARY.
00001544                           906  ; INPUT     : NONE
00001544                           907  ; OUTPUT    : NONE
00001544                           908  ; MODIFIES  : NONE
00001544                           909  ; -----------------------------------------------------------------------------
00001544                           910  
00001544  48E7 8070                911              MOVEM.L D0/A1-A3,-(A7)
00001548                           912              
00001548  1039 0000216D            913              MOVE.B  (SCRCYCCT),D0
0000154E  0200 003F                914              ANDI.B  #MASKNWPP,D0
00001552  6600 001C                915              BNE     .GOUPD
00001556  43F9 0000168E            916              LEA     PIPEINIT,A1
0000155C  45F9 000016A6            917              LEA     PIPEUPD,A2
00001562  47F9 00001734            918              LEA     PIPEPLOT,A3
00001568  303C 0001                919              MOVE    #PIPEAGTP,D0
0000156C  4EB8 10C2                920              JSR     AGLADD
00001570                           921              
00001570  4CDF 0E01                922  .GOUPD      MOVEM.L (A7)+,D0/A1-A3
00001574  4E75                     923              RTS
00001576                           924  
00001576                           925  ; -----------------------------------------------------------------------------
00001576                           926  GAMEPLOT
00001576                           927  ; PLOTS THE GAME.
00001576                           928  ; INPUT     : NONE
00001576                           929  ; OUTPUT    : NONE
00001576                           930  ; MODIFIES  : NONE
00001576                           931  ; -----------------------------------------------------------------------------
00001576                           932              
00001576  4EB9 000018A2            933              JSR     SCOPLOT
0000157C  4EB8 1100                934              JSR     AGLPLOT
00001580  6000 00CA                935              BRA     BIRDPLOT
00001584                           936           
00001584                           937  
00001584                           938  
00001584                           939  
00001584                           940  
00001584                           941  
00001584                           942  
00001584                           943  
00001584                           944  
00001584                           945  
00001584                           946  
00001584                           947  
00001584                           948  
00001584                           949  -------------------- end include --------------------
00001584                           950              INCLUDE "PAUSE.X68"         ; PAUSE STATE MANAGEMENT
00001584                           951  ; =============================================================================
00001584                           952  ; PAUSE SCREEN MANAGEMENT
00001584                           953  ; =============================================================================
00001584                           954  
00001584                           955  ; ------------------------------------------------------------------------------
00001584                           956  PAUSINIT
00001584                           957  ; PAUSE SCREEN INIT
00001584                           958  ; INPUT    : NONE
00001584                           959  ; OUTPUT   : NONE
00001584                           960  ; MODIFIES : NONE
00001584                           961  ; ------------------------------------------------------------------------------
00001584  1F00                     962              MOVE.B  D0,-(A7)
00001586  1039 0000216B            963              MOVE.B  (KBDEDGE),D0
0000158C  C03C 0002                964              AND.B   #2,D0
00001590  6700 000A                965              BEQ     .CONT
00001594  33FC 0002 0000218E       966              MOVE.W  #STAGAME,(STANEXT)   
0000159C                           967     
0000159C  101F                     968  .CONT       MOVE.B  (A7)+,D0
0000159E  4E75                     969              RTS
000015A0                           970  
000015A0                           971  ; ------------------------------------------------------------------------------
000015A0                           972  PAUSUPD
000015A0                           973  ; PAUSE SCREEN UPDATE
000015A0                           974  ; INPUT    : NONE
000015A0                           975  ; OUTPUT   : NONE
000015A0                           976  ; MODIFIES : NONE
000015A0                           977  ; ------------------------------------------------------------------------------
000015A0                           978          
000015A0  1F00                     979              MOVE.B  D0,-(A7)
000015A2                           980              
000015A2                           981              ; CHECK IF KEY PRESSED TO RESUME GAME
000015A2  1039 0000216B            982              MOVE.B  (KBDEDGE),D0
000015A8  0800 0001                983              BTST    #1,D0
000015AC  6700 000A                984              BEQ     .CONT
000015B0  33FC 0002 0000218E       985              MOVE.W  #STAGAME, (STANEXT)   
000015B8                           986              
000015B8  101F                     987  .CONT       MOVE.B  (A7)+,D0     
000015BA  4E75                     988              RTS
000015BC                           989  
000015BC                           990  ; ------------------------------------------------------------------------------
000015BC                           991  PAUSPLOT
000015BC                           992  ; PAUSE SCREEN PLOT
000015BC                           993  ; INPUT    : NONE
000015BC                           994  ; OUTPUT   : NONE
000015BC                           995  ; MODIFIES : NONE
000015BC                           996  ; ------------------------------------------------------------------------------
000015BC  60B8                     997              BRA     GAMEPLOT
000015BE                           998  
000015BE                           999  
000015BE                          1000  
000015BE                          1001  
000015BE                          1002  
000015BE                          1003  
000015BE                          1004  
000015BE                          1005  
000015BE                          1006  
000015BE                          1007  
000015BE                          1008  
000015BE                          1009  
000015BE                          1010  -------------------- end include --------------------
000015BE                          1011              INCLUDE "GOVER.X68"         ; GAME OVER STATE MANAGEMENT
000015BE                          1012  ; =============================================================================
000015BE                          1013  ; GAME OVER SCREEN MANAGEMENT
000015BE                          1014  ; =============================================================================
000015BE                          1015  
000015BE                          1016  ; ------------------------------------------------------------------------------
000015BE                          1017  GOVINIT
000015BE                          1018  ; GAME OVER SCREEN INIT
000015BE                          1019  ; INPUT    : NONE
000015BE                          1020  ; OUTPUT   : NONE
000015BE                          1021  ; MODIFIES : NONE
000015BE                          1022  ; ------------------------------------------------------------------------------
000015BE  6000 0348               1023              BRA     SCOSAVE
000015C2                          1024  
000015C2                          1025  ; ------------------------------------------------------------------------------
000015C2                          1026  GOVUPD
000015C2                          1027  ; GAME OVER SCREEN UPDATE
000015C2                          1028  ; INPUT    : NONE
000015C2                          1029  ; OUTPUT   : NONE
000015C2                          1030  ; MODIFIES : NONE
000015C2                          1031  ; ------------------------------------------------------------------------------
000015C2                          1032  
000015C2  3F00                    1033              MOVE.W  D0,-(A7)
000015C4                          1034  
000015C4  4EB9 00001794           1035              JSR     BACKUPD
000015CA  4EB8 10DC               1036              JSR     AGLUPD
000015CE                          1037              ; CHECK IF KEY PRESSED
000015CE  1039 0000216B           1038              MOVE.B  (KBDEDGE),D0
000015D4  6700 000A               1039              BEQ     .CONT
000015D8  33FC 0000 0000218E      1040              MOVE.W  #STAINTRO,(STANEXT)   
000015E0                          1041     
000015E0  301F                    1042  .CONT       MOVE.W  (A7)+,D0
000015E2  4E75                    1043              RTS
000015E4                          1044  
000015E4                          1045  ; ------------------------------------------------------------------------------
000015E4                          1046  GOVPLOT
000015E4                          1047  ; GAME OVER SCREEN PLOT
000015E4                          1048  ; INPUT    : NONE
000015E4                          1049  ; OUTPUT   : NONE
000015E4                          1050  ; MODIFIES : NONE
000015E4                          1051  ; ------------------------------------------------------------------------------
000015E4  4EB8 1576               1052              JSR GAMEPLOT
000015E8  4E75                    1053              RTS
000015EA                          1054  
000015EA                          1055  
000015EA                          1056  
000015EA                          1057  
000015EA                          1058  
000015EA                          1059  
000015EA                          1060  
000015EA                          1061  
000015EA                          1062  
000015EA                          1063  
000015EA                          1064  
000015EA                          1065  -------------------- end include --------------------
000015EA                          1066              INCLUDE "BIRD.X68"          ; PLAYER (BIRD) MANAGEMENT
000015EA                          1067  ; =============================================================================
000015EA                          1068  ; BIRD MANAGEMENT
000015EA                          1069  ; =============================================================================
000015EA                          1070  
000015EA                          1071  ; -----------------------------------------------------------------------------
000015EA                          1072  BIRDINIT
000015EA                          1073  ; INITIALIZE BIRD.
000015EA                          1074  ; INPUT     : NONE 
000015EA                          1075  ; OUTPUT    : NONE
000015EA                          1076  ; MODIFIES  : NONE
000015EA                          1077  ; -----------------------------------------------------------------------------
000015EA  33FC 00F0 00002180      1078              MOVE.W  #SCRHEIGH/2,(BIRDPOSY)
000015F2  4279 00002182           1079              CLR.W   BIRDVELY
000015F8  4E75                    1080              RTS
000015FA                          1081              
000015FA                          1082  ; -----------------------------------------------------------------------------
000015FA                          1083  BIRDUPD
000015FA                          1084  ; UPDATES THE BIRD.
000015FA                          1085  ; INPUT    : NONE 
000015FA                          1086  ; OUTPUT   : NONE
000015FA                          1087  ; MODIFIES : NONE
000015FA                          1088  ; -----------------------------------------------------------------------------
000015FA                          1089  
000015FA  48E7 E000               1090              MOVEM.L D0-D2,-(A7)
000015FE                          1091  
000015FE                          1092              ; UPDATE VELOCITY
000015FE  1439 0000216B           1093              MOVE.B  (KBDEDGE),D2        ; CHECK IF SHOULD JUMP
00001604  0802 0000               1094              BTST    #0,D2
00001608  6700 0014               1095              BEQ     .NOJUMP
0000160C                          1096              
0000160C  1E3C 0001               1097              MOVE.B  #SNDJUMP,D7         ; PLAY SOUND
00001610  4E42                    1098              TRAP    #SNDPLTN
00001612  33FC FFF6 00002182      1099              MOVE.W  #JUMPVELY,(BIRDVELY)
0000161A  6000 0008               1100              BRA     .CORDUPD
0000161E                          1101              
0000161E  5279 00002182           1102  .NOJUMP     ADDQ.W  #1,BIRDVELY          ; ACCELERATE
00001624                          1103              
00001624                          1104              ; UPDATE BIRD COORDINATES
00001624  3039 00002180           1105  .CORDUPD    MOVE.W  (BIRDPOSY),D0
0000162A  D079 00002182           1106              ADD.W   (BIRDVELY),D0
00001630                          1107              
00001630                          1108              ; CHECK SCREEN COLLISIONS
00001630  B07C 0195               1109              CMP.W   #SCRHEIGH-FLOHEIGH-BIRDRAD,D0
00001634  6D00 000A               1110              BLT     .NOCOL
00001638                          1111          
00001638                          1112              ; COLLISION BOT
00001638  33FC 0004 0000218E      1113  .COLBOT     MOVE.W  #STAGOVER,(STANEXT)
00001640                          1114              
00001640                          1115              ; STORE POSITION
00001640  33C0 00002180           1116  .NOCOL      MOVE.W  D0,(BIRDPOSY)
00001646                          1117  
00001646  4CDF 0007               1118  .DONE       MOVEM.L (A7)+,D0-D2
0000164A                          1119              
0000164A  4E75                    1120              RTS
0000164C                          1121  
0000164C                          1122  ; -----------------------------------------------------------------------------
0000164C                          1123  BIRDPLOT
0000164C                          1124  ; PLOT THE BIRD.
0000164C                          1125  ; INPUT    : NONE 
0000164C                          1126  ; OUTPUT   : NONE
0000164C                          1127  ; MODIFIES : NONE
0000164C                          1128  ; -----------------------------------------------------------------------------
0000164C                          1129  
0000164C  48E7 F800               1130              MOVEM.L D0-D4,-(A7)
00001650                          1131  
00001650                          1132              ; SET PEN COLOR
00001650  103C 0050               1133              MOVE.B  #80,D0
00001654  4281                    1134              CLR.L   D1
00001656  3239 00002184           1135              MOVE.W  (BIRDPCOL),D1
0000165C  4E4F                    1136              TRAP    #15
0000165E                          1137              
0000165E                          1138              ; SET FILL COLOR
0000165E  103C 0051               1139              MOVE.B  #81,D0
00001662  3239 00002186           1140              MOVE.W  (BIRDFCOL),D1
00001668  4E4F                    1141              TRAP    #15
0000166A                          1142  
0000166A                          1143              ; DEFINE COORDINATES
0000166A  323C 0091               1144              MOVE.W  #(BIRDPOSX)-BIRDRAD,D1
0000166E  363C 00AF               1145              MOVE.W  #(BIRDPOSX)+BIRDRAD,D3
00001672  3439 00002180           1146              MOVE.W  (BIRDPOSY),D2
00001678  3802                    1147              MOVE.W  D2,D4
0000167A  0442 000F               1148              SUB.W  #BIRDRAD,D2
0000167E  0644 000F               1149              ADD.W  #BIRDRAD,D4
00001682                          1150              
00001682                          1151              ; DRAW CIRCLE
00001682  103C 0058               1152              MOVE.B  #88,D0
00001686  4E4F                    1153              TRAP    #15
00001688                          1154              
00001688  4CDF 001F               1155              MOVEM.L (A7)+,D0-D4
0000168C                          1156  
0000168C  4E75                    1157              RTS
0000168E                          1158  
0000168E                          1159  
0000168E                          1160  
0000168E                          1161  
0000168E                          1162  
0000168E                          1163  
0000168E                          1164  
0000168E                          1165  
0000168E                          1166  
0000168E                          1167  
0000168E                          1168  
0000168E                          1169  
0000168E                          1170  
0000168E                          1171  -------------------- end include --------------------
0000168E                          1172              INCLUDE "PIPE.X68"          ; OBSTACLE (PIPE) MANAGEMENT
0000168E                          1173  ; =============================================================================
0000168E                          1174  ; PIPE MANAGEMENT (AGENT)
0000168E                          1175  ; PIPEPOSX (W) (A0)
0000168E                          1176  ; PIPETOPH (B) 2(A0)
0000168E                          1177  ; =============================================================================
0000168E                          1178  
0000168E                          1179  ; -----------------------------------------------------------------------------
0000168E                          1180  PIPEINIT
0000168E                          1181  ; INITIALIZE PIPE.
0000168E                          1182  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
0000168E                          1183  ; OUTPUT    : NONE
0000168E                          1184  ; MODIFIES  : NONE
0000168E                          1185  ; -----------------------------------------------------------------------------
0000168E                          1186  
0000168E  2F00                    1187              MOVE.L  D0,-(A7)
00001690                          1188              
00001690  30BC 0280               1189              MOVE.W  #SCRWIDTH,(A0)
00001694  4EB8 118E               1190              JSR UTLRAND         ; RANDOM NUMBER BETWEEN 0-255
00001698  0680 00000096           1191              ADD.L   #(SCRHEIGH-PIPEGAPS-FLOHEIGH)/2,D0
0000169E  1140 0002               1192              MOVE.B  D0,2(A0)
000016A2                          1193              
000016A2  201F                    1194              MOVE.L  (A7)+,D0
000016A4  4E75                    1195              RTS
000016A6                          1196              
000016A6                          1197  ; -----------------------------------------------------------------------------
000016A6                          1198  PIPEUPD
000016A6                          1199  ; UPDATES PIPE.
000016A6                          1200  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
000016A6                          1201  ; OUTPUT    : NONE
000016A6                          1202  ; MODIFIES  : NONE
000016A6                          1203  ; -----------------------------------------------------------------------------
000016A6  48E7 C000               1204              MOVEM.L D0-D1,-(A7)
000016AA                          1205              
000016AA  3039 0000218C           1206              MOVE.W  (STACUR),D0
000016B0  B07C 0002               1207              CMP.W   #STAGAME,D0
000016B4  6600 0078               1208              BNE     .END
000016B8                          1209  
000016B8                          1210              ; UPDATE POSITION
000016B8  0650 FFFB               1211              ADD.W   #PIPEVELX,(A0)
000016BC                          1212  
000016BC                          1213  ; CHECK AND HANDLE COLLISIONS
000016BC                          1214              
000016BC                          1215              ; COLLISION WITH SCREEN
000016BC  3010                    1216              MOVE.W  (A0),D0
000016BE  0640 0032               1217              ADD.W   #PIPEWIDT,D0
000016C2  6A00 000A               1218              BPL     .NOKILL
000016C6  4EB8 10AC               1219              JSR AGLKILL
000016CA  6000 0062               1220              BRA     .END
000016CE                          1221              
000016CE                          1222              ; COLLISION WITH BIRD
000016CE  B07C 00E1               1223  .NOKILL     CMP.W   #BIRDPOSX+BIRDRAD+PIPEWIDT,D0
000016D2  6A00 004C               1224              BPL     .NOCOL
000016D6  B07C 0091               1225              CMP.W   #BIRDPOSX-BIRDRAD,D0
000016DA  6B00 0044               1226              BMI     .NOCOL
000016DE                          1227  
000016DE                          1228              
000016DE                          1229              ; BIRD IS IN PIPE X RANGE
000016DE  4280                    1230              CLR.L   D0
000016E0  1028 0002               1231              MOVE.B  2(A0),D0
000016E4  3239 00002180           1232              MOVE.W  (BIRDPOSY),D1
000016EA  0441 000F               1233              SUB.W   #BIRDRAD,D1
000016EE  B041                    1234              CMP.W   D1,D0
000016F0  6A00 0014               1235              BPL     .COL
000016F4  0640 0078               1236              ADD.W   #PIPEGAPS,D0
000016F8  0641 001E               1237              ADD.W   #2*BIRDRAD,D1
000016FC  B041                    1238              CMP.W   D1,D0
000016FE  6B00 0006               1239              BMI     .COL
00001702                          1240  
00001702  6000 001C               1241              BRA     .NOCOL
00001706                          1242  
00001706                          1243              ; STOP ALL SOUNDS
00001706  103C 004C               1244  .COL        MOVE.B  #76,D0
0000170A  7403                    1245              MOVE.L  #3,D2
0000170C  4E4F                    1246              TRAP    #15
0000170E                          1247              
0000170E  1E3C 0000               1248              MOVE.B  #SNDDIE,D7  ; PLAY DIE SOUND
00001712  4E42                    1249              TRAP    #SNDPLTN
00001714                          1250              
00001714  33FC 0004 0000218E      1251              MOVE.W  #STAGOVER,(STANEXT)
0000171C                          1252              
0000171C  6000 0010               1253              BRA     .END
00001720                          1254  
00001720                          1255              ; SCORE INCREASE
00001720  0C50 005F               1256  .NOCOL      CMP.W   #BIRDPOSX-PIPEWIDT-BIRDRAD,(A0)
00001724  6600 0008               1257              BNE     .END
00001728  4EB9 00001884           1258              JSR     SCOINC
0000172E                          1259              
0000172E  4CDF 0003               1260  .END        MOVEM.L  (A7)+,D0-D1
00001732  4E75                    1261              RTS
00001734                          1262  
00001734                          1263  ; -----------------------------------------------------------------------------
00001734                          1264  PIPEPLOT
00001734                          1265  ; PLOT THE PIPE.
00001734                          1266  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001734                          1267  ; OUTPUT    : NONE
00001734                          1268  ; MODIFIES  : NONE
00001734                          1269  ; -----------------------------------------------------------------------------
00001734                          1270      
00001734  48E7 F800               1271              MOVEM.L D0-D4,-(A7)
00001738                          1272              
00001738                          1273              ; SET PEN AND FILL COLORS
00001738  103C 0050               1274              MOVE.B  #80,D0
0000173C  223C 000C0C0C           1275              MOVE.L  #PIPEPCOL,D1
00001742  4E4F                    1276              TRAP    #15
00001744  103C 0051               1277              MOVE.B  #81,D0
00001748  223C 00616161           1278              MOVE.L  #PIPEFCOL,D1
0000174E  4E4F                    1279              TRAP    #15
00001750                          1280              
00001750                          1281              ; PLOT TOP HALF
00001750  3210                    1282              MOVE.W  (A0),D1
00001752  4242                    1283              CLR.W   D2
00001754  3601                    1284              MOVE.W  D1,D3
00001756  0643 0032               1285              ADD.W   #PIPEWIDT,D3
0000175A  4244                    1286              CLR.W   D4
0000175C  1828 0002               1287              MOVE.B  2(A0),D4
00001760  103C 0057               1288              MOVE.B  #87,D0
00001764  4E4F                    1289              TRAP    #15
00001766                          1290              ; PLOT TOP PIPE OPENING
00001766  3404                    1291              MOVE.W  D4,D2
00001768  0442 000F               1292              SUB.W   #PPOPHEIG,D2
0000176C  5B41                    1293              SUB.W   #PPOPOVER,D1
0000176E  5A43                    1294              ADD.W   #PPOPOVER,D3
00001770  4E4F                    1295              TRAP    #15
00001772                          1296              
00001772                          1297              
00001772                          1298              ; PLOT BOTTOM HALF
00001772  5A41                    1299              ADD.W   #PPOPOVER,D1
00001774  5B43                    1300              SUB.W   #PPOPOVER,D3
00001776  3404                    1301              MOVE.W  D4,D2
00001778  0642 0078               1302              ADD.W   #PIPEGAPS,D2
0000177C  383C 01A4               1303              MOVE.W  #SCRHEIGH-FLOHEIGH,D4
00001780  4E4F                    1304              TRAP    #15
00001782                          1305              ;PLOT BOTTOM PIPE OPNENING
00001782  5B41                    1306              SUB.W   #PPOPOVER,D1
00001784  5A43                    1307              ADD.W   #PPOPOVER,D3
00001786  3802                    1308              MOVE.W  D2,D4
00001788  0644 000F               1309              ADD.W   #PPOPHEIG,D4
0000178C  4E4F                    1310              TRAP    #15
0000178E                          1311              
0000178E  4CDF 001F               1312              MOVEM.L (A7)+,D0-D4
00001792  4E75                    1313              RTS
00001794                          1314  
00001794                          1315  
00001794                          1316  
00001794                          1317  
00001794                          1318  
00001794                          1319  
00001794                          1320  
00001794                          1321  
00001794                          1322  
00001794                          1323  
00001794                          1324  
00001794                          1325  
00001794                          1326  
00001794                          1327  -------------------- end include --------------------
00001794                          1328              INCLUDE "BACKGROUND.X68"    ; BACKGROUND MANAGEMENT
00001794                          1329  ; =============================================================================
00001794                          1330  ; BACKGROUND MANAGEMENT
00001794                          1331  ; =============================================================================
00001794                          1332  
00001794                          1333  ; -----------------------------------------------------------------------------
00001794                          1334  BACKUPD
00001794                          1335  ; UPDATES BACKGROUND
00001794                          1336  ; INPUT     : NONE
00001794                          1337  ; OUTPUT    : NONE
00001794                          1338  ; MODIFIES  : NONE
00001794                          1339  ; -----------------------------------------------------------------------------
00001794                          1340              
00001794  48E7 8070               1341              MOVEM.L D0/A1-A3,-(A7)
00001798                          1342              
00001798                          1343              ; CREATE NEW CLOUD
00001798  1039 0000216D           1344              MOVE.B  (SCRCYCCT),D0
0000179E  0200 007F               1345              ANDI.B  #MASKNWCL,D0
000017A2  6600 001C               1346              BNE     .NONEWCL
000017A6  43F9 0000194E           1347              LEA     CLDINIT,A1
000017AC  45F9 00001972           1348              LEA     CLDUPD,A2
000017B2  47F9 000019A0           1349              LEA     CLDPLOT,A3
000017B8  303C 0002               1350              MOVE    #CLOUDAGT,D0
000017BC  4EB8 10C2               1351              JSR     AGLADD
000017C0                          1352              
000017C0  4CDF 0E01               1353  .NONEWCL    MOVEM.L (A7)+,D0/A1-A3
000017C4  4E75                    1354              RTS
000017C6                          1355  
000017C6                          1356  ; -----------------------------------------------------------------------------
000017C6                          1357  BACKPLOT
000017C6                          1358  ; DRAWS BACKGROUND
000017C6                          1359  ; INPUT     : NONE
000017C6                          1360  ; OUTPUT    : NONE
000017C6                          1361  ; MODIFIES  : NONE
000017C6                          1362  ; -----------------------------------------------------------------------------
000017C6                          1363  
000017C6  4EB9 000017D0           1364              JSR SKYPLOT
000017CC  6000 0030               1365              BRA FLOPLOT
000017D0                          1366              
000017D0                          1367  ; -----------------------------------------------------------------------------
000017D0                          1368  SKYPLOT
000017D0                          1369  ; DRAWS THE SKY BACKGROUND
000017D0                          1370  ; INPUT     : NONE
000017D0                          1371  ; OUTPUT    : NONE
000017D0                          1372  ; MODIFIES  : NONE
000017D0                          1373  ; -----------------------------------------------------------------------------
000017D0                          1374              
000017D0  48E7 F800               1375              MOVEM.L D0-D4,-(A7)
000017D4                          1376              ; SET PEN COLOR
000017D4  223C 00FFBF80           1377              MOVE.L  #SKYCOLOR,D1
000017DA  103C 0050               1378              MOVE.B  #80,D0
000017DE  4E4F                    1379              TRAP    #15
000017E0                          1380              
000017E0                          1381              ; SET FILL COLOR
000017E0  103C 0051               1382              MOVE.B  #81,D0
000017E4  4E4F                    1383              TRAP    #15
000017E6                          1384              
000017E6                          1385              ; SET COORDS AND DRAW
000017E6  103C 0057               1386              MOVE.B  #87,D0
000017EA  4241                    1387              CLR.W   D1
000017EC  4242                    1388              CLR.W   D2
000017EE  363C 0280               1389              MOVE.W  #SCRWIDTH,D3
000017F2  383C 01E0               1390              MOVE.W  #SCRHEIGH,D4
000017F6  4E4F                    1391              TRAP    #15
000017F8                          1392              
000017F8  4CDF 001F               1393              MOVEM.L (A7)+,D0-D4
000017FC  4E75                    1394              RTS
000017FE                          1395              
000017FE                          1396  ; -----------------------------------------------------------------------------
000017FE                          1397  FLOPLOT
000017FE                          1398  ; DRAWS THE FLOOR BACKGROUND
000017FE                          1399  ; INPUT     : NONE
000017FE                          1400  ; OUTPUT    : NONE
000017FE                          1401  ; MODIFIES  : NONE
000017FE                          1402  ; -----------------------------------------------------------------------------
000017FE                          1403  
000017FE  48E7 F800               1404              MOVEM.L D0-D4,-(A7)
00001802                          1405              
00001802                          1406              ; DRAW GRASS
00001802  223C 0035DE3B           1407              MOVE.L  #GRASSCLR,D1            ; SET PEN COLOR
00001808  103C 0050               1408              MOVE.B  #80,D0
0000180C  4E4F                    1409              TRAP    #15     
0000180E  103C 0051               1410              MOVE.B  #81,D0                  ; SET FILL COLOR
00001812  4E4F                    1411              TRAP    #15
00001814  103C 0057               1412              MOVE.B  #87,D0                  ; SET COORDS AND DRAW
00001818  4241                    1413              CLR.W   D1
0000181A  343C 01A4               1414              MOVE.W  #SCRHEIGH-FLOHEIGH,D2
0000181E  363C 0280               1415              MOVE.W  #SCRWIDTH,D3
00001822  383C 01B3               1416              MOVE.W  #SCRHEIGH-DIRTHEIG,D4
00001826  4E4F                    1417              TRAP    #15
00001828                          1418              
00001828                          1419              ; DRAW DIRT
00001828  223C 00306284           1420              MOVE.L  #DIRTCLR,D1             ; SET PEN COLOR
0000182E  103C 0050               1421              MOVE.B  #80,D0
00001832  4E4F                    1422              TRAP    #15
00001834  103C 0051               1423              MOVE.B  #81,D0                  ; SET FILL COLOR
00001838  4E4F                    1424              TRAP    #15
0000183A  103C 0057               1425              MOVE.B  #87,D0
0000183E  4241                    1426              CLR.W   D1
00001840  3404                    1427              MOVE.W  D4,D2
00001842  383C 01E0               1428              MOVE.W  #SCRHEIGH,D4
00001846  4E4F                    1429              TRAP    #15
00001848                          1430              
00001848  4CDF 001F               1431              MOVEM.L (A7)+,D0-D4
0000184C  4E75                    1432              RTS
0000184E                          1433  
0000184E                          1434  
0000184E                          1435  
0000184E                          1436  -------------------- end include --------------------
0000184E                          1437              INCLUDE "SCORE.X68"         ; SCORE MANAGEMENT
0000184E                          1438  ; =============================================================================
0000184E                          1439  ; SCOREBOARD MANAGEMENT
0000184E                          1440  ; =============================================================================
0000184E                          1441  
0000184E                          1442  ; ------------------------------------------------------------------------------
0000184E                          1443  SCOINIT
0000184E                          1444  ; INITIALIZE SCOREBOARD
0000184E                          1445  ; INPUT    : NONE 
0000184E                          1446  ; OUTPUT   : NONE
0000184E                          1447  ; MODIFIES : NONE
0000184E                          1448  ; ------------------------------------------------------------------------------
0000184E                          1449  
0000184E  48E7 E0C0               1450              MOVEM.L D0-D2/A0-A1,-(A7)
00001852  4279 00002188           1451              CLR.W   (SCORE)
00001858  4279 0000218A           1452              CLR.W   (HIGHSCO)
0000185E                          1453              
0000185E                          1454              ; OPEN FILE
0000185E  43F9 00002170           1455              LEA     SCOPATH,A1
00001864  103C 0033               1456              MOVE.B  #51,D0
00001868  4E4F                    1457              TRAP    #15
0000186A                          1458              
0000186A                          1459              ; READ HIGH SCORE
0000186A  43F9 0000218A           1460              LEA     HIGHSCO,A1
00001870  7402                    1461              MOVE.L  #2,D2
00001872  103C 0035               1462              MOVE.B  #53,D0
00001876  4E4F                    1463              TRAP    #15
00001878                          1464              
00001878                          1465              ; CLOSE FILE
00001878  103C 0038               1466              MOVE.B  #56,D0
0000187C  4E4F                    1467              TRAP    #15
0000187E                          1468              
0000187E  4CDF 0307               1469              MOVEM.L (A7)+,D0-D2/A0-A1
00001882  4E75                    1470              RTS
00001884                          1471              
00001884                          1472  ; -----------------------------------------------------------------------------
00001884                          1473  SCOINC
00001884                          1474  ; INCREASES THE SCORE BY 1
00001884                          1475  ; INPUT     : NONE
00001884                          1476  ; OUTPUT    : SCORE = SCORE + 1
00001884                          1477  ; MODIFIES  : NONE (APART FROM OUTPUT)
00001884                          1478  ; -----------------------------------------------------------------------------
00001884  48E7 A100               1479              MOVEM.L D0/D2/D7,-(A7)
00001888                          1480  
00001888  5279 00002188           1481              ADDQ.W  #1,(SCORE)
0000188E                          1482              ; STOP ALL SOUNDS
0000188E  103C 004C               1483              MOVE.B  #76,D0
00001892  7403                    1484              MOVE.L  #3,D2
00001894  4E4F                    1485              TRAP    #15
00001896                          1486              
00001896                          1487              ; PLAY SOUND
00001896  1E3C 0002               1488              MOVE.B  #SNDSCO,D7
0000189A  4E42                    1489              TRAP    #SNDPLTN
0000189C                          1490              
0000189C  4CDF 0085               1491              MOVEM.L (A7)+,D0/D2/D7
000018A0  4E75                    1492              RTS
000018A2                          1493              
000018A2                          1494  ; ------------------------------------------------------------------------------
000018A2                          1495  SCOPLOT
000018A2                          1496  ; PLOT THE SCOREBOARD
000018A2                          1497  ; INPUT    : NONE 
000018A2                          1498  ; OUTPUT   : NONE
000018A2                          1499  ; MODIFIES : NONE
000018A2                          1500  ; ------------------------------------------------------------------------------
000018A2                          1501  
000018A2  48E7 C040               1502              MOVEM.L D0-D1/A1,-(A7)
000018A6                          1503  
000018A6                          1504              ; SET BACKGROUND COLOR
000018A6  103C 0051               1505              MOVE.B  #81,D0
000018AA  223C 00306284           1506              MOVE.L  #SCOFCOL,D1
000018B0  4E4F                    1507              TRAP    #15
000018B2                          1508              
000018B2                          1509              ; SET SCORE LINE POSITION
000018B2  103C 000B               1510              MOVE.B  #11,D0
000018B6  323C 101D               1511              MOVE.W  #SCOLINE,D1
000018BA  4E4F                    1512              TRAP    #15
000018BC                          1513              
000018BC                          1514              ; PLOT THE SCORE
000018BC  43F9 000018F4           1515              LEA     .SCOTXT,A1
000018C2  4281                    1516              CLR.L   D1
000018C4  3239 00002188           1517              MOVE.W  (SCORE),D1
000018CA  103C 0011               1518              MOVE.B  #17,D0
000018CE  4E4F                    1519              TRAP    #15
000018D0                          1520              
000018D0                          1521              ; SET HIGH SCORE LINE POSITION
000018D0  103C 000B               1522              MOVE.B  #11,D0
000018D4  323C 101E               1523              MOVE.W  #HSCOLINE,D1
000018D8  4E4F                    1524              TRAP    #15
000018DA                          1525              
000018DA                          1526              ; PLOT THE HIGHSCORE
000018DA  43F9 000018FC           1527              LEA     .HISCOTXT,A1
000018E0  4281                    1528              CLR.L   D1
000018E2  3239 0000218A           1529              MOVE.W  (HIGHSCO),D1
000018E8  103C 0011               1530              MOVE.B  #17,D0
000018EC  4E4F                    1531              TRAP    #15
000018EE                          1532              
000018EE  4CDF 0203               1533              MOVEM.L (A7)+,D0-D1/A1
000018F2  4E75                    1534              RTS
000018F4                          1535              
000018F4= 53 43 4F 52 45 3A ...   1536  .SCOTXT     DC.B    'SCORE: ',0
000018FC= 48 49 47 48 53 43 ...   1537  .HISCOTXT   DC.B    'HIGHSCORE: ',0
00001908                          1538  
00001908                          1539  ; ------------------------------------------------------------------------------
00001908                          1540  SCOSAVE
00001908                          1541  ; SAVES THE HIGH SCORE
00001908                          1542  ; INPUT    : NONE 
00001908                          1543  ; OUTPUT   : NONE
00001908                          1544  ; MODIFIES : NONE
00001908                          1545  ; ------------------------------------------------------------------------------
00001908                          1546  
00001908  48E7 E0C0               1547              MOVEM.L A0-A1/D0-D2,-(A7)
0000190C                          1548              ; IF ACTUAL SCORE > HIGH SCORE
0000190C  3039 00002188           1549              MOVE.W  (SCORE),D0
00001912  3239 0000218A           1550              MOVE.W  (HIGHSCO),D1
00001918  B240                    1551              CMP.W   D0,D1
0000191A  6C00 002C               1552              BGE     .END
0000191E                          1553              
0000191E                          1554              ; OPEN FILE
0000191E  43F9 00002170           1555              LEA     SCOPATH,A1
00001924  103C 0033               1556              MOVE.B  #51,D0
00001928  4E4F                    1557              TRAP    #15
0000192A                          1558              
0000192A                          1559              ; SAVE NEW HIGH SCORE
0000192A  33F9 00002188 0000218A  1560              MOVE.W  (SCORE),(HIGHSCO)
00001934  43F9 0000218A           1561              LEA     HIGHSCO,A1
0000193A  7402                    1562              MOVE.L  #2,D2
0000193C  103C 0036               1563              MOVE.B  #54,D0
00001940  4E4F                    1564              TRAP    #15
00001942                          1565              
00001942                          1566              ; CLOSE FILE
00001942  103C 0038               1567              MOVE.B  #56,D0
00001946  4E4F                    1568              TRAP    #15
00001948                          1569              
00001948                          1570              
00001948  4CDF 0307               1571  .END        MOVEM.L (A7)+,A0-A1/D0-D2
0000194C  4E75                    1572              RTS
0000194E                          1573  
0000194E                          1574  
0000194E                          1575  
0000194E                          1576  
0000194E                          1577  
0000194E                          1578  -------------------- end include --------------------
0000194E                          1579              INCLUDE "CLOUD.X68"         ; CLOUD MANAGEMENT
0000194E                          1580  ; =============================================================================
0000194E                          1581  ; CLOUD MANAGEMENT (AGENT)
0000194E                          1582  ; CLOUDPOSX  (W) (A0)
0000194E                          1583  ; CLOUDPOSY  (W) 2(A0)
0000194E                          1584  ; CLOUDSPEED (W) 4(A0)
0000194E                          1585  ; CLOUDTYPE  (W) 6(A0)
0000194E                          1586  ; =============================================================================
0000194E                          1587  
0000194E                          1588  ; -----------------------------------------------------------------------------
0000194E                          1589  CLDINIT
0000194E                          1590  ; INITIALIZE CLOUD.
0000194E                          1591  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
0000194E                          1592  ; OUTPUT    : NONE
0000194E                          1593  ; MODIFIES  : NONE
0000194E                          1594  ; -----------------------------------------------------------------------------
0000194E                          1595  
0000194E  2F00                    1596              MOVE.L  D0,-(A7)
00001950                          1597  
00001950                          1598              ; INIT POSITION
00001950  30BC 0280               1599              MOVE.W  #SCRWIDTH,(A0)
00001954  4EB8 118E               1600              JSR UTLRAND             ; RANDOM NUMBER BETWEEN 0-255
00001958  3140 0002               1601              MOVE.W  D0,2(A0)
0000195C                          1602              ; INIT CLOUD TYPE
0000195C  C03C 0007               1603              AND.B   #7,D0
00001960  3140 0006               1604              MOVE.W  D0,6(A0)
00001964                          1605              ; INIT SPEED
00001964  82BC FFFFFFFC           1606              OR.L    #CLDSPMSK,D1
0000196A  3141 0004               1607              MOVE.W  D1,4(A0)
0000196E                          1608              
0000196E  201F                    1609              MOVE.L (A7)+,D0
00001970  4E75                    1610              RTS
00001972                          1611  
00001972                          1612  ; -----------------------------------------------------------------------------
00001972                          1613  CLDUPD
00001972                          1614  ; UPDATES CLOUD.
00001972                          1615  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001972                          1616  ; OUTPUT    : NONE
00001972                          1617  ; MODIFIES  : NONE
00001972                          1618  ; -----------------------------------------------------------------------------
00001972                          1619              
00001972  48E7 8040               1620              MOVEM.L D0/A1,-(A7)
00001976                          1621              
00001976                          1622              ; UPDATE POSITION
00001976  3028 0004               1623              MOVE.W  4(A0),D0
0000197A  D050                    1624              ADD.W   (A0),D0
0000197C  3080                    1625              MOVE.W  D0,(A0)
0000197E                          1626              
0000197E                          1627  ; CHECK AND HANDLE COLISION
0000197E                          1628              ; SELECT CLOUD WIDTH
0000197E  3028 0006               1629              MOVE.W  6(A0),D0
00001982  E558                    1630              ROL.W   #2,D0           ; TIMES 4 TIMES SINCE WE ACCESS LONG
00001984  43F9 000019C8           1631              LEA     CLDTBL,A1
0000198A  2271 0000               1632              MOVE.L  (A1,D0.W),A1
0000198E  3011                    1633              MOVE.W  (A1),D0
00001990                          1634              
00001990  D050                    1635              ADD.W   (A0),D0
00001992  6E00 0006               1636              BGT     .NOKILL
00001996  4EB8 10AC               1637              JSR AGLKILL             ; KILL AGENT
0000199A                          1638              
0000199A  4CDF 0201               1639  .NOKILL     MOVEM.L (A7)+,D0/A1       
0000199E  4E75                    1640              RTS
000019A0                          1641  
000019A0                          1642  ; -----------------------------------------------------------------------------
000019A0                          1643  CLDPLOT
000019A0                          1644  ; PLOTS CLOUD.
000019A0                          1645  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
000019A0                          1646  ; OUTPUT    : NONE
000019A0                          1647  ; MODIFIES  : NONE
000019A0                          1648  ; -----------------------------------------------------------------------------
000019A0                          1649              
000019A0  48E7 B140               1650              MOVEM.L D0/D2-D3/D7/A1,-(A7)
000019A4                          1651              
000019A4                          1652              ; SELECT THE CLOUD TYPE
000019A4  3028 0006               1653              MOVE.W  6(A0),D0
000019A8  E558                    1654              ROL.W   #2,D0           ; TIMES 4 TIMES SINCE WE ACCESS LONG
000019AA  43F9 000019C8           1655              LEA     CLDTBL,A1
000019B0  2271 0000               1656              MOVE.L  (A1,D0.W),A1
000019B4                          1657              
000019B4                          1658              ; PLOT IMAGE
000019B4  3E19                    1659              MOVE.W  (A1)+,D7        ; ASSUME CLOUDX IS RIGHT NEXT TO CLOUDXW
000019B6  3428 0002               1660              MOVE.W  2(A0),D2
000019BA  3610                    1661              MOVE.W  (A0),D3
000019BC  4EB9 000019E8           1662              JSR     IMGPLOT
000019C2                          1663              
000019C2  4CDF 028D               1664              MOVEM.L (A7)+,D0/D2-D3/D7/A1
000019C6  4E75                    1665              RTS
000019C8                          1666                
000019C8= 00001A36                1667  CLDTBL      DC.L    CLOUD0W
000019CC= 00001AF4                1668              DC.L    CLOUD1W
000019D0= 00001B92                1669              DC.L    CLOUD2W
000019D4= 00001D50                1670              DC.L    CLOUD3W
000019D8= 00001DAE                1671              DC.L    CLOUD4W
000019DC= 00001EDC                1672              DC.L    CLOUD5W
000019E0= 00001FAA                1673              DC.L    CLOUD6W
000019E4= 00002058                1674              DC.L    CLOUD7W
000019E8                          1675  
000019E8                          1676  
000019E8                          1677  
000019E8                          1678  -------------------- end include --------------------
000019E8                          1679              INCLUDE "IMAGE.X68"         ; IMAGE DRAWING ROUTINES
000019E8                          1680  ; =============================================================================
000019E8                          1681  ; IMAGE LIBRARY. IT CONTAINS ROUTINES TO DRAW IMAGES. EVERY IMAGE DATA SHOULD 
000019E8                          1682  ; HAVE N LONG PAIRS, THE FIRST OF THE PAIR MEANS THE COLOR OF A BLOCK IN 
000019E8                          1683  ; FORMAT $00BBGGRR AND THE SECOND IS THE AMMOUNT OF BLOCKS IN A ROW WITH 
000019E8                          1684  ; THE SAME COLOR.
000019E8                          1685  ; EVERY IMAGE DATA IS ENDING WITH THE FLAG $FFFFFFFF
000019E8                          1686  ; =============================================================================
000019E8                          1687  
000019E8                          1688  ; -----------------------------------------------------------------------------
000019E8                          1689  IMGPLOT
000019E8                          1690  ; PLOTS AN IMAGE IN THE GIVEN COORDINATES
000019E8                          1691  ; INPUT:    A1 POINTER TO IMAGE DATA
000019E8                          1692  ;           D2.W Y START
000019E8                          1693  ;           D3.W X START
000019E8                          1694  ;           D7.W IMAGE WIDTH
000019E8                          1695  ; NOTE : WON'T USE IMAGE HEIGHT TO MANAGE IMAGE END, AS WE ASSUME IMAGE DATA
000019E8                          1696  ;        IS ENDING WITH THE FLAG $FFFFFFFF
000019E8                          1697  ; -----------------------------------------------------------------------------
000019E8                          1698  
000019E8  48E7 FF40               1699              MOVEM.L A1/D0-D7,-(A7)
000019EC                          1700              
000019EC  33C3 00001A34           1701              MOVE.W  D3,(.STARTX)  ; STORE STARTING X
000019F2  3A03                    1702              MOVE.W  D3,D5   
000019F4  DA47                    1703              ADD.W   D7,D5       ; X ENDING COORD
000019F6                          1704              
000019F6                          1705              
000019F6                          1706              ; SET PEN AND FILL COLOR
000019F6  2219                    1707              MOVE.L  (A1)+,D1
000019F8  103C 0050               1708  .LOOP1      MOVE.B  #80,D0
000019FC  4E4F                    1709              TRAP    #15
000019FE  5200                    1710              ADDQ.B  #1,D0
00001A00  4E4F                    1711              TRAP    #15
00001A02                          1712              
00001A02                          1713              ; DRAW BLOCK
00001A02  2C19                    1714              MOVE.L  (A1)+,D6
00001A04  5386                    1715              SUBQ.L  #1,D6            
00001A06  3203                    1716  .LOOP2      MOVE.W  D3,D1       ; BLOCK START X
00001A08  5843                    1717              ADDQ.W  #BLOCKSZ,D3 ; BLOCK END X
00001A0A  3802                    1718              MOVE.W  D2,D4       
00001A0C  5844                    1719              ADDQ.W  #BLOCKSZ,D4 ; BLOCK END Y
00001A0E  103C 0057               1720              MOVE.B  #87,D0
00001A12  4E4F                    1721              TRAP    #15
00001A14                          1722              
00001A14  BA43                    1723              CMP.W   D3,D5
00001A16  6C00 000A               1724              BGE     .SAMEROW
00001A1A                          1725              ; MOVE TO NEXT ROW
00001A1A  3639 00001A34           1726              MOVE.W  (.STARTX),D3
00001A20  5842                    1727              ADDQ.W  #BLOCKSZ,D2
00001A22  51CE FFE2               1728  .SAMEROW    DBRA    D6,.LOOP2
00001A26                          1729              
00001A26  2219                    1730              MOVE.L  (A1)+,D1
00001A28  B27C FFFF               1731              CMP.W   #.ENDFLAG,D1
00001A2C  66CA                    1732              BNE     .LOOP1
00001A2E                          1733              
00001A2E                          1734              
00001A2E  4CDF 02FF               1735              MOVEM.L (A7)+,A1/D0-D7
00001A32  4E75                    1736              RTS
00001A34                          1737         
00001A34  =FFFFFFFF               1738  .ENDFLAG    EQU     $FFFFFFFF
00001A34                          1739  
00001A34                          1740  .STARTX     DS.W    1
00001A36                          1741  
00001A36                          1742  
00001A36                          1743  
00001A36                          1744  
00001A36                          1745  
00001A36                          1746  
00001A36                          1747  
00001A36                          1748  -------------------- end include --------------------
00001A36                          1749              
00001A36                          1750  ; --- DATA INCLUDES -----------------------------------------------------------
00001A36                          1751  
00001A36                          1752              INCLUDE "DATA/CLOUDSDATA.X68"    ; CLOUD IMAGES DATA
00001A36                          1753  ; =============================================================================
00001A36                          1754  ; THIS FILE HAS BEEN GENERATED BY CLOUDSCONVERTER.JAVA FROM CLOUD IMAGES.
00001A36                          1755  ; TO IMPROVE PERFORMANCE, EACH BLOCK ACTS LIKE A PIXEL, BUT IT'S ACTUALLY A 
00001A36                          1756  ;4x4 SQUARE. IMAGES ARE ADDAPTED TO IMAGE.X68 DRAWING.
00001A36                          1757  ; =============================================================================
00001A36                          1758  
00001A36                          1759  
00001A36                          1760  ; -----------------------------------------------------------------------------
00001A36                          1761  ; EVERY CLOUD DATA STORES:
00001A36                          1762  ; ONE WORD TO STORE THE CLOUD WIDTH IN BLOCKS.
00001A36                          1763  ; TWO LONGS PAIRS STORING A COLOR AND THE AMMOUNT OF BLOCKS WITH THE SAME COLOR
00001A36                          1764  ; IN A ROW.
00001A36                          1765  ; EVERY IMAGE ENDS WITH A FLAG $FFFFFFFF
00001A36                          1766  ; -----------------------------------------------------------------------------
00001A36                          1767  
00001A36= 0070                    1768  CLOUD0W     DC.W    112
00001A38                          1769  CLOUD0
00001A38= 00FFBF80 0000002C       1770              DC.L    $00FFBF80,44
00001A40= 00FEFDFB 00000009       1771              DC.L    $00FEFDFB,9
00001A48= 00FFBF80 00000012       1772              DC.L    $00FFBF80,18
00001A50= 00FEFDFB 0000000B       1773              DC.L    $00FEFDFB,11
00001A58= 00FFBF80 00000010       1774              DC.L    $00FFBF80,16
00001A60= 00FEFDFB 0000000D       1775              DC.L    $00FEFDFB,13
00001A68= 00FFBF80 00000007       1776              DC.L    $00FFBF80,7
00001A70= 00FEFDFB 00000006       1777              DC.L    $00FEFDFB,6
00001A78= 00FFBF80 00000001       1778              DC.L    $00FFBF80,1
00001A80= 00FEFDFB 0000000E       1779              DC.L    $00FEFDFB,14
00001A88= 00FFBF80 00000006       1780              DC.L    $00FFBF80,6
00001A90= 00FEFDFB 00000017       1781              DC.L    $00FEFDFB,23
00001A98= 00FFBF80 00000005       1782              DC.L    $00FFBF80,5
00001AA0= 00FEFDFB 00000016       1783              DC.L    $00FEFDFB,22
00001AA8= 00FFBF80 00000005       1784              DC.L    $00FFBF80,5
00001AB0= 00FEFDFB 00000017       1785              DC.L    $00FEFDFB,23
00001AB8= 00FFBF80 00000002       1786              DC.L    $00FFBF80,2
00001AC0= 00FEFDFB 0000001A       1787              DC.L    $00FEFDFB,26
00001AC8= 00FFBF80 00000002       1788              DC.L    $00FFBF80,2
00001AD0= 00FEFDFB 0000001A       1789              DC.L    $00FEFDFB,26
00001AD8= 00FFBF80 00000003       1790              DC.L    $00FFBF80,3
00001AE0= 00FEFDFB 00000018       1791              DC.L    $00FEFDFB,24
00001AE8= 00FFBF80 0000001E       1792              DC.L    $00FFBF80,30
00001AF0= FFFFFFFF                1793              DC.L    $FFFFFFFF
00001AF4                          1794  
00001AF4                          1795  
00001AF4= 0060                    1796  CLOUD1W     DC.W    96
00001AF6                          1797  CLOUD1
00001AF6= 00FFBF80 00000020       1798              DC.L    $00FFBF80,32
00001AFE= 00FEFDFB 00000007       1799              DC.L    $00FEFDFB,7
00001B06= 00FFBF80 00000010       1800              DC.L    $00FFBF80,16
00001B0E= 00FEFDFB 00000009       1801              DC.L    $00FEFDFB,9
00001B16= 00FFBF80 0000000E       1802              DC.L    $00FFBF80,14
00001B1E= 00FEFDFB 0000000B       1803              DC.L    $00FEFDFB,11
00001B26= 00FFBF80 0000000C       1804              DC.L    $00FFBF80,12
00001B2E= 00FEFDFB 0000000C       1805              DC.L    $00FEFDFB,12
00001B36= 00FFBF80 00000001       1806              DC.L    $00FFBF80,1
00001B3E= 00FEFDFB 00000001       1807              DC.L    $00FEFDFB,1
00001B46= 00FFBF80 0000000A       1808              DC.L    $00FFBF80,10
00001B4E= 00FEFDFB 0000000F       1809              DC.L    $00FEFDFB,15
00001B56= 00FFBF80 00000006       1810              DC.L    $00FFBF80,6
00001B5E= 00FEFDFB 00000013       1811              DC.L    $00FEFDFB,19
00001B66= 00FFBF80 00000004       1812              DC.L    $00FFBF80,4
00001B6E= 00FEFDFB 00000016       1813              DC.L    $00FEFDFB,22
00001B76= 00FFBF80 00000002       1814              DC.L    $00FFBF80,2
00001B7E= 00FEFDFB 00000016       1815              DC.L    $00FEFDFB,22
00001B86= 00FFBF80 00000019       1816              DC.L    $00FFBF80,25
00001B8E= FFFFFFFF                1817              DC.L    $FFFFFFFF
00001B92                          1818  
00001B92                          1819  
00001B92= 00C6                    1820  CLOUD2W     DC.W    198
00001B94                          1821  CLOUD2
00001B94= 00FFBF80 00000014       1822              DC.L    $00FFBF80,20
00001B9C= 00FEFDFB 00000004       1823              DC.L    $00FEFDFB,4
00001BA4= 00FFBF80 0000002B       1824              DC.L    $00FFBF80,43
00001BAC= 00FEFDFB 00000009       1825              DC.L    $00FEFDFB,9
00001BB4= 00FFBF80 00000028       1826              DC.L    $00FFBF80,40
00001BBC= 00FEFDFB 0000000B       1827              DC.L    $00FEFDFB,11
00001BC4= 00FFBF80 00000026       1828              DC.L    $00FFBF80,38
00001BCC= 00FEFDFB 0000000C       1829              DC.L    $00FEFDFB,12
00001BD4= 00FFBF80 00000026       1830              DC.L    $00FFBF80,38
00001BDC= 00FEFDFB 0000000C       1831              DC.L    $00FEFDFB,12
00001BE4= 00FFBF80 00000026       1832              DC.L    $00FFBF80,38
00001BEC= 00FEFDFB 0000000C       1833              DC.L    $00FEFDFB,12
00001BF4= 00FFBF80 00000021       1834              DC.L    $00FFBF80,33
00001BFC= 00FEFDFB 00000015       1835              DC.L    $00FEFDFB,21
00001C04= 00FFBF80 0000001C       1836              DC.L    $00FFBF80,28
00001C0C= 00FEFDFB 00000017       1837              DC.L    $00FEFDFB,23
00001C14= 00FFBF80 00000001       1838              DC.L    $00FFBF80,1
00001C1C= 00FEFDFB 00000001       1839              DC.L    $00FEFDFB,1
00001C24= 00FFBF80 00000007       1840              DC.L    $00FFBF80,7
00001C2C= 00FEFDFB 00000003       1841              DC.L    $00FEFDFB,3
00001C34= 00FFBF80 0000000F       1842              DC.L    $00FFBF80,15
00001C3C= 00FEFDFB 0000001C       1843              DC.L    $00FEFDFB,28
00001C44= 00FFBF80 00000003       1844              DC.L    $00FFBF80,3
00001C4C= 00FEFDFB 00000004       1845              DC.L    $00FEFDFB,4
00001C54= 00FFBF80 0000000F       1846              DC.L    $00FFBF80,15
00001C5C= 00FEFDFB 0000001C       1847              DC.L    $00FEFDFB,28
00001C64= 00FFBF80 00000002       1848              DC.L    $00FFBF80,2
00001C6C= 00FEFDFB 00000005       1849              DC.L    $00FEFDFB,5
00001C74= 00FFBF80 00000008       1850              DC.L    $00FFBF80,8
00001C7C= 00FEFDFB 00000002       1851              DC.L    $00FEFDFB,2
00001C84= 00FFBF80 00000004       1852              DC.L    $00FFBF80,4
00001C8C= 00FEFDFB 0000001E       1853              DC.L    $00FEFDFB,30
00001C94= 00FFBF80 00000002       1854              DC.L    $00FFBF80,2
00001C9C= 00FEFDFB 00000004       1855              DC.L    $00FEFDFB,4
00001CA4= 00FFBF80 00000003       1856              DC.L    $00FFBF80,3
00001CAC= 00FEFDFB 00000001       1857              DC.L    $00FEFDFB,1
00001CB4= 00FFBF80 00000003       1858              DC.L    $00FFBF80,3
00001CBC= 00FEFDFB 00000004       1859              DC.L    $00FEFDFB,4
00001CC4= 00FFBF80 00000003       1860              DC.L    $00FFBF80,3
00001CCC= 00FEFDFB 0000001E       1861              DC.L    $00FEFDFB,30
00001CD4= 00FFBF80 00000002       1862              DC.L    $00FFBF80,2
00001CDC= 00FEFDFB 00000004       1863              DC.L    $00FEFDFB,4
00001CE4= 00FFBF80 00000002       1864              DC.L    $00FFBF80,2
00001CEC= 00FEFDFB 00000003       1865              DC.L    $00FEFDFB,3
00001CF4= 00FFBF80 00000001       1866              DC.L    $00FFBF80,1
00001CFC= 00FEFDFB 00000005       1867              DC.L    $00FEFDFB,5
00001D04= 00FFBF80 00000004       1868              DC.L    $00FFBF80,4
00001D0C= 00FEFDFB 0000001C       1869              DC.L    $00FEFDFB,28
00001D14= 00FFBF80 00000004       1870              DC.L    $00FFBF80,4
00001D1C= 00FEFDFB 00000002       1871              DC.L    $00FEFDFB,2
00001D24= 00FFBF80 00000008       1872              DC.L    $00FFBF80,8
00001D2C= 00FEFDFB 00000003       1873              DC.L    $00FEFDFB,3
00001D34= 00FFBF80 00000005       1874              DC.L    $00FFBF80,5
00001D3C= 00FEFDFB 0000001B       1875              DC.L    $00FEFDFB,27
00001D44= 00FFBF80 00000040       1876              DC.L    $00FFBF80,64
00001D4C= FFFFFFFF                1877              DC.L    $FFFFFFFF
00001D50                          1878  
00001D50                          1879  
00001D50= 0031                    1880  CLOUD3W     DC.W    49
00001D52                          1881  CLOUD3
00001D52= 00FFBF80 00000012       1882              DC.L    $00FFBF80,18
00001D5A= 00FEFDFB 00000003       1883              DC.L    $00FEFDFB,3
00001D62= 00FFBF80 00000009       1884              DC.L    $00FFBF80,9
00001D6A= 00FEFDFB 00000004       1885              DC.L    $00FEFDFB,4
00001D72= 00FFBF80 00000007       1886              DC.L    $00FFBF80,7
00001D7A= 00FEFDFB 00000009       1887              DC.L    $00FEFDFB,9
00001D82= 00FFBF80 00000003       1888              DC.L    $00FFBF80,3
00001D8A= 00FEFDFB 0000000A       1889              DC.L    $00FEFDFB,10
00001D92= 00FFBF80 00000003       1890              DC.L    $00FFBF80,3
00001D9A= 00FEFDFB 0000000A       1891              DC.L    $00FEFDFB,10
00001DA2= 00FFBF80 0000001C       1892              DC.L    $00FFBF80,28
00001DAA= FFFFFFFF                1893              DC.L    $FFFFFFFF
00001DAE                          1894  
00001DAE                          1895  
00001DAE= 00AF                    1896  CLOUD4W     DC.W    175
00001DB0                          1897  CLOUD4
00001DB0= 00FFBF80 0000003C       1898              DC.L    $00FFBF80,60
00001DB8= 00FEFDFB 00000006       1899              DC.L    $00FEFDFB,6
00001DC0= 00FFBF80 00000024       1900              DC.L    $00FFBF80,36
00001DC8= 00FEFDFB 00000009       1901              DC.L    $00FEFDFB,9
00001DD0= 00FFBF80 00000022       1902              DC.L    $00FFBF80,34
00001DD8= 00FEFDFB 0000000C       1903              DC.L    $00FEFDFB,12
00001DE0= 00FFBF80 0000001F       1904              DC.L    $00FFBF80,31
00001DE8= 00FEFDFB 0000000D       1905              DC.L    $00FEFDFB,13
00001DF0= 00FFBF80 0000001F       1906              DC.L    $00FFBF80,31
00001DF8= 00FEFDFB 0000000E       1907              DC.L    $00FEFDFB,14
00001E00= 00FFBF80 0000001E       1908              DC.L    $00FFBF80,30
00001E08= 00FEFDFB 0000000E       1909              DC.L    $00FEFDFB,14
00001E10= 00FFBF80 00000019       1910              DC.L    $00FFBF80,25
00001E18= 00FEFDFB 00000015       1911              DC.L    $00FEFDFB,21
00001E20= 00FFBF80 00000016       1912              DC.L    $00FFBF80,22
00001E28= 00FEFDFB 00000017       1913              DC.L    $00FEFDFB,23
00001E30= 00FFBF80 0000000A       1914              DC.L    $00FFBF80,10
00001E38= 00FEFDFB 00000002       1915              DC.L    $00FEFDFB,2
00001E40= 00FFBF80 00000008       1916              DC.L    $00FFBF80,8
00001E48= 00FEFDFB 00000019       1917              DC.L    $00FEFDFB,25
00001E50= 00FFBF80 00000008       1918              DC.L    $00FFBF80,8
00001E58= 00FEFDFB 00000005       1919              DC.L    $00FEFDFB,5
00001E60= 00FFBF80 00000006       1920              DC.L    $00FFBF80,6
00001E68= 00FEFDFB 00000019       1921              DC.L    $00FEFDFB,25
00001E70= 00FFBF80 00000008       1922              DC.L    $00FFBF80,8
00001E78= 00FEFDFB 00000005       1923              DC.L    $00FEFDFB,5
00001E80= 00FFBF80 00000003       1924              DC.L    $00FFBF80,3
00001E88= 00FEFDFB 00000020       1925              DC.L    $00FEFDFB,32
00001E90= 00FFBF80 00000004       1926              DC.L    $00FFBF80,4
00001E98= 00FEFDFB 00000005       1927              DC.L    $00FEFDFB,5
00001EA0= 00FFBF80 00000002       1928              DC.L    $00FFBF80,2
00001EA8= 00FEFDFB 00000021       1929              DC.L    $00FEFDFB,33
00001EB0= 00FFBF80 00000004       1930              DC.L    $00FFBF80,4
00001EB8= 00FEFDFB 00000005       1931              DC.L    $00FEFDFB,5
00001EC0= 00FFBF80 00000002       1932              DC.L    $00FFBF80,2
00001EC8= 00FEFDFB 00000022       1933              DC.L    $00FEFDFB,34
00001ED0= 00FFBF80 00000035       1934              DC.L    $00FFBF80,53
00001ED8= FFFFFFFF                1935              DC.L    $FFFFFFFF
00001EDC                          1936  
00001EDC                          1937  
00001EDC= 0089                    1938  CLOUD5W     DC.W    137
00001EDE                          1939  CLOUD5
00001EDE= 00FFBF80 0000002F       1940              DC.L    $00FFBF80,47
00001EE6= 00FEFDFB 00000009       1941              DC.L    $00FEFDFB,9
00001EEE= 00FFBF80 00000019       1942              DC.L    $00FFBF80,25
00001EF6= 00FEFDFB 0000000B       1943              DC.L    $00FEFDFB,11
00001EFE= 00FFBF80 00000018       1944              DC.L    $00FFBF80,24
00001F06= 00FEFDFB 0000000B       1945              DC.L    $00FEFDFB,11
00001F0E= 00FFBF80 00000017       1946              DC.L    $00FFBF80,23
00001F16= 00FEFDFB 0000000C       1947              DC.L    $00FEFDFB,12
00001F1E= 00FFBF80 00000001       1948              DC.L    $00FFBF80,1
00001F26= 00FEFDFB 00000003       1949              DC.L    $00FEFDFB,3
00001F2E= 00FFBF80 00000010       1950              DC.L    $00FFBF80,16
00001F36= 00FEFDFB 00000015       1951              DC.L    $00FEFDFB,21
00001F3E= 00FFBF80 0000000E       1952              DC.L    $00FFBF80,14
00001F46= 00FEFDFB 00000015       1953              DC.L    $00FEFDFB,21
00001F4E= 00FFBF80 0000000D       1954              DC.L    $00FFBF80,13
00001F56= 00FEFDFB 00000016       1955              DC.L    $00FEFDFB,22
00001F5E= 00FFBF80 00000001       1956              DC.L    $00FFBF80,1
00001F66= 00FEFDFB 00000001       1957              DC.L    $00FEFDFB,1
00001F6E= 00FFBF80 0000000B       1958              DC.L    $00FFBF80,11
00001F76= 00FEFDFB 0000001A       1959              DC.L    $00FEFDFB,26
00001F7E= 00FFBF80 00000006       1960              DC.L    $00FFBF80,6
00001F86= 00FEFDFB 0000001D       1961              DC.L    $00FEFDFB,29
00001F8E= 00FFBF80 00000004       1962              DC.L    $00FFBF80,4
00001F96= 00FEFDFB 00000020       1963              DC.L    $00FEFDFB,32
00001F9E= 00FFBF80 00000025       1964              DC.L    $00FFBF80,37
00001FA6= FFFFFFFF                1965              DC.L    $FFFFFFFF
00001FAA                          1966  
00001FAA                          1967  
00001FAA= 005D                    1968  CLOUD6W     DC.W    93
00001FAC                          1969  CLOUD6
00001FAC= 00FFBF80 0000001E       1970              DC.L    $00FFBF80,30
00001FB4= 00FEFDFB 00000005       1971              DC.L    $00FEFDFB,5
00001FBC= 00FFBF80 00000012       1972              DC.L    $00FFBF80,18
00001FC4= 00FEFDFB 00000007       1973              DC.L    $00FEFDFB,7
00001FCC= 00FFBF80 00000003       1974              DC.L    $00FFBF80,3
00001FD4= 00FEFDFB 00000002       1975              DC.L    $00FEFDFB,2
00001FDC= 00FFBF80 0000000C       1976              DC.L    $00FFBF80,12
00001FE4= 00FEFDFB 0000000E       1977              DC.L    $00FEFDFB,14
00001FEC= 00FFBF80 00000009       1978              DC.L    $00FFBF80,9
00001FF4= 00FEFDFB 0000000F       1979              DC.L    $00FEFDFB,15
00001FFC= 00FFBF80 00000009       1980              DC.L    $00FFBF80,9
00002004= 00FEFDFB 0000000F       1981              DC.L    $00FEFDFB,15
0000200C= 00FFBF80 00000008       1982              DC.L    $00FFBF80,8
00002014= 00FEFDFB 00000010       1983              DC.L    $00FEFDFB,16
0000201C= 00FFBF80 00000007       1984              DC.L    $00FFBF80,7
00002024= 00FEFDFB 00000013       1985              DC.L    $00FEFDFB,19
0000202C= 00FFBF80 00000004       1986              DC.L    $00FFBF80,4
00002034= 00FEFDFB 00000015       1987              DC.L    $00FEFDFB,21
0000203C= 00FFBF80 00000003       1988              DC.L    $00FFBF80,3
00002044= 00FEFDFB 00000014       1989              DC.L    $00FEFDFB,20
0000204C= 00FFBF80 0000001B       1990              DC.L    $00FFBF80,27
00002054= FFFFFFFF                1991              DC.L    $FFFFFFFF
00002058                          1992  
00002058                          1993  
00002058= 0077                    1994  CLOUD7W     DC.W    119
0000205A                          1995  CLOUD7
0000205A= 00FFBF80 00000029       1996              DC.L    $00FFBF80,41
00002062= 00FEFDFB 00000006       1997              DC.L    $00FEFDFB,6
0000206A= 00FFBF80 00000016       1998              DC.L    $00FFBF80,22
00002072= 00FEFDFB 00000009       1999              DC.L    $00FEFDFB,9
0000207A= 00FFBF80 00000003       2000              DC.L    $00FFBF80,3
00002082= 00FEFDFB 00000004       2001              DC.L    $00FEFDFB,4
0000208A= 00FFBF80 0000000A       2002              DC.L    $00FFBF80,10
00002092= 00FEFDFB 00000002       2003              DC.L    $00FEFDFB,2
0000209A= 00FFBF80 00000002       2004              DC.L    $00FFBF80,2
000020A2= 00FEFDFB 0000000A       2005              DC.L    $00FEFDFB,10
000020AA= 00FFBF80 00000001       2006              DC.L    $00FFBF80,1
000020B2= 00FEFDFB 00000007       2007              DC.L    $00FEFDFB,7
000020BA= 00FFBF80 00000007       2008              DC.L    $00FFBF80,7
000020C2= 00FEFDFB 00000017       2009              DC.L    $00FEFDFB,23
000020CA= 00FFBF80 00000006       2010              DC.L    $00FFBF80,6
000020D2= 00FEFDFB 00000018       2011              DC.L    $00FEFDFB,24
000020DA= 00FFBF80 00000006       2012              DC.L    $00FFBF80,6
000020E2= 00FEFDFB 00000019       2013              DC.L    $00FEFDFB,25
000020EA= 00FFBF80 00000004       2014              DC.L    $00FFBF80,4
000020F2= 00FEFDFB 0000001A       2015              DC.L    $00FEFDFB,26
000020FA= 00FFBF80 00000003       2016              DC.L    $00FFBF80,3
00002102= 00FEFDFB 0000001C       2017              DC.L    $00FEFDFB,28
0000210A= 00FFBF80 00000002       2018              DC.L    $00FFBF80,2
00002112= 00FEFDFB 0000001C       2019              DC.L    $00FEFDFB,28
0000211A= 00FFBF80 0000000A       2020              DC.L    $00FFBF80,10
00002122= 00FEFDFB 00000004       2021              DC.L    $00FEFDFB,4
0000212A= 00FFBF80 0000002F       2022              DC.L    $00FFBF80,47
00002132= FFFFFFFF                2023              DC.L    $FFFFFFFF
00002136                          2024  
00002136                          2025  
00002136                          2026  -------------------- end include --------------------
00002136                          2027              
00002136                          2028  
00002136                          2029  START
00002136                          2030  
00002136                          2031  ; --- INITIALIZATION ----------------------------------------------------------
00002136                          2032  
00002136  007C 0700               2033              ORI.W   #$0700,SR
0000213A  4EB8 12AC               2034              JSR     SYSINIT
0000213E  4EB8 1146               2035              JSR     UTLINIT
00002142  4EB8 1410               2036              JSR     STAINIT
00002146                          2037              
00002146                          2038  .LOOP
00002146                          2039  
00002146                          2040  ; --- UPDATE ------------------------------------------------------------------
00002146                          2041  
00002146                          2042              ; READ INPUT DEVICES
00002146                          2043  
00002146  4E41                    2044              TRAP    #KBDUPDTN
00002148                          2045  
00002148  4EB8 1420               2046              JSR     STAUPD
0000214C                          2047              
0000214C                          2048  ; --- SYNC --------------------------------------------------------------------
0000214C                          2049  
0000214C  4A39 0000216C           2050  .WINT       TST.B   (SCRINTCT)
00002152  67F8                    2051              BEQ     .WINT
00002154  4239 0000216C           2052              CLR.B   (SCRINTCT)
0000215A                          2053              
0000215A                          2054  ; --- PLOT --------------------------------------------------------------------
0000215A                          2055  
0000215A  4EB8 17C6               2056              JSR     BACKPLOT
0000215E  4EB8 1486               2057              JSR     STAPLOT
00002162                          2058              
00002162  4E40                    2059              TRAP    #SCRUPDTN
00002164                          2060              
00002164  60E0                    2061              BRA     .LOOP
00002166                          2062              
00002166  FFFF FFFF               2063              SIMHALT
0000216A                          2064              
0000216A                          2065  ; --- VARIABLES ---------------------------------------------------------------
0000216A                          2066              
0000216A                          2067              INCLUDE "SYSVARS.X68"       ; SYSTEM VARIABLES
0000216A                          2068  ; =============================================================================
0000216A                          2069  ; SYSTEM VARIABLES
0000216A                          2070  ; =============================================================================
0000216A                          2071  
0000216A                          2072  ; --- KEYBOARD RELATED VARIABLES ----------------------------------------------
0000216A                          2073  
0000216A                          2074  KBDVAL      DS.B    1                       ; KEY STATE
0000216B                          2075  KBDEDGE     DS.B    1                       ; KEY EDGE
0000216C                          2076  
0000216C                          2077  ; --- TIMED INTERRUPT RELATED VARIABLES ---------------------------------------
0000216C                          2078  
0000216C                          2079  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
0000216D                          2080  SCRCYCCT    DS.B    1                       ; SCREEN CYCLE COUNTER
0000216E= 00                      2081  GAMCYCCT    DC.B    0                       ; GAME CYCLE COUNTER
00002170                          2082              DS.W    0
00002170                          2083              
00002170                          2084  ; --- FILE PATHS --------------------------------------------------------------
00002170                          2085  
00002170= 44 41 54 41 2F 53 ...   2086  SCOPATH     DC.B     'DATA/SCORES.dat',0
00002180                          2087              DS.W     0
00002180                          2088  
00002180                          2089  
00002180                          2090  
00002180                          2091  
00002180                          2092  -------------------- end include --------------------
00002180                          2093              INCLUDE "VARS.X68"          ; GAME VARIABLES
00002180                          2094  ; =============================================================================
00002180                          2095  ; GAME VARIABLES
00002180                          2096  ; =============================================================================
00002180                          2097  
00002180                          2098  ; --- BIRD RELATED VARIABLES --------------------------------------------------
00002180                          2099  
00002180= 00F0                    2100  BIRDPOSY    DC.W    SCRHEIGH/2         ; BIRD POSITION Y
00002182= 0000                    2101  BIRDVELY    DC.W    0                   ; BIRD SPEED Y
00002184= BBBB                    2102  BIRDPCOL    DC.W    DKYELLOW            ; BIRD PEN COLOR
00002186= FFFF                    2103  BIRDFCOL    DC.W    LGYELLOW            ; BIRD FILL COLOR
00002188                          2104  
00002188                          2105  ; --- SCOREBOARD RELATED VARIABLES --------------------------------------------
00002188                          2106  
00002188                          2107  SCORE       DS.W    1                   ; ACTUAL GAME SCORE
0000218A                          2108  HIGHSCO     DS.W    1                   ; HIGH SCORE
0000218C                          2109  
0000218C                          2110  ;  --- STATE RELATED VARIABLES ------------------------------------------------
0000218C                          2111  
0000218C                          2112  STACUR      DS.W    1                   ; CURRENT STATE
0000218E                          2113  STANEXT     DS.W    1                   ; NEXT STATE
00002190                          2114  
00002190                          2115  
00002190                          2116  
00002190                          2117  
00002190                          2118  
00002190                          2119  
00002190                          2120  
00002190                          2121  -------------------- end include --------------------
00002190                          2122              INCLUDE "LIB/UTLVARS.X68"   ; UTIL CODE VARIABLES
00002190                          2123  ; =============================================================================
00002190                          2124  ; UTILITY VARIABLES
00002190                          2125  ; =============================================================================
00002190                          2126  
00002190                          2127  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00002192                          2128              DS.W    0
00002192                          2129  -------------------- end include --------------------
00002192                          2130              INCLUDE "LIB/DMMVARS.X68"   ; DYNAMIC MEMORY VARIABLES
00002192                          2131  ; =============================================================================
00002192                          2132  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
00002192                          2133  ; =============================================================================
00002192                          2134  
000021C0                          2135              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
000021C0                          2136  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00002E40                          2137              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00002E40                          2138  -------------------- end include --------------------
00002E40                          2139  
00002E40                          2140              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              10C2
AGLADD:END          10D8
AGLCLEAN            1126
AGLCLEAN:END        1140
AGLCLEAN:LOOP       112A
AGLKILL             10AC
AGLPLOT             1100
AGLPLOT:END         1120
AGLPLOT:LOOP        1108
AGLUPD              10DC
AGLUPD:END          10FA
AGLUPD:LOOP         10E4
BACKPLOT            17C6
BACKUPD             1794
BACKUPD:NONEWCL     17C0
BIRDFCOL            2186
BIRDINIT            15EA
BIRDPCOL            2184
BIRDPLOT            164C
BIRDPOSX            A0
BIRDPOSY            2180
BIRDRAD             F
BIRDUPD             15FA
BIRDUPD:COLBOT      1638
BIRDUPD:CORDUPD     1624
BIRDUPD:DONE        1646
BIRDUPD:NOCOL       1640
BIRDUPD:NOJUMP      161E
BIRDVELY            2182
BLOCKSZ             4
CLDINIT             194E
CLDPLOT             19A0
CLDSPMSK            FFFFFFFC
CLDTBL              19C8
CLDUPD              1972
CLDUPD:NOKILL       199A
CLOUD0              1A38
CLOUD0W             1A36
CLOUD1              1AF6
CLOUD1W             1AF4
CLOUD2              1B94
CLOUD2W             1B92
CLOUD3              1D52
CLOUD3W             1D50
CLOUD4              1DB0
CLOUD4W             1DAE
CLOUD5              1EDE
CLOUD5W             1EDC
CLOUD6              1FAC
CLOUD6W             1FAA
CLOUD7              205A
CLOUD7W             2058
CLOUDAGT            2
DARKGRAY            C0C0C
DIRTCLR             306284
DIRTHEIG            2D
DKYELLOW            BBBB
DMMALLOC            1092
DMMALLOC:END        10AA
DMMBNUM             32
DMMBSIZE            40
DMMDATA             21C0
DMMFCOM             106C
DMMFFND             107A
DMMFIRST            1022
DMMFLOOP            1060
DMMFRCOM            1034
DMMFREE             10AC
DMMFRFND            1042
DMMFRLOP            1028
DMMFRSTO            105A
DMMINIT             1000
DMMINIT:LOOP        100E
DMMNEXT             1044
DMMNEXTO            107C
DMMSYSID            0
FLOHEIGH            3C
FLOPLOT             17FE
GAMCYCCT            216E
GAMEINIT            14FC
GAMEPLOT            1576
GAMEUPD             1508
GAMEUPD:NOPAUSE     1530
GOVINIT             15BE
GOVPLOT             15E4
GOVUPD              15C2
GOVUPD:CONT         15E0
GRASSCLR            35DE3B
HIGHSCO             218A
HSCOLINE            101E
IMGPLOT             19E8
IMGPLOT:ENDFLAG     FFFFFFFF
IMGPLOT:LOOP1       19F8
IMGPLOT:LOOP2       1A06
IMGPLOT:SAMEROW     1A22
IMGPLOT:STARTX      1A34
INSINIT             14F6
INSPLOT             14FA
INSUPD              14F8
ISCINIT             14B8
ISCPLOT             14F0
ISCUPD              14CE
ISCUPD:CONT         14EE
JUMPVELY            FFFFFFF6
KBDEDGE             216B
KBDINIT             13C2
KBDP                50
KBDSPACE            20
KBDUPD              13D0
KBDUPD:LOOP         1406
KBDUPD:PACK         1402
KBDUPDTN            1
KBDVAL              216A
LGBROWN             306284
LGGREEN             35DE3B
LGYELLOW            FFFF
MASKNWCL            7F
MASKNWPP            3F
NEWPIPE             1544
NEWPIPE:GOUPD       1570
NORMGRAY            616161
PAUSINIT            1584
PAUSINIT:CONT       159C
PAUSPLOT            15BC
PAUSUPD             15A0
PAUSUPD:CONT        15B8
PIPEAGTP            1
PIPEFCOL            616161
PIPEGAPS            78
PIPEINIT            168E
PIPEPCOL            C0C0C
PIPEPLOT            1734
PIPEUPD             16A6
PIPEUPD:COL         1706
PIPEUPD:END         172E
PIPEUPD:NOCOL       1720
PIPEUPD:NOKILL      16CE
PIPEVELX            FFFFFFFB
PIPEWIDT            32
PPOPHEIG            F
PPOPOVER            5
SCOFCOL             306284
SCOINC              1884
SCOINIT             184E
SCOLINE             101D
SCOPATH             2170
SCOPLOT             18A2
SCOPLOT:HISCOTXT    18FC
SCOPLOT:SCOTXT      18F4
SCORE               2188
SCOSAVE             1908
SCOSAVE:END         1948
SCRCYCCT            216D
SCRFPS              3C
SCRHEIGH            1E0
SCRINIT             1356
SCRINTCT            216C
SCRINTN             1
SCRPLOT             139A
SCRTIM              13B4
SCRUPDTN            0
SCRWIDTH            280
SKYBLUE             FFBF80
SKYCOLOR            FFBF80
SKYPLOT             17D0
SNDDIE              0
SNDINIT             12EA
SNDINIT:DONE        1308
SNDINIT:LOOP        12F6
SNDINIT:SNDDIE      130E
SNDINIT:SNDJUMP     131A
SNDINIT:SNDLIST     1334
SNDINIT:SNDSCO      1327
SNDJUMP             1
SNDPLAY             1344
SNDPLTN             2
SNDSCO              2
STACUR              218C
STAEMPTY            14B6
STAGAME             2
STAGOVER            4
STAINIT             1410
STAINSTR            1
STAINTRO            0
STANEXT             218E
STANONE             FFFFFFFF
STAPAUSE            3
STAPLOT             1486
STAPLOT:PLTTBL      14A2
START               2136
START:LOOP          2146
START:WINT          214C
STAUPD              1420
STAUPD:DOUPD        1446
STAUPD:INITBL       145E
STAUPD:UPDTBL       1472
SYSINIT             12AC
UTLCHRWD            8
UTLINIT             1146
UTLPRINT            115C
UTLPRINT:ENDLOOP    116E
UTLPRINT:LOOP       1164
UTLRAND             118E
UTLRAND:RANDVEC     11AC
UTLRNDIX            2190
WHITE               FEFDFB
