0000211E Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 19/12/2023 19:26:07

00000000                             1  ; =============================================================================
00000000                             2  ; TITLE       :
00000000                             3  ; DESCRIPTION :
00000000                             4  ; AUTHOR      :
00000000                             5  ; HISTORY     :
00000000                             6  ; =============================================================================
00000000                             7  
00001000                             8              ORG     $1000
00001000                             9              
00001000                            10  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            11  
00001000                            12              INCLUDE "SYSCONST.X68"      ; SYSTEM CONSTANTS
00001000                            13  ; =============================================================================
00001000                            14  ; SYSTEM CONSTANTS
00001000                            15  ; =============================================================================
00001000                            16  
00001000                            17  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            18  
00001000  =0000003C                 19  SCRFPS      EQU     60                  ; SCREEN FRAMES PER SECOND
00001000  =00000280                 20  SCRWIDTH    EQU     640                 ; SCREEN WIDTH
00001000  =000001E0                 21  SCRHEIGH    EQU     480                 ; SCREEN HEIGHT
00001000                            22  
00001000                            23  ; --- KEYCODES ----------------------------------------------------------------
00001000                            24  
00001000  =00000020                 25  KBDSPACE    EQU     ' '
00001000  =00000050                 26  KBDP        EQU     'P'
00001000                            27  
00001000                            28  ; --- SOUND IDENTIFIERS -------------------------------------------------------
00001000                            29  
00001000  =00000000                 30  SNDDIE      EQU     0
00001000  =00000001                 31  SNDJUMP     EQU     1
00001000  =00000002                 32  SNDSCO      EQU     2
00001000                            33  
00001000                            34  ; --- TRAP NUMBERS ------------------------------------------------------------
00001000                            35  
00001000  =00000000                 36  SCRUPDTN    EQU     0                   ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                 37  KBDUPDTN    EQU     1                   ; KEYBOARD UPDATE TRAP NUMBER
00001000  =00000002                 38  SNDPLTN     EQU     2                   ; SOUND PLAY TRAP NUMBER
00001000                            39  
00001000                            40  ; --- INTERRUPTION NUMBERS ----------------------------------------------------
00001000                            41  
00001000  =00000001                 42  SCRINTN     EQU     1                   ; SCREEN INTERRUPT TRAP NUMBER    
00001000                            43  
00001000                            44  
00001000                            45  
00001000                            46  
00001000                            47  
00001000                            48  
00001000                            49  
00001000                            50  
00001000                            51  
00001000                            52  -------------------- end include --------------------
00001000                            53              INCLUDE "CONST.X68"         ; GAME CONSTANTS
00001000                            54  ; =============================================================================
00001000                            55  ; GAME CONSTANTS
00001000                            56  ; =============================================================================
00001000                            57  
00001000                            58  ; --- COLORS CONSTANTS 00BBGGRR -----------------------------------------------
00001000                            59  
00001000  =0000BBBB                 60  DKYELLOW    EQU     $0000BBBB           ; DARK YELLOW COLOR
00001000  =0000FFFF                 61  LGYELLOW    EQU     $0000FFFF           ; LIGHT YELLOW COLOR
00001000  =000000BB                 62  DARKRED     EQU     $000000BB           ; DARK RED COLOR
00001000  =000000FF                 63  LIGHTRED    EQU     $000000FF           ; LIGHT RED COLOR
00001000  =00FFBF80                 64  SKYBLUE     EQU     $00FFBF80           ; SKY BLUE COLOR
00001000  =0035DE3B                 65  LGGREEN     EQU     $0035DE3B           ; LIGHT GREEN COLOR
00001000  =00FEFDFB                 66  WHITE       EQU     $00FEFDFB           ; WHITE COLOR
00001000                            67  
00001000                            68  ; --- BIRD RELATED CONSTANTS --------------------------------------------------
00001000                            69  
00001000  =FFFFFFF6                 70  JUMPVELY    EQU     -10
00001000  =000000A0                 71  BIRDPOSX    EQU     SCRWIDTH/4
00001000  =0000000F                 72  BIRDRAD     EQU     15                  ; BIRD RADIUS
00001000                            73  
00001000                            74  ; --- PIPE RELATED CONSTANTS --------------------------------------------------
00001000                            75  
00001000  =00151A30                 76  PIPEPCOL    EQU     $00151A30           ; PIPE PEN COLOR
00001000  =0020284D                 77  PIPEFCOL    EQU     $0020284D           ; PIPE FILL COLOR
00001000  =FFFFFFFB                 78  PIPEVELX    EQU     -5                  ; PIPE X SPEED
00001000  =00000032                 79  PIPEWIDT    EQU     50                  ; PIPE WIDTH
00001000  =00000078                 80  PIPEGAPS    EQU     120                 ; PIPE GAP SIZE
00001000  =00000001                 81  PIPEAGTP    EQU     1                   ; PIPE AGENT TYPE CODE
00001000  =0000003F                 82  MASKNWPP    EQU     %00111111           ; NEW PIPE MASK 
00001000  =00000005                 83  PPOPOVER    EQU     5                   ; PIPE OPENING OVERFLOW
00001000  =0000000F                 84  PPOPHEIG    EQU     15                  ; PIPE OPENING HEIGHT
00001000                            85  
00001000                            86  ; --- BACKGROUND RELATED CONSTANTS --------------------------------------------
00001000                            87  
00001000  =00FFBF80                 88  SKYCOLOR    EQU     SKYBLUE            ; SKY BACKGROUND COLOR
00001000  =0035DE3B                 89  FLOCOLOR    EQU     LGGREEN            ; FLOOR BACKGROUND COLOR
00001000  =0000003C                 90  FLOHEIGH    EQU     60                  ; FLOOR HEIGHT
00001000                            91  
00001000                            92  ; --- CLOUD (BACKGROUND) RELATED CONSTANTS ------------------------------------
00001000                            93  
00001000  =FFFFFFFC                 94  CLDSPMSK    EQU     $FFFFFFFC
00001000  =0000007F                 95  MASKNWCL    EQU     %01111111
00001000  =00000002                 96  CLOUDAGT    EQU     2
00001000                            97  
00001000                            98  ; --- SCOREBOARD RELATED CONSTANTS --------------------------------------------
00001000                            99  
00001000  =0035DE3B                100  SCOFCOL     EQU     FLOCOLOR           ; TEXT BACKGROUND COLOR
00001000  =0000101D                101  SCOLINE     EQU     $101D              ; SCORE TEXT COORDINATE 
00001000  =0000101E                102  HSCOLINE    EQU     $101E              ; HIGHSCORE TEXT COORDINATE
00001000                           103  
00001000                           104  ; --- STATE RELATED CONSTANTS -------------------------------------------------
00001000                           105  
00001000  =FFFFFFFF                106  STANONE     EQU     -1                 ; NON-EXISTENT STATE NUMBER
00001000  =00000000                107  STAINTRO    EQU     0                  ; INTRO SCREEN STATE NUMBER
00001000  =00000001                108  STAINSTR    EQU     1                  ; INSTRUCTION STATE NUMBER
00001000  =00000002                109  STAGAME     EQU     2                  ; GAME SCREEN STATE NUMBER
00001000  =00000003                110  STAPAUSE    EQU     3                  ; PAUSE SCREEN STATE NUMBER
00001000  =00000004                111  STAGOVER    EQU     4                  ; GAME OVER SCREEN STATE NUMBER
00001000                           112  
00001000                           113  ; --- IMAGE DRAWING CONSTANTS -------------------------------------------------
00001000                           114  
00001000  =00000004                115  BLOCKSZ     EQU     4
00001000                           116  
00001000                           117  
00001000                           118  
00001000                           119  
00001000                           120  
00001000                           121  
00001000                           122  
00001000                           123  
00001000                           124  
00001000                           125  
00001000                           126  
00001000                           127  
00001000                           128  
00001000                           129  
00001000                           130  
00001000                           131  
00001000                           132  
00001000                           133  -------------------- end include --------------------
00001000                           134              INCLUDE "LIB/DMMCONST.X68"  ; DYNAMIC MEMORY CONSTANTS
00001000                           135  ; =============================================================================
00001000                           136  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
00001000                           137  ; =============================================================================
00001000                           138  
00001000  =00000040                139  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                140  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                141  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                142  -------------------- end include --------------------
00001000                           143              INCLUDE "LIB/UTLCONST.X68"  ; UTIL CONSTANTS 
00001000                           144  ; ==============================================================================
00001000                           145  ; UTIL CONSTANTS
00001000                           146  ; ==============================================================================
00001000                           147  
00001000  =00000008                148  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
00001000  =00000008                149  -------------------- end include --------------------
00001000                           150              INCLUDE "LIB/DMMCODE.X68"   ; DYNAMIC MEMORY CODE
00001000                           151  ; =============================================================================
00001000                           152  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001000                           153  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001000                           154  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001000                           155  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001000                           156  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001000                           157  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001000                           158  ; =============================================================================
00001000                           159  
00001000                           160  ; -----------------------------------------------------------------------------
00001000                           161  DMMINIT
00001000                           162  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001000                           163  ; INPUT    - NONE
00001000                           164  ; OUTPUT   - NONE
00001000                           165  ; MODIFIES - NONE
00001000                           166  ; -----------------------------------------------------------------------------
00001000  48E7 8080                167              MOVEM.L D0/A0,-(A7)
00001004  41F9 00002180            168              LEA     DMMDATA,A0
0000100A  303C 0031                169              MOVE.W  #DMMBNUM-1,D0
0000100E  30BC 0000                170  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001012  D1FC 00000040            171              ADD.L   #DMMBSIZE,A0
00001018  51C8 FFF4                172              DBRA.W  D0,.LOOP
0000101C  4CDF 0101                173              MOVEM.L (A7)+,D0/A0
00001020  4E75                     174              RTS
00001022                           175  
00001022                           176  ; -----------------------------------------------------------------------------
00001022                           177  DMMFIRST
00001022                           178  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001022                           179  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001022                           180  ; INPUT    - NONE
00001022                           181  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001022                           182  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001022                           183  ; -----------------------------------------------------------------------------
00001022  41F9 00002180            184              LEA     DMMDATA,A0
00001028  4A58                     185  DMMFRLOP    TST.W   (A0)+
0000102A  6600 0016                186              BNE     DMMFRFND
0000102E  D1FC 0000003E            187              ADD.L   #DMMBSIZE-2,A0
00001034  B1FC 00002DFF            188  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000103A  6DEC                     189              BLT     DMMFRLOP
0000103C  207C 00000000            190              MOVE.L  #0,A0
00001042  4E75                     191  DMMFRFND    RTS
00001044                           192  
00001044                           193  ; -----------------------------------------------------------------------------
00001044                           194  DMMNEXT
00001044                           195  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001044                           196  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001044                           197  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001044                           198  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001044                           199  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001044                           200  ; -----------------------------------------------------------------------------
00001044  2F00                     201              MOVE.L  D0,-(A7)
00001046  2008                     202              MOVE.L  A0,D0
00001048  C0BC FFFFFFC0            203              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000104E  0680 00000040            204              ADD.L   #DMMBSIZE,D0
00001054  2040                     205              MOVE.L  D0,A0
00001056  201F                     206              MOVE.L  (A7)+,D0
00001058  60DA                     207              BRA     DMMFRCOM
0000105A                           208  
0000105A                           209  ; -----------------------------------------------------------------------------
0000105A                           210  DMMFRSTO
0000105A                           211  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000105A                           212  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000105A                           213  ; INPUT    - D0.W : ID TO SEARCH
0000105A                           214  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000105A                           215  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000105A                           216  ; -----------------------------------------------------------------------------
0000105A  41F9 00002180            217              LEA     DMMDATA,A0
00001060  B058                     218  DMMFLOOP    CMP.W   (A0)+,D0
00001062  6700 0016                219              BEQ     DMMFFND
00001066  D1FC 0000003E            220              ADD.L   #DMMBSIZE-2,A0
0000106C  B1FC 00002DFF            221  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001072  6DEC                     222              BLT     DMMFLOOP
00001074  207C 00000000            223              MOVE.L  #0,A0
0000107A  4E75                     224  DMMFFND     RTS
0000107C                           225  
0000107C                           226  ; -----------------------------------------------------------------------------
0000107C                           227  DMMNEXTO
0000107C                           228  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000107C                           229  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000107C                           230  ; INPUT    - D0.W : ID TO SEARCH
0000107C                           231  ;            A0   : POINTER WITHIN THE CURRENT SLOT
0000107C                           232  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000107C                           233  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000107C                           234  ; -----------------------------------------------------------------------------
0000107C  2F00                     235              MOVE.L  D0,-(A7)
0000107E  2008                     236              MOVE.L  A0,D0
00001080  C0BC FFFFFFC0            237              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001086  0680 00000040            238              ADD.L   #DMMBSIZE,D0
0000108C  2040                     239              MOVE.L  D0,A0
0000108E  201F                     240              MOVE.L  (A7)+,D0
00001090  60DA                     241              BRA     DMMFCOM
00001092                           242  
00001092                           243  ; -----------------------------------------------------------------------------
00001092                           244  DMMALLOC
00001092                           245  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001092                           246  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001092                           247  ; INPUT    - D0.W : ID TO ASSIGN
00001092                           248  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001092                           249  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001092                           250  ; -----------------------------------------------------------------------------
00001092  3F00                     251              MOVE.W  D0,-(A7)
00001094  4240                     252              CLR.W   D0
00001096  4EB8 105A                253              JSR     DMMFRSTO
0000109A  301F                     254              MOVE.W  (A7)+,D0
0000109C  B1FC 00000000            255              CMP.L   #0,A0
000010A2  6700 0006                256              BEQ     .END
000010A6  3140 FFFE                257              MOVE.W  D0,-2(A0)
000010AA  4E75                     258  .END        RTS
000010AC                           259  
000010AC                           260  ; -----------------------------------------------------------------------------
000010AC                           261  DMMFREE
000010AC                           262  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000010AC                           263  ; SYSTEM (0)
000010AC                           264  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000010AC                           265  ; OUTPUT   - NONE
000010AC                           266  ; MODIFIES - NONE
000010AC                           267  ; -----------------------------------------------------------------------------
000010AC  48E7 8080                268              MOVEM.L D0/A0,-(A7)
000010B0  2008                     269              MOVE.L  A0,D0
000010B2  C0BC FFFFFFC0            270              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000010B8  2040                     271              MOVE.L  D0,A0
000010BA  4250                     272              CLR.W   (A0)
000010BC  4CDF 0101                273              MOVEM.L (A7)+,D0/A0
000010C0  4E75                     274              RTS
000010C2                           275  
000010C2                           276  -------------------- end include --------------------
000010C2                           277              INCLUDE "LIB/AGLCODE.X68"   ; AGENTS CODE "OBJECTS"
000010C2                           278  ; =============================================================================
000010C2                           279  ; AGENT MANAGEMENT
000010C2                           280  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
000010C2                           281  ; +0 - LONG : UPDATE SUBROUTINE POINTER
000010C2                           282  ; +4 - LONG : PLOT SUBROUTINE POINTER
000010C2                           283  ; +8:END    : DATA (AGENT SPECIFIC)
000010C2                           284  ; =============================================================================
000010C2                           285  
000010C2                           286  ; -----------------------------------------------------------------------------
000010C2                           287  AGLADD
000010C2                           288  ; CREATES A NEW AGENT
000010C2                           289  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
000010C2                           290  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
000010C2                           291  ;            A3 - POINTER TO AGENT PLOT FUNCTION
000010C2                           292  ;            D0 - AGENT TYPE (USED AS OWNER BY DMM)
000010C2                           293  ;            D1 - AGENT INITIALIZATION PARAMETER 1
000010C2                           294  ;            D2 - AGENT INITIALIZATION PARAMETER 2
000010C2                           295  ;            D3 - AGENT INITIALIZATION PARAMETER 3
000010C2                           296  ; OUTPUT   - NONE
000010C2                           297  ; MODIFIES - NONE
000010C2                           298  ; -----------------------------------------------------------------------------
000010C2  2F08                     299              MOVE.L  A0,-(A7)
000010C4  4EB8 1092                300              JSR     DMMALLOC
000010C8  B1FC 00000000            301              CMP.L   #0,A0
000010CE  6700 0008                302              BEQ     .END
000010D2  20CA                     303              MOVE.L  A2,(A0)+
000010D4  20CB                     304              MOVE.L  A3,(A0)+
000010D6  4E91                     305              JSR     (A1)
000010D8  205F                     306  .END        MOVE.L  (A7)+,A0
000010DA  4E75                     307              RTS
000010DC                           308  
000010DC                           309  ; -----------------------------------------------------------------------------
000010DC                           310  AGLUPD
000010DC                           311  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
000010DC                           312  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
000010DC                           313  ; INPUT    - NONE
000010DC                           314  ; OUTPUT   - NONE
000010DC                           315  ; MODIFIES - NONE
000010DC                           316  ; -----------------------------------------------------------------------------
000010DC  48E7 00C0                317              MOVEM.L A0-A1,-(A7)
000010E0  4EB8 1022                318              JSR     DMMFIRST
000010E4  B1FC 00000000            319  .LOOP       CMP.L   #0,A0
000010EA  6700 000E                320              BEQ     .END
000010EE  2250                     321              MOVE.L  (A0),A1
000010F0  5088                     322              ADD.L   #8,A0
000010F2  4E91                     323              JSR     (A1)
000010F4  4EB8 1044                324              JSR     DMMNEXT
000010F8  60EA                     325              BRA     .LOOP
000010FA  4CDF 0300                326  .END        MOVEM.L (A7)+,A0-A1
000010FE  4E75                     327              RTS
00001100                           328  
00001100                           329  ; -----------------------------------------------------------------------------
00001100                           330  AGLPLOT
00001100                           331  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001100                           332  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001100                           333  ; INPUT    - NONE
00001100                           334  ; OUTPUT   - NONE
00001100                           335  ; MODIFIES - NONE
00001100                           336  ; -----------------------------------------------------------------------------
00001100  48E7 00C0                337              MOVEM.L A0-A1,-(A7)
00001104  4EB8 1022                338              JSR     DMMFIRST
00001108  B1FC 00000000            339  .LOOP       CMP.L   #0,A0
0000110E  6700 0010                340              BEQ     .END
00001112  2268 0004                341              MOVE.L  4(A0),A1
00001116  5088                     342              ADD.L   #8,A0
00001118  4E91                     343              JSR     (A1)
0000111A  4EB8 1044                344              JSR     DMMNEXT
0000111E  60E8                     345              BRA     .LOOP
00001120  4CDF 0300                346  .END        MOVEM.L (A7)+,A0-A1
00001124  4E75                     347              RTS
00001126                           348  
00001126                           349  ; -----------------------------------------------------------------------------
00001126                           350  AGLCLEAN
00001126                           351  ; KILLS EVERY AGENT ON AGENLIST OF THE SPECIFIED TYPE
00001126                           352  ; INPUT     - D0.W - AGENT TYPE (USED AS OWNER BY DMM)
00001126                           353  ; OUTPUT    - KILLS EVERY AGENT ON AGENTLIST
00001126                           354  ; MODIFIES  - NONE
00001126                           355  ; -----------------------------------------------------------------------------
00001126  48E7 00C0                356              MOVEM.L A0-A1,-(A7)
0000112A                           357              
0000112A  4EB8 105A                358  .LOOP       JSR     DMMFRSTO
0000112E  B1FC 00000000            359              CMP.L   #0,A0
00001134  6700 000A                360              BEQ     .END
00001138  4EB9 000010AC            361              JSR     AGLKILL
0000113E  60EA                     362              BRA     .LOOP
00001140                           363              
00001140  4CDF 0300                364  .END        MOVEM.L (A7)+,A0-A1
00001144  4E75                     365              RTS
00001146                           366  
00001146                           367              
00001146                           368  
00001146                           369  
00001146                           370  ; -----------------------------------------------------------------------------
00001146  =000010AC                371  AGLKILL     EQU     DMMFREE
00001146                           372  ; KILLS THE AGENT BY RELEASING ITS MEMORY
00001146                           373  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
00001146                           374  ; OUTPUT   - NONE
00001146                           375  ; MODIFIES - NONE
00001146                           376  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
00001146                           377  ; -----------------------------------------------------------------------------
00001146                           378  
00001146                           379  
00001146                           380  
00001146                           381  -------------------- end include --------------------
00001146                           382              INCLUDE "LIB/UTLCODE.X68"   ; UTIL SUBRUTINES
00001146                           383  ; =============================================================================
00001146                           384  ; UTILITY CODE
00001146                           385  ; =============================================================================
00001146                           386  
00001146                           387  ; -----------------------------------------------------------------------------
00001146                           388  UTLINIT
00001146                           389  ; INITIALIZES UTILITY CODE
00001146                           390  ; INPUT    - NONE
00001146                           391  ; OUTPUT   - NONE
00001146                           392  ; MODIFIES - NONE
00001146                           393  ; -----------------------------------------------------------------------------
00001146  48E7 C000                394              MOVEM.L D0-D1,-(A7)
0000114A  103C 0008                395              MOVE.B  #8,D0
0000114E  4E4F                     396              TRAP    #15
00001150  13C1 00002178            397              MOVE.B  D1,(UTLRNDIX)
00001156  4CDF 0003                398              MOVEM.L (A7)+,D0-D1
0000115A  4E75                     399              RTS
0000115C                           400              
0000115C                           401  ; -----------------------------------------------------------------------------
0000115C                           402  UTLPRINT
0000115C                           403  ; PRINT SCREEN CENTERED TEXT
0000115C                           404  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000115C                           405  ;            D0.B SCREEN ROW TO PRINT TEXT
0000115C                           406  ; OUTPUT   : D0.B NEXT ROW
0000115C                           407  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000115C                           408  ; -----------------------------------------------------------------------------
0000115C  48E7 C0C0                409              MOVEM.L D0-D1/A0-A1,-(A7)
00001160  4201                     410              CLR.B   D1
00001162  2248                     411              MOVE.L  A0,A1
00001164  4A18                     412  .LOOP       TST.B   (A0)+
00001166  6700 0006                413              BEQ     .ENDLOOP
0000116A  5201                     414              ADDQ.B  #1,D1
0000116C  60F6                     415              BRA     .LOOP
0000116E  E209                     416  .ENDLOOP    LSR.B   #1,D1
00001170  0401 0028                417              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
00001174  4401                     418              NEG.B   D1
00001176  E141                     419              ASL.W   #8,D1
00001178  8240                     420              OR.W    D0,D1
0000117A  103C 000B                421              MOVE.B  #11,D0
0000117E  4E4F                     422              TRAP    #15
00001180  103C 000D                423              MOVE.B  #13,D0
00001184  4E4F                     424              TRAP    #15
00001186  4CDF 0303                425              MOVEM.L (A7)+,D0-D1/A0-A1
0000118A  5200                     426              ADDQ.B  #1,D0
0000118C  4E75                     427              RTS
0000118E                           428  
0000118E                           429  ; -----------------------------------------------------------------------------
0000118E                           430  UTLRAND
0000118E                           431  ; PROVIDES A PSEUDO-RANDOM BYTE
0000118E                           432  ; INPUT    - NONE
0000118E                           433  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
0000118E                           434  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000118E                           435  ; -----------------------------------------------------------------------------
0000118E  2F08                     436              MOVE.L  A0,-(A7)
00001190  41F9 000011AC            437              LEA     .RANDVEC,A0
00001196  4280                     438              CLR.L   D0
00001198  1039 00002178            439              MOVE.B  (UTLRNDIX),D0
0000119E  1030 0800                440              MOVE.B  (A0,D0.L),D0
000011A2  5239 00002178            441              ADDQ.B  #1,(UTLRNDIX)
000011A8  205F                     442              MOVE.L  (A7)+,A0
000011AA  4E75                     443              RTS
000011AC                           444  
000011AC                           445  
000011AC= A2 EE 9A 0C F5 24 ...    446  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
000011B4= 2A A3 51 26 E0 AC ...    447              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
000011BC= 75 51 CA FD 33 EB ...    448              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
000011C4= 60 CC E7 B8 9A EB ...    449              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
000011CC= 1D 76 B5 95 B0 89 ...    450              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
000011D4= 39 15 48 C9 6E CA ...    451              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
000011DC= 43 E7 E2 7C 37 25 ...    452              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000011E4= E9 94 CE E9 E4 52 ...    453              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000011EC= 37 6D 9A 84 A2 28 ...    454              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000011F4= 19 E2 C6 77 80 D4 ...    455              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000011FC= 0A 5A 32 67 33 C2 ...    456              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
00001204= 59 80 DC 0E 57 FC ...    457              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
0000120C= 8A AB BC F7 07 4D ...    458              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
00001214= EF D5 77 6E 1E BB ...    459              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
0000121C= D6 E0 2A 8F BD 28 ...    460              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001224= 13 4F 66 EC 0A 64 ...    461              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
0000122C= 56 52 9A 16 9B 90 ...    462              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001234= 06 8A A4 F7 01 DA ...    463              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
0000123C= F2 E7 77 28 B1 76 ...    464              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001244= A4 42 E3 81 B1 67 ...    465              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000124C= BF CE FA 16 BF 38 ...    466              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001254= D1 8B 50 0C 5F 49 ...    467              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000125C= DE 4C 14 A2 40 DC ...    468              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001264= B6 9B 0A 38 5D AB ...    469              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
0000126C= E2 1B DD 75 15 82 ...    470              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001274= 8A 26 51 30 9F 47 ...    471              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
0000127C= 1E 8A BB 71 C6 6E ...    472              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001284= 9F 47 E5 34 94 27 ...    473              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
0000128C= 7D 06 D6 BA 30 0F ...    474              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001294= EC 7F 7E 03 CF 2D ...    475              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
0000129C= 94 5B 23 F2 8B CD ...    476              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
000012A4= 74 33 EC B9 0F D5 ...    477              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
000012AC                           478  
000012AC                           479  -------------------- end include --------------------
000012AC                           480              INCLUDE "SYSTEM.X68"        ; SYSTEM CODE
000012AC                           481  ; =============================================================================
000012AC                           482  ; SYSTEM
000012AC                           483  ; =============================================================================
000012AC                           484  
000012AC                           485  ; -----------------------------------------------------------------------------
000012AC                           486  SYSINIT
000012AC                           487  ; INITIALIZE SYSTEM
000012AC                           488  ; INPUT     : NONE
000012AC                           489  ; OUTPUT    : NONE
000012AC                           490  ; MODIFIES  : NONE
000012AC                           491  ; -----------------------------------------------------------------------------
000012AC                           492              ; INSTALL TRAPS AND INTERRUPTIONS
000012AC  21FC 0000139A 0080       493              MOVE.L  #SCRPLOT,($80+SCRUPDTN*4)
000012B4  21FC 000013D0 0084       494              MOVE.L  #KBDUPD,($80+KBDUPDTN*4)
000012BC  21FC 00001344 0088       495              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
000012C4  21FC 000013B4 0064       496              MOVE.L  #SCRTIM,($60+SCRINTN*4)
000012CC                           497              
000012CC  4EB9 000013C2            498              JSR     KBDINIT
000012D2  4EB9 000012EA            499              JSR     SNDINIT
000012D8  4EB9 00001356            500              JSR     SCRINIT
000012DE  4EB8 1000                501              JSR     DMMINIT
000012E2                           502              
000012E2                           503              ; SET USER MODE AND ALLOW INTERRUPTIONS
000012E2  40E7                     504              MOVE.W  SR,-(A7)
000012E4  0257 D8FF                505              ANDI.W  #$D8FF,(A7)
000012E8  4E73                     506              RTE
000012EA                           507              
000012EA                           508  ; -----------------------------------------------------------------------------
000012EA                           509  SNDINIT
000012EA                           510  ; INITIALIZES SOUND SYSTEM
000012EA                           511  ; INPUT     : NONE
000012EA                           512  ; OUTPUT    : NONE
000012EA                           513  ; MODIFIES  : NONE
000012EA                           514  ; -----------------------------------------------------------------------------
000012EA  48E7 C0C0                515              MOVEM.L D0-D1/A0-A1,-(A7)
000012EE                           516              
000012EE  4201                     517              CLR.B   D1
000012F0  41F9 00001334            518              LEA     .SNDLIST,A0
000012F6  2018                     519  .LOOP       MOVE.L  (A0)+,D0
000012F8  6700 000E                520              BEQ     .DONE
000012FC  2240                     521              MOVE.L  D0,A1
000012FE  103C 0047                522              MOVE.B  #71,D0
00001302  4E4F                     523              TRAP    #15
00001304  5201                     524              ADDQ.B  #1,D1
00001306  60EE                     525              BRA     .LOOP
00001308                           526              
00001308  4CDF 0303                527  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
0000130C  4E75                     528              RTS
0000130E                           529              
0000130E= 53 4E 44 2F 44 49 ...    530  .SNDDIE     DC.B    'SND/DIE.wav',0
0000131A= 53 4E 44 2F 4A 55 ...    531  .SNDJUMP    DC.B    'SND/JUMP.wav',0
00001327= 53 4E 44 2F 53 43 ...    532  .SNDSCO     DC.B    'SND/SCO.wav',0
00001334                           533              DS.W    0                       ; WORD ALIGN
00001334= 0000130E 0000131A ...    534  .SNDLIST    DC.L    .SNDDIE,.SNDJUMP,.SNDSCO,0
00001344                           535              
00001344                           536  ; ------------------------------------------------------------------------------
00001344                           537  SNDPLAY
00001344                           538  ; PLAY SOUND
00001344                           539  ; INPUT    : D7 SOUND ID
00001344                           540  ; OUTPUT   : NONE
00001344                           541  ; MODIFIES : NONE
00001344                           542  ; ------------------------------------------------------------------------------
00001344  48A7 C000                543              MOVEM.W D0-D1,-(A7)
00001348                           544              
00001348  103C 0048                545              MOVE.B  #72,D0
0000134C  1207                     546              MOVE.B  D7,D1
0000134E  4E4F                     547              TRAP    #15
00001350                           548              
00001350  4C9F 0003                549              MOVEM.W (A7)+,D0-D1
00001354  4E73                     550              RTE
00001356                           551  
00001356                           552  ; -----------------------------------------------------------------------------
00001356                           553  SCRINIT
00001356                           554  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
00001356                           555  ; ENABLE DOUBLE BUFFER, ENABLE TIMED INTERRUPT.
00001356                           556  ; INPUT     : NONE
00001356                           557  ; OUTPUT    : NONE
00001356                           558  ; MODIFIES  : NONE
00001356                           559  ; -----------------------------------------------------------------------------
00001356                           560  
00001356  48E7 C000                561              MOVEM.L D0-D1,-(A7)
0000135A                           562              
0000135A                           563              ; SET SCREEN RESOLUTION
0000135A  103C 0021                564              MOVE.B  #33,D0
0000135E  223C 028001E0            565              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
00001364  4E4F                     566              TRAP    #15
00001366                           567              
00001366                           568              ; SET WINDOWED MODE
00001366  7201                     569              MOVE.L  #1,D1
00001368  4E4F                     570              TRAP    #15
0000136A                           571              
0000136A                           572              ; CLEAR SCREEN
0000136A  103C 000B                573              MOVE.B  #11,D0
0000136E  323C FF00                574              MOVE.W  #$FF00,D1
00001372  4E4F                     575              TRAP    #15
00001374                           576              
00001374                           577              ; ENABLE DOUBLE BUFFER
00001374  103C 005C                578              MOVE.B  #92,D0
00001378  123C 0011                579              MOVE.B  #17,D1
0000137C  4E4F                     580              TRAP    #15
0000137E                           581              
0000137E                           582              ; ENABLE TIMED INTERRUPT
0000137E  103C 0020                583              MOVE.B  #32,D0
00001382  123C 0006                584              MOVE.B  #6,D1
00001386  143C 0081                585              MOVE.B  #$80|SCRINTN,D2
0000138A  7610                     586              MOVE.L  #1000/SCRFPS,D3
0000138C  4E4F                     587              TRAP    #15
0000138E                           588              
0000138E                           589              ; CLEAR INTERRUPT COUNTER
0000138E  4279 00002154            590              CLR.W   (SCRINTCT)
00001394                           591              
00001394  4CDF 0003                592              MOVEM.L (A7)+,D0-D1
00001398  4E75                     593              RTS
0000139A                           594              
0000139A                           595  ; -----------------------------------------------------------------------------
0000139A                           596  SCRPLOT
0000139A                           597  ; UPDATES DOUBLE BUFFER
0000139A                           598  ; INPUT    : NONE
0000139A                           599  ; OUTPUT   : NONE
0000139A                           600  ; MODIFIES : NONE
0000139A                           601  ; -----------------------------------------------------------------------------
0000139A  48A7 C000                602              MOVEM.W D0-D1,-(A7)
0000139E                           603              
0000139E                           604              ; SWITCH BUFFERS
0000139E  103C 005E                605              MOVE.B  #94,D0
000013A2  4E4F                     606              TRAP    #15
000013A4                           607              
000013A4                           608              ; CLEAN HIDDEN BUFFER
000013A4  103C 000B                609              MOVE.B  #11,D0
000013A8  323C FF00                610              MOVE.W  #$FF00,D1
000013AC  4E4F                     611              TRAP    #15
000013AE  4C9F 0003                612              MOVEM.W (A7)+,D0-D1
000013B2  4E73                     613              RTE
000013B4                           614  
000013B4                           615  ; -----------------------------------------------------------------------------
000013B4                           616  SCRTIM
000013B4                           617  ; TIMED INTERRUPT SERVICE ROUTINE, COUNTS TIME FALLING
000013B4                           618  ; INPUT     : NONE
000013B4                           619  ; OUTPUT    : NONE
000013B4                           620  ; MODIFIES  : NONE
000013B4                           621  ; -----------------------------------------------------------------------------
000013B4  5239 00002154            622              ADDQ.B  #1,(SCRINTCT)
000013BA  5239 00002155            623              ADDQ.B  #1,(SCRCYCCT)
000013C0  4E73                     624              RTE
000013C2                           625              
000013C2                           626  ; -----------------------------------------------------------------------------
000013C2                           627  KBDINIT
000013C2                           628  ; INIT KEYBOARD
000013C2                           629  ; INPUT     : NONE
000013C2                           630  ; OUTPUT    : NONE
000013C2                           631  ; MODIFIES  : NONE
000013C2                           632  ; -----------------------------------------------------------------------------
000013C2  4239 00002152            633              CLR.B   (KBDVAL)
000013C8  4239 00002153            634              CLR.B   (KBDEDGE)
000013CE  4E75                     635              RTS
000013D0                           636              
000013D0                           637  ; -----------------------------------------------------------------------------
000013D0                           638  KBDUPD
000013D0                           639  ; UPDATE KEYBOARD INFO
000013D0                           640  ; 0 -> SPACE
000013D0                           641  ; INPUT     : NONE
000013D0                           642  ; OUTPUT    : NONE
000013D0                           643  ; MODIFIES  : NONE
000013D0                           644  ; -----------------------------------------------------------------------------
000013D0  48E7 F000                645              MOVEM.L D0-D3,-(A7)
000013D4                           646              
000013D4                           647              ; READ KEYBOARD
000013D4  103C 0013                648              MOVE.B  #19,D0
000013D8  223C 00005020            649              MOVE.L  #KBDP<<8|KBDSPACE,D1
000013DE  4E4F                     650              TRAP    #15
000013E0                           651              
000013E0                           652              ; CONVERT TO DESIRED FORMAT
000013E0  4EB9 00001402            653              JSR     .PACK
000013E6                           654  
000013E6                           655              ; COMPUTE KBDEDGE
000013E6  1039 00002152            656              MOVE.B  (KBDVAL),D0
000013EC  4600                     657              NOT.B   D0
000013EE  C042                     658              AND.W   D2,D0
000013F0  13C0 00002153            659              MOVE.B  D0,(KBDEDGE)
000013F6                           660              
000013F6                           661              ; STORE KBDVAL
000013F6  13C2 00002152            662              MOVE.B  D2,(KBDVAL)
000013FC                           663              
000013FC  4CDF 000F                664              MOVEM.L (A7)+,D0-D3
00001400  4E73                     665              RTE
00001402                           666  
00001402  363C 0003                667  .PACK       MOVE.W  #3,D3
00001406  E189                     668  .LOOP       LSL.L   #8,D1
00001408  E312                     669              ROXL.B  #1,D2
0000140A  51CB FFFA                670              DBRA.W  D3,.LOOP
0000140E  4E75                     671              RTS
00001410                           672  
00001410                           673      
00001410                           674  
00001410                           675  
00001410                           676  
00001410                           677  
00001410                           678  
00001410                           679  
00001410                           680  
00001410                           681  
00001410                           682  
00001410                           683  -------------------- end include --------------------
00001410                           684              INCLUDE "STATES.X68"        ; STATES MANAGEMENT
00001410                           685  ; =============================================================================
00001410                           686  ; GAME STATE MANAGEMENT
00001410                           687  ; =============================================================================
00001410                           688  
00001410                           689  ; -----------------------------------------------------------------------------
00001410                           690  STAINIT
00001410                           691  ; INITALIZES THE STATE MANAGER
00001410                           692  ; INPUT    - NONE
00001410                           693  ; OUTPUT   - NONE
00001410                           694  ; MODIFIES - NONE
00001410                           695  ; -----------------------------------------------------------------------------
00001410  33FC FFFF 00002174       696              MOVE.W  #STANONE,(STACUR)
00001418  4279 00002176            697              CLR.W   (STANEXT)
0000141E  4E75                     698              RTS
00001420                           699  
00001420                           700  ; -----------------------------------------------------------------------------
00001420                           701  STAUPD
00001420                           702  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001420                           703  ; INPUT    - NONE
00001420                           704  ; OUTPUT   - NONE
00001420                           705  ; MODIFIES - NONE
00001420                           706  ; -----------------------------------------------------------------------------
00001420  48E7 8080                707              MOVEM.L D0/A0,-(A7)
00001424  4280                     708              CLR.L   D0
00001426  3039 00002176            709              MOVE.W  (STANEXT),D0
0000142C  B079 00002174            710              CMP.W   (STACUR),D0
00001432  6700 0012                711              BEQ     .DOUPD
00001436  33C0 00002174            712              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
0000143C  E588                     713              LSL.L   #2,D0
0000143E  2040                     714              MOVE.L  D0,A0
00001440  2068 145E                715              MOVE.L  .INITBL(A0),A0
00001444  4E90                     716              JSR     (A0)
00001446  4280                     717  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001448  3039 00002174            718              MOVE.W  (STACUR),D0
0000144E  E588                     719              LSL.L   #2,D0
00001450  2040                     720              MOVE.L  D0,A0
00001452  2068 1472                721              MOVE.L  .UPDTBL(A0),A0
00001456  4E90                     722              JSR     (A0)
00001458  4CDF 0101                723              MOVEM.L (A7)+,D0/A0
0000145C  4E75                     724              RTS
0000145E= 000014B8 000014F6 ...    725  .INITBL     DC.L    ISCINIT,INSINIT,GAMEINIT,PAUSINIT,GOVINIT
00001472= 000014CE 000014F8 ...    726  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMEUPD,PAUSUPD,GOVUPD
00001486                           727  
00001486                           728  ; -----------------------------------------------------------------------------
00001486                           729  STAPLOT
00001486                           730  ; PERFORMS STATE PLOT
00001486                           731  ; INPUT    - NONE
00001486                           732  ; OUTPUT   - NONE
00001486                           733  ; MODIFIES - NONE
00001486                           734  ; -----------------------------------------------------------------------------
00001486  48E7 8080                735              MOVEM.L D0/A0,-(A7)
0000148A  4280                     736              CLR.L   D0
0000148C  3039 00002174            737              MOVE.W  (STACUR),D0
00001492  E588                     738              LSL.L   #2,D0
00001494  2040                     739              MOVE.L  D0,A0
00001496  2068 14A2                740              MOVE.L  .PLTTBL(A0),A0
0000149A  4E90                     741              JSR     (A0)
0000149C  4CDF 0101                742              MOVEM.L (A7)+,D0/A0
000014A0  4E75                     743              RTS
000014A2= 000014F0 000014FA ...    744  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMEPLOT,PAUSPLOT,GOVPLOT
000014B6                           745  
000014B6                           746  ; -----------------------------------------------------------------------------
000014B6                           747  STAEMPTY
000014B6                           748  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
000014B6                           749  ; INPUT    - NONE
000014B6                           750  ; OUTPUT   - NONE
000014B6                           751  ; MODIFIES - NONE
000014B6                           752  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
000014B6                           753  ; -----------------------------------------------------------------------------
000014B6  4E75                     754              RTS
000014B8                           755  
000014B8                           756  
000014B8                           757  
000014B8                           758  
000014B8                           759  
000014B8                           760  
000014B8                           761  
000014B8                           762  
000014B8                           763  -------------------- end include --------------------
000014B8                           764              INCLUDE "INTRO.X68"         ; INTRO STATE MANAGEMENT
000014B8                           765  ; =============================================================================
000014B8                           766  ; INTRO SCREEN MANAGEMENT
000014B8                           767  ; =============================================================================
000014B8                           768  
000014B8                           769  ; ------------------------------------------------------------------------------
000014B8                           770  ISCINIT
000014B8                           771  ; INTRO SCREEN INIT
000014B8                           772  ; INPUT    : NONE
000014B8                           773  ; OUTPUT   : NONE
000014B8                           774  ; MODIFIES : NONE
000014B8                           775  ; ------------------------------------------------------------------------------
000014B8                           776              ; INIT GAME VARIABLES
000014B8  4EB9 000015EA            777              JSR BIRDINIT
000014BE  4EB9 00001836            778              JSR SCOINIT
000014C4                           779              ; CLEAN PIPES
000014C4  303C 0001                780              MOVE.W  #PIPEAGTP,D0
000014C8  4EB8 1126                781              JSR AGLCLEAN
000014CC  4E75                     782              RTS
000014CE                           783  
000014CE                           784  ; ------------------------------------------------------------------------------
000014CE                           785  ISCUPD
000014CE                           786  ; INTRO SCREEN UPDATE
000014CE                           787  ; INPUT    : NONE
000014CE                           788  ; OUTPUT   : NONE
000014CE                           789  ; MODIFIES : NONE
000014CE                           790  ; ------------------------------------------------------------------------------
000014CE                           791              
000014CE  4EB9 00001792            792              JSR BACKUPD
000014D4  4EB8 10DC                793              JSR AGLUPD
000014D8  1039 00002153            794              MOVE.B  (KBDEDGE),D0
000014DE  C03C 0001                795              AND.B   #1,D0
000014E2  6700 000A                796              BEQ     .CONT
000014E6  33FC 0002 00002176       797              MOVE.W  #STAGAME,(STANEXT)      
000014EE                           798  .CONT
000014EE  4E75                     799              RTS
000014F0                           800  
000014F0                           801  ; ------------------------------------------------------------------------------
000014F0                           802  ISCPLOT
000014F0                           803  ; INTRO SCREEN PLOT
000014F0                           804  ; INPUT    : NONE
000014F0                           805  ; OUTPUT   : NONE
000014F0                           806  ; MODIFIES : NONE
000014F0                           807  ; ------------------------------------------------------------------------------
000014F0  4EB8 1100                808              JSR AGLPLOT
000014F4  4E75                     809              RTS
000014F6                           810  
000014F6                           811  
000014F6                           812  
000014F6                           813  
000014F6                           814  
000014F6                           815  
000014F6                           816  
000014F6                           817  
000014F6                           818  
000014F6                           819  -------------------- end include --------------------
000014F6                           820              INCLUDE "INSTRUCTIONS.X68"  ; INSTRUCTIONS STATE MANAGEMENT
000014F6                           821  ; =============================================================================
000014F6                           822  ; INSTRUCTION SCREEN MANAGEMENT
000014F6                           823  ; =============================================================================
000014F6                           824  
000014F6                           825  ; ------------------------------------------------------------------------------
000014F6                           826  INSINIT
000014F6                           827  ; INSTRUCTIONS SCREEN INIT
000014F6                           828  ; INPUT    : NONE
000014F6                           829  ; OUTPUT   : NONE
000014F6                           830  ; MODIFIES : NONE
000014F6                           831  ; ------------------------------------------------------------------------------
000014F6  4E75                     832              RTS
000014F8                           833  
000014F8                           834  ; ------------------------------------------------------------------------------
000014F8                           835  INSUPD
000014F8                           836  ; INSTRUCTIONS SCREEN UPDATE
000014F8                           837  ; INPUT    : NONE
000014F8                           838  ; OUTPUT   : NONE
000014F8                           839  ; MODIFIES : NONE
000014F8                           840  ; ------------------------------------------------------------------------------
000014F8  4E75                     841              RTS
000014FA                           842  
000014FA                           843  ; ------------------------------------------------------------------------------
000014FA                           844  INSPLOT
000014FA                           845  ; INSTRUCTIONS SCREEN PLOT
000014FA                           846  ; INPUT    : NONE
000014FA                           847  ; OUTPUT   : NONE
000014FA                           848  ; MODIFIES : NONE
000014FA                           849  ; ------------------------------------------------------------------------------
000014FA  4E75                     850              RTS
000014FC                           851  
000014FC                           852  
000014FC                           853  
000014FC                           854  
000014FC                           855  
000014FC                           856  
000014FC                           857  
000014FC                           858  
000014FC                           859  
000014FC                           860  
000014FC                           861  -------------------- end include --------------------
000014FC                           862              INCLUDE "GAME.X68"          ; GAME STATE MANAGEMENT
000014FC                           863  ; =============================================================================
000014FC                           864  ; GAME MANAGEMENT
000014FC                           865  ; =============================================================================
000014FC                           866  
000014FC                           867  ; -----------------------------------------------------------------------------
000014FC                           868  GAMEINIT
000014FC                           869  ; INITIALIZES GAME.
000014FC                           870  ; INPUT    : NONE
000014FC                           871  ; OUTPUT   : NONE
000014FC                           872  ; MODIFIES : NONE
000014FC                           873  ; ------------------------------------------------------------------------------        
000014FC  13F9 00002156 00002155   874              MOVE.B  (GAMCYCCT),(SCRCYCCT)
00001506  4E75                     875              RTS
00001508                           876              
00001508                           877  ; -----------------------------------------------------------------------------
00001508                           878  GAMEUPD
00001508                           879  ; UPDATES GAME.
00001508                           880  ; INPUT     : NONE
00001508                           881  ; OUTPUT    : NONE
00001508                           882  ; MODIFIES  : NONE
00001508                           883  ; -----------------------------------------------------------------------------
00001508                           884  
00001508  4EB9 00001792            885              JSR     BACKUPD
0000150E  1F00                     886              MOVE.B  D0,-(A7)
00001510  1039 00002153            887              MOVE.B  (KBDEDGE),D0
00001516  0800 0001                888              BTST    #1,D0
0000151A  6700 0014                889              BEQ     .NOPAUSE
0000151E  33FC 0003 00002176       890              MOVE.W  #STAPAUSE, (STANEXT)
00001526  13F9 00002155 00002156   891              MOVE.B  (SCRCYCCT),(GAMCYCCT)
00001530                           892              
00001530  4EB9 00001544            893  .NOPAUSE    JSR     NEWPIPE
00001536  4EB8 10DC                894              JSR     AGLUPD
0000153A  4EB9 000015FA            895              JSR     BIRDUPD
00001540                           896              
00001540  101F                     897              MOVE.B  (A7)+,D0
00001542  4E75                     898              RTS
00001544                           899  
00001544                           900  ; -----------------------------------------------------------------------------
00001544                           901  NEWPIPE
00001544                           902  ; CREATES A NEW PIPE IN CASE IT'S NECESSARY.
00001544                           903  ; INPUT     : NONE
00001544                           904  ; OUTPUT    : NONE
00001544                           905  ; MODIFIES  : NONE
00001544                           906  ; -----------------------------------------------------------------------------
00001544                           907  
00001544  48E7 8070                908              MOVEM.L D0/A1-A3,-(A7)
00001548                           909              
00001548  1039 00002155            910              MOVE.B  (SCRCYCCT),D0
0000154E  0200 003F                911              ANDI.B  #MASKNWPP,D0
00001552  6600 001C                912              BNE     .GOUPD
00001556  43F9 0000168E            913              LEA     PIPEINIT,A1
0000155C  45F9 000016A6            914              LEA     PIPEUPD,A2
00001562  47F9 00001734            915              LEA     PIPEPLOT,A3
00001568  303C 0001                916              MOVE    #PIPEAGTP,D0
0000156C  4EB8 10C2                917              JSR     AGLADD
00001570                           918              
00001570  4CDF 0E01                919  .GOUPD      MOVEM.L (A7)+,D0/A1-A3
00001574  4E75                     920              RTS
00001576                           921  
00001576                           922  ; -----------------------------------------------------------------------------
00001576                           923  GAMEPLOT
00001576                           924  ; PLOTS THE GAME.
00001576                           925  ; INPUT     : NONE
00001576                           926  ; OUTPUT    : NONE
00001576                           927  ; MODIFIES  : NONE
00001576                           928  ; -----------------------------------------------------------------------------
00001576                           929              
00001576  4EB9 0000188A            930              JSR     SCOPLOT
0000157C  4EB8 1100                931              JSR     AGLPLOT
00001580  6000 00CA                932              BRA     BIRDPLOT
00001584                           933           
00001584                           934  
00001584                           935  
00001584                           936  
00001584                           937  
00001584                           938  
00001584                           939  
00001584                           940  
00001584                           941  
00001584                           942  
00001584                           943  
00001584                           944  
00001584                           945  
00001584                           946  -------------------- end include --------------------
00001584                           947              INCLUDE "PAUSE.X68"         ; PAUSE STATE MANAGEMENT
00001584                           948  ; =============================================================================
00001584                           949  ; PAUSE SCREEN MANAGEMENT
00001584                           950  ; =============================================================================
00001584                           951  
00001584                           952  ; ------------------------------------------------------------------------------
00001584                           953  PAUSINIT
00001584                           954  ; PAUSE SCREEN INIT
00001584                           955  ; INPUT    : NONE
00001584                           956  ; OUTPUT   : NONE
00001584                           957  ; MODIFIES : NONE
00001584                           958  ; ------------------------------------------------------------------------------
00001584  1F00                     959              MOVE.B  D0,-(A7)
00001586  1039 00002153            960              MOVE.B  (KBDEDGE),D0
0000158C  C03C 0002                961              AND.B   #2,D0
00001590  6700 000A                962              BEQ     .CONT
00001594  33FC 0002 00002176       963              MOVE.W  #STAGAME,(STANEXT)   
0000159C                           964     
0000159C  101F                     965  .CONT       MOVE.B  (A7)+,D0
0000159E  4E75                     966              RTS
000015A0                           967  
000015A0                           968  ; ------------------------------------------------------------------------------
000015A0                           969  PAUSUPD
000015A0                           970  ; PAUSE SCREEN UPDATE
000015A0                           971  ; INPUT    : NONE
000015A0                           972  ; OUTPUT   : NONE
000015A0                           973  ; MODIFIES : NONE
000015A0                           974  ; ------------------------------------------------------------------------------
000015A0                           975          
000015A0  1F00                     976              MOVE.B  D0,-(A7)
000015A2                           977              
000015A2                           978              ; CHECK IF KEY PRESSED TO RESUME GAME
000015A2  1039 00002153            979              MOVE.B  (KBDEDGE),D0
000015A8  0800 0001                980              BTST    #1,D0
000015AC  6700 000A                981              BEQ     .CONT
000015B0  33FC 0002 00002176       982              MOVE.W  #STAGAME, (STANEXT)   
000015B8                           983              
000015B8  101F                     984  .CONT       MOVE.B  (A7)+,D0     
000015BA  4E75                     985              RTS
000015BC                           986  
000015BC                           987  ; ------------------------------------------------------------------------------
000015BC                           988  PAUSPLOT
000015BC                           989  ; PAUSE SCREEN PLOT
000015BC                           990  ; INPUT    : NONE
000015BC                           991  ; OUTPUT   : NONE
000015BC                           992  ; MODIFIES : NONE
000015BC                           993  ; ------------------------------------------------------------------------------
000015BC  60B8                     994              BRA     GAMEPLOT
000015BE                           995  
000015BE                           996  
000015BE                           997  
000015BE                           998  
000015BE                           999  
000015BE                          1000  
000015BE                          1001  
000015BE                          1002  
000015BE                          1003  
000015BE                          1004  
000015BE                          1005  
000015BE                          1006  
000015BE                          1007  -------------------- end include --------------------
000015BE                          1008              INCLUDE "GOVER.X68"         ; GAME OVER STATE MANAGEMENT
000015BE                          1009  ; =============================================================================
000015BE                          1010  ; GAME OVER SCREEN MANAGEMENT
000015BE                          1011  ; =============================================================================
000015BE                          1012  
000015BE                          1013  ; ------------------------------------------------------------------------------
000015BE                          1014  GOVINIT
000015BE                          1015  ; GAME OVER SCREEN INIT
000015BE                          1016  ; INPUT    : NONE
000015BE                          1017  ; OUTPUT   : NONE
000015BE                          1018  ; MODIFIES : NONE
000015BE                          1019  ; ------------------------------------------------------------------------------
000015BE  6000 0330               1020              BRA     SCOSAVE
000015C2                          1021  
000015C2                          1022  ; ------------------------------------------------------------------------------
000015C2                          1023  GOVUPD
000015C2                          1024  ; GAME OVER SCREEN UPDATE
000015C2                          1025  ; INPUT    : NONE
000015C2                          1026  ; OUTPUT   : NONE
000015C2                          1027  ; MODIFIES : NONE
000015C2                          1028  ; ------------------------------------------------------------------------------
000015C2                          1029  
000015C2  3F00                    1030              MOVE.W  D0,-(A7)
000015C4                          1031  
000015C4  4EB9 00001792           1032              JSR     BACKUPD
000015CA  4EB8 10DC               1033              JSR     AGLUPD
000015CE                          1034              ; CHECK IF KEY PRESSED
000015CE  1039 00002153           1035              MOVE.B  (KBDEDGE),D0
000015D4  6700 000A               1036              BEQ     .CONT
000015D8  33FC 0000 00002176      1037              MOVE.W  #STAINTRO,(STANEXT)   
000015E0                          1038     
000015E0  301F                    1039  .CONT       MOVE.W  (A7)+,D0
000015E2  4E75                    1040              RTS
000015E4                          1041  
000015E4                          1042  ; ------------------------------------------------------------------------------
000015E4                          1043  GOVPLOT
000015E4                          1044  ; GAME OVER SCREEN PLOT
000015E4                          1045  ; INPUT    : NONE
000015E4                          1046  ; OUTPUT   : NONE
000015E4                          1047  ; MODIFIES : NONE
000015E4                          1048  ; ------------------------------------------------------------------------------
000015E4  4EB8 1576               1049              JSR GAMEPLOT
000015E8  4E75                    1050              RTS
000015EA                          1051  
000015EA                          1052  
000015EA                          1053  
000015EA                          1054  
000015EA                          1055  
000015EA                          1056  
000015EA                          1057  
000015EA                          1058  
000015EA                          1059  
000015EA                          1060  
000015EA                          1061  
000015EA                          1062  -------------------- end include --------------------
000015EA                          1063              INCLUDE "BIRD.X68"          ; PLAYER (BIRD) MANAGEMENT
000015EA                          1064  ; =============================================================================
000015EA                          1065  ; BIRD MANAGEMENT
000015EA                          1066  ; =============================================================================
000015EA                          1067  
000015EA                          1068  ; -----------------------------------------------------------------------------
000015EA                          1069  BIRDINIT
000015EA                          1070  ; INITIALIZE BIRD.
000015EA                          1071  ; INPUT     : NONE 
000015EA                          1072  ; OUTPUT    : NONE
000015EA                          1073  ; MODIFIES  : NONE
000015EA                          1074  ; -----------------------------------------------------------------------------
000015EA  33FC 00F0 00002168      1075              MOVE.W  #SCRHEIGH/2,(BIRDPOSY)
000015F2  4279 0000216A           1076              CLR.W   BIRDVELY
000015F8  4E75                    1077              RTS
000015FA                          1078              
000015FA                          1079  ; -----------------------------------------------------------------------------
000015FA                          1080  BIRDUPD
000015FA                          1081  ; UPDATES THE BIRD.
000015FA                          1082  ; INPUT    : NONE 
000015FA                          1083  ; OUTPUT   : NONE
000015FA                          1084  ; MODIFIES : NONE
000015FA                          1085  ; -----------------------------------------------------------------------------
000015FA                          1086  
000015FA  48E7 E000               1087              MOVEM.L D0-D2,-(A7)
000015FE                          1088  
000015FE                          1089              ; UPDATE VELOCITY
000015FE  1439 00002153           1090              MOVE.B  (KBDEDGE),D2        ; CHECK IF SHOULD JUMP
00001604  0802 0000               1091              BTST    #0,D2
00001608  6700 0014               1092              BEQ     .NOJUMP
0000160C                          1093              
0000160C  1E3C 0001               1094              MOVE.B  #SNDJUMP,D7         ; PLAY SOUND
00001610  4E42                    1095              TRAP    #SNDPLTN
00001612  33FC FFF6 0000216A      1096              MOVE.W  #JUMPVELY,(BIRDVELY)
0000161A  6000 0008               1097              BRA     .CORDUPD
0000161E                          1098              
0000161E  5279 0000216A           1099  .NOJUMP     ADDQ.W  #1,BIRDVELY          ; ACCELERATE
00001624                          1100              
00001624                          1101              ; UPDATE BIRD COORDINATES
00001624  3039 00002168           1102  .CORDUPD    MOVE.W  (BIRDPOSY),D0
0000162A  D079 0000216A           1103              ADD.W   (BIRDVELY),D0
00001630                          1104              
00001630                          1105              ; CHECK SCREEN COLLISIONS
00001630  B07C 0195               1106              CMP.W   #SCRHEIGH-FLOHEIGH-BIRDRAD,D0
00001634  6D00 000A               1107              BLT     .NOCOL
00001638                          1108          
00001638                          1109              ; COLLISION BOT
00001638  33FC 0004 00002176      1110  .COLBOT     MOVE.W  #STAGOVER,(STANEXT)
00001640                          1111              
00001640                          1112              ; STORE POSITION
00001640  33C0 00002168           1113  .NOCOL      MOVE.W  D0,(BIRDPOSY)
00001646                          1114  
00001646  4CDF 0007               1115  .DONE       MOVEM.L (A7)+,D0-D2
0000164A                          1116              
0000164A  4E75                    1117              RTS
0000164C                          1118  
0000164C                          1119  ; -----------------------------------------------------------------------------
0000164C                          1120  BIRDPLOT
0000164C                          1121  ; PLOT THE BIRD.
0000164C                          1122  ; INPUT    : NONE 
0000164C                          1123  ; OUTPUT   : NONE
0000164C                          1124  ; MODIFIES : NONE
0000164C                          1125  ; -----------------------------------------------------------------------------
0000164C                          1126  
0000164C  48E7 F800               1127              MOVEM.L D0-D4,-(A7)
00001650                          1128  
00001650                          1129              ; SET PEN COLOR
00001650  103C 0050               1130              MOVE.B  #80,D0
00001654  4281                    1131              CLR.L   D1
00001656  3239 0000216C           1132              MOVE.W  (BIRDPCOL),D1
0000165C  4E4F                    1133              TRAP    #15
0000165E                          1134              
0000165E                          1135              ; SET FILL COLOR
0000165E  103C 0051               1136              MOVE.B  #81,D0
00001662  3239 0000216E           1137              MOVE.W  (BIRDFCOL),D1
00001668  4E4F                    1138              TRAP    #15
0000166A                          1139  
0000166A                          1140              ; DEFINE COORDINATES
0000166A  323C 0091               1141              MOVE.W  #(BIRDPOSX)-BIRDRAD,D1
0000166E  363C 00AF               1142              MOVE.W  #(BIRDPOSX)+BIRDRAD,D3
00001672  3439 00002168           1143              MOVE.W  (BIRDPOSY),D2
00001678  3802                    1144              MOVE.W  D2,D4
0000167A  0442 000F               1145              SUB.W  #BIRDRAD,D2
0000167E  0644 000F               1146              ADD.W  #BIRDRAD,D4
00001682                          1147              
00001682                          1148              ; DRAW CIRCLE
00001682  103C 0058               1149              MOVE.B  #88,D0
00001686  4E4F                    1150              TRAP    #15
00001688                          1151              
00001688  4CDF 001F               1152              MOVEM.L (A7)+,D0-D4
0000168C                          1153  
0000168C  4E75                    1154              RTS
0000168E                          1155  
0000168E                          1156  
0000168E                          1157  
0000168E                          1158  
0000168E                          1159  
0000168E                          1160  
0000168E                          1161  
0000168E                          1162  
0000168E                          1163  
0000168E                          1164  
0000168E                          1165  
0000168E                          1166  
0000168E                          1167  
0000168E                          1168  -------------------- end include --------------------
0000168E                          1169              INCLUDE "PIPE.X68"          ; OBSTACLE (PIPE) MANAGEMENT
0000168E                          1170  ; =============================================================================
0000168E                          1171  ; PIPE MANAGEMENT (AGENT)
0000168E                          1172  ; PIPEPOSX (W) (A0)
0000168E                          1173  ; PIPETOPH (B) 2(A0)
0000168E                          1174  ; =============================================================================
0000168E                          1175  
0000168E                          1176  ; -----------------------------------------------------------------------------
0000168E                          1177  PIPEINIT
0000168E                          1178  ; INITIALIZE PIPE.
0000168E                          1179  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
0000168E                          1180  ; OUTPUT    : NONE
0000168E                          1181  ; MODIFIES  : NONE
0000168E                          1182  ; -----------------------------------------------------------------------------
0000168E                          1183  
0000168E  2F00                    1184              MOVE.L  D0,-(A7)
00001690                          1185              
00001690  30BC 0280               1186              MOVE.W  #SCRWIDTH,(A0)
00001694  4EB8 118E               1187              JSR UTLRAND         ; RANDOM NUMBER BETWEEN 0-255
00001698  0680 00000096           1188              ADD.L   #(SCRHEIGH-PIPEGAPS-FLOHEIGH)/2,D0
0000169E  1140 0002               1189              MOVE.B  D0,2(A0)
000016A2                          1190              
000016A2  201F                    1191              MOVE.L  (A7)+,D0
000016A4  4E75                    1192              RTS
000016A6                          1193              
000016A6                          1194  ; -----------------------------------------------------------------------------
000016A6                          1195  PIPEUPD
000016A6                          1196  ; UPDATES PIPE.
000016A6                          1197  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
000016A6                          1198  ; OUTPUT    : NONE
000016A6                          1199  ; MODIFIES  : NONE
000016A6                          1200  ; -----------------------------------------------------------------------------
000016A6  48E7 C000               1201              MOVEM.L D0-D1,-(A7)
000016AA                          1202              
000016AA  3039 00002174           1203              MOVE.W  (STACUR),D0
000016B0  B07C 0002               1204              CMP.W   #STAGAME,D0
000016B4  6600 0078               1205              BNE     .END
000016B8                          1206  
000016B8                          1207              ; UPDATE POSITION
000016B8  0650 FFFB               1208              ADD.W   #PIPEVELX,(A0)
000016BC                          1209  
000016BC                          1210  ; CHECK AND HANDLE COLLISIONS
000016BC                          1211              
000016BC                          1212              ; COLLISION WITH SCREEN
000016BC  3010                    1213              MOVE.W  (A0),D0
000016BE  0640 0032               1214              ADD.W   #PIPEWIDT,D0
000016C2  6A00 000A               1215              BPL     .NOKILL
000016C6  4EB8 10AC               1216              JSR AGLKILL
000016CA  6000 0062               1217              BRA     .END
000016CE                          1218              
000016CE                          1219              ; COLLISION WITH BIRD
000016CE  B07C 00E1               1220  .NOKILL     CMP.W   #BIRDPOSX+BIRDRAD+PIPEWIDT,D0
000016D2  6A00 004C               1221              BPL     .NOCOL
000016D6  B07C 0091               1222              CMP.W   #BIRDPOSX-BIRDRAD,D0
000016DA  6B00 0044               1223              BMI     .NOCOL
000016DE                          1224  
000016DE                          1225              
000016DE                          1226              ; BIRD IS IN PIPE X RANGE
000016DE  4280                    1227              CLR.L   D0
000016E0  1028 0002               1228              MOVE.B  2(A0),D0
000016E4  3239 00002168           1229              MOVE.W  (BIRDPOSY),D1
000016EA  0441 000F               1230              SUB.W   #BIRDRAD,D1
000016EE  B041                    1231              CMP.W   D1,D0
000016F0  6A00 0014               1232              BPL     .COL
000016F4  0640 0078               1233              ADD.W   #PIPEGAPS,D0
000016F8  0641 001E               1234              ADD.W   #2*BIRDRAD,D1
000016FC  B041                    1235              CMP.W   D1,D0
000016FE  6B00 0006               1236              BMI     .COL
00001702                          1237  
00001702  6000 001C               1238              BRA     .NOCOL
00001706                          1239  
00001706                          1240              ; STOP ALL SOUNDS
00001706  103C 004C               1241  .COL        MOVE.B  #76,D0
0000170A  7403                    1242              MOVE.L  #3,D2
0000170C  4E4F                    1243              TRAP    #15
0000170E                          1244              
0000170E  1E3C 0000               1245              MOVE.B  #SNDDIE,D7  ; PLAY DIE SOUND
00001712  4E42                    1246              TRAP    #SNDPLTN
00001714                          1247              
00001714  33FC 0004 00002176      1248              MOVE.W  #STAGOVER,(STANEXT)
0000171C                          1249              
0000171C  6000 0010               1250              BRA     .END
00001720                          1251  
00001720                          1252              ; SCORE INCREASE
00001720  0C50 005F               1253  .NOCOL      CMP.W   #BIRDPOSX-PIPEWIDT-BIRDRAD,(A0)
00001724  6600 0008               1254              BNE     .END
00001728  4EB9 0000186C           1255              JSR     SCOINC
0000172E                          1256              
0000172E  4CDF 0003               1257  .END        MOVEM.L  (A7)+,D0-D1
00001732  4E75                    1258              RTS
00001734                          1259  
00001734                          1260  ; -----------------------------------------------------------------------------
00001734                          1261  PIPEPLOT
00001734                          1262  ; PLOT THE PIPE.
00001734                          1263  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001734                          1264  ; OUTPUT    : NONE
00001734                          1265  ; MODIFIES  : NONE
00001734                          1266  ; -----------------------------------------------------------------------------
00001734                          1267      
00001734  48E7 F800               1268              MOVEM.L D0-D4,-(A7)
00001738                          1269              
00001738                          1270              ; SET PEN AND FILL COLORS
00001738  103C 0050               1271              MOVE.B  #80,D0
0000173C  223C 00151A30           1272              MOVE.L  #PIPEPCOL,D1
00001742  4E4F                    1273              TRAP    #15
00001744  103C 0051               1274              MOVE.B  #81,D0
00001748  223C 0020284D           1275              MOVE.L  #PIPEFCOL,D1
0000174E  4E4F                    1276              TRAP    #15
00001750                          1277              
00001750                          1278              ; PLOT TOP HALF
00001750  3210                    1279              MOVE.W  (A0),D1
00001752  4242                    1280              CLR.W   D2
00001754  3601                    1281              MOVE.W  D1,D3
00001756  0643 0032               1282              ADD.W   #PIPEWIDT,D3
0000175A  4244                    1283              CLR.W   D4
0000175C  1828 0002               1284              MOVE.B  2(A0),D4
00001760  103C 0057               1285              MOVE.B  #87,D0
00001764  4E4F                    1286              TRAP    #15
00001766                          1287              ; PLOT TOP PIPE OPENING
00001766  3404                    1288              MOVE.W  D4,D2
00001768  0442 000F               1289              SUB.W   #PPOPHEIG,D2
0000176C  5B41                    1290              SUB.W   #PPOPOVER,D1
0000176E  5A43                    1291              ADD.W   #PPOPOVER,D3
00001770  4E4F                    1292              TRAP    #15
00001772                          1293              
00001772                          1294              
00001772                          1295              ; PLOT BOTTOM HALF
00001772  5A41                    1296              ADD.W   #PPOPOVER,D1
00001774  5B43                    1297              SUB.W   #PPOPOVER,D3
00001776  3404                    1298              MOVE.W  D4,D2
00001778  0642 0078               1299              ADD.W   #PIPEGAPS,D2
0000177C  383C 01A4               1300              MOVE.W  #SCRHEIGH-FLOHEIGH,D4
00001780  4E4F                    1301              TRAP    #15
00001782                          1302              ;PLOT BOTTOM PIPE OPNENING
00001782  5B41                    1303              SUB.W   #PPOPOVER,D1
00001784  5A43                    1304              ADD.W   #PPOPOVER,D3
00001786  3802                    1305              MOVE.W  D2,D4
00001788  0644 000F               1306              ADD.W   #PPOPHEIG,D4
0000178C                          1307              
0000178C  4CDF 001F               1308              MOVEM.L (A7)+,D0-D4
00001790  4E75                    1309              RTS
00001792                          1310  
00001792                          1311  
00001792                          1312  
00001792                          1313  
00001792                          1314  
00001792                          1315  
00001792                          1316  
00001792                          1317  
00001792                          1318  
00001792                          1319  
00001792                          1320  
00001792                          1321  
00001792                          1322  
00001792                          1323  -------------------- end include --------------------
00001792                          1324              INCLUDE "BACKGROUND.X68"    ; BACKGROUND MANAGEMENT
00001792                          1325  ; =============================================================================
00001792                          1326  ; BACKGROUND MANAGEMENT
00001792                          1327  ; =============================================================================
00001792                          1328  
00001792                          1329  ; -----------------------------------------------------------------------------
00001792                          1330  BACKUPD
00001792                          1331  ; UPDATES BACKGROUND
00001792                          1332  ; INPUT     : NONE
00001792                          1333  ; OUTPUT    : NONE
00001792                          1334  ; MODIFIES  : NONE
00001792                          1335  ; -----------------------------------------------------------------------------
00001792                          1336              
00001792  48E7 8070               1337              MOVEM.L D0/A1-A3,-(A7)
00001796                          1338              
00001796                          1339              ; CREATE NEW CLOUD
00001796  1039 00002155           1340              MOVE.B  (SCRCYCCT),D0
0000179C  0200 007F               1341              ANDI.B  #MASKNWCL,D0
000017A0  6600 001C               1342              BNE     .NONEWCL
000017A4  43F9 00001936           1343              LEA     CLDINIT,A1
000017AA  45F9 0000195A           1344              LEA     CLDUPD,A2
000017B0  47F9 00001988           1345              LEA     CLDPLOT,A3
000017B6  303C 0002               1346              MOVE    #CLOUDAGT,D0
000017BA  4EB8 10C2               1347              JSR     AGLADD
000017BE                          1348              
000017BE  4CDF 0E01               1349  .NONEWCL    MOVEM.L (A7)+,D0/A1-A3
000017C2  4E75                    1350              RTS
000017C4                          1351  
000017C4                          1352  ; -----------------------------------------------------------------------------
000017C4                          1353  BACKPLOT
000017C4                          1354  ; DRAWS BACKGROUND
000017C4                          1355  ; INPUT     : NONE
000017C4                          1356  ; OUTPUT    : NONE
000017C4                          1357  ; MODIFIES  : NONE
000017C4                          1358  ; -----------------------------------------------------------------------------
000017C4                          1359  
000017C4  4EB9 000017CE           1360              JSR SKYPLOT
000017CA  6000 0034               1361              BRA FLOPLOT
000017CE                          1362              
000017CE                          1363  ; -----------------------------------------------------------------------------
000017CE                          1364  SKYPLOT
000017CE                          1365  ; DRAWS THE SKY BACKGROUND
000017CE                          1366  ; INPUT     : NONE
000017CE                          1367  ; OUTPUT    : NONE
000017CE                          1368  ; MODIFIES  : NONE
000017CE                          1369  ; -----------------------------------------------------------------------------
000017CE                          1370              
000017CE  48E7 F800               1371              MOVEM.L D0-D4,-(A7)
000017D2                          1372              ; SET PEN COLOR
000017D2  223C 00FFBF80           1373              MOVE.L  #SKYCOLOR,D1
000017D8  103C 0050               1374              MOVE.B  #80,D0
000017DC  4E4F                    1375              TRAP    #15
000017DE                          1376              
000017DE                          1377              ; SET FILL COLOR
000017DE  103C 0051               1378              MOVE.B  #81,D0
000017E2  4E4F                    1379              TRAP    #15
000017E4                          1380              
000017E4                          1381              ; SET COORDS AND DRAW
000017E4  103C 0057               1382              MOVE.B  #87,D0
000017E8  4281                    1383              CLR.L   D1
000017EA  4282                    1384              CLR.L   D2
000017EC  263C 00000280           1385              MOVE.L  #SCRWIDTH,D3
000017F2  283C 000001E0           1386              MOVE.L  #SCRHEIGH,D4
000017F8  4E4F                    1387              TRAP    #15
000017FA                          1388              
000017FA  4CDF 001F               1389              MOVEM.L (A7)+,D0-D4
000017FE  4E75                    1390              RTS
00001800                          1391              
00001800                          1392  ; -----------------------------------------------------------------------------
00001800                          1393  FLOPLOT
00001800                          1394  ; DRAWS THE FLOOR BACKGROUND
00001800                          1395  ; INPUT     : NONE
00001800                          1396  ; OUTPUT    : NONE
00001800                          1397  ; MODIFIES  : NONE
00001800                          1398  ; -----------------------------------------------------------------------------
00001800                          1399  
00001800  48E7 F800               1400              MOVEM.L D0-D4,-(A7)
00001804                          1401              ; SET PEN COLOR 
00001804  223C 0035DE3B           1402              MOVE.L  #FLOCOLOR,D1
0000180A  103C 0050               1403              MOVE.B  #80,D0
0000180E  4E4F                    1404              TRAP    #15
00001810                          1405              
00001810                          1406              ; SET FILL COLOR
00001810  103C 0051               1407              MOVE.B  #81,D0
00001814  4E4F                    1408              TRAP    #15
00001816                          1409              
00001816                          1410              ; SET COORDS AND DRAW
00001816  103C 0057               1411              MOVE.B  #87,D0
0000181A  4281                    1412              CLR.L   D1
0000181C  243C 000001A4           1413              MOVE.L  #SCRHEIGH-FLOHEIGH,D2
00001822  263C 00000280           1414              MOVE.L  #SCRWIDTH,D3
00001828  283C 000001E0           1415              MOVE.L  #SCRHEIGH,D4
0000182E  4E4F                    1416              TRAP    #15
00001830                          1417              
00001830  4CDF 001F               1418              MOVEM.L (A7)+,D0-D4
00001834  4E75                    1419              RTS
00001836                          1420  
00001836                          1421  
00001836                          1422  -------------------- end include --------------------
00001836                          1423              INCLUDE "SCORE.X68"         ; SCORE MANAGEMENT
00001836                          1424  ; =============================================================================
00001836                          1425  ; SCOREBOARD MANAGEMENT
00001836                          1426  ; =============================================================================
00001836                          1427  
00001836                          1428  ; ------------------------------------------------------------------------------
00001836                          1429  SCOINIT
00001836                          1430  ; INITIALIZE SCOREBOARD
00001836                          1431  ; INPUT    : NONE 
00001836                          1432  ; OUTPUT   : NONE
00001836                          1433  ; MODIFIES : NONE
00001836                          1434  ; ------------------------------------------------------------------------------
00001836                          1435  
00001836  48E7 E0C0               1436              MOVEM.L D0-D2/A0-A1,-(A7)
0000183A  4279 00002170           1437              CLR.W   (SCORE)
00001840  4279 00002172           1438              CLR.W   (HIGHSCO)
00001846                          1439              
00001846                          1440              ; OPEN FILE
00001846  43F9 00002158           1441              LEA     SCOPATH,A1
0000184C  103C 0033               1442              MOVE.B  #51,D0
00001850  4E4F                    1443              TRAP    #15
00001852                          1444              
00001852                          1445              ; READ HIGH SCORE
00001852  43F9 00002172           1446              LEA     HIGHSCO,A1
00001858  7402                    1447              MOVE.L  #2,D2
0000185A  103C 0035               1448              MOVE.B  #53,D0
0000185E  4E4F                    1449              TRAP    #15
00001860                          1450              
00001860                          1451              ; CLOSE FILE
00001860  103C 0038               1452              MOVE.B  #56,D0
00001864  4E4F                    1453              TRAP    #15
00001866                          1454              
00001866  4CDF 0307               1455              MOVEM.L (A7)+,D0-D2/A0-A1
0000186A  4E75                    1456              RTS
0000186C                          1457              
0000186C                          1458  ; -----------------------------------------------------------------------------
0000186C                          1459  SCOINC
0000186C                          1460  ; INCREASES THE SCORE BY 1
0000186C                          1461  ; INPUT     : NONE
0000186C                          1462  ; OUTPUT    : SCORE = SCORE + 1
0000186C                          1463  ; MODIFIES  : NONE (APART FROM OUTPUT)
0000186C                          1464  ; -----------------------------------------------------------------------------
0000186C  48E7 A100               1465              MOVEM.L D0/D2/D7,-(A7)
00001870                          1466  
00001870  5279 00002170           1467              ADDQ.W  #1,(SCORE)
00001876                          1468              ; STOP ALL SOUNDS
00001876  103C 004C               1469              MOVE.B  #76,D0
0000187A  7403                    1470              MOVE.L  #3,D2
0000187C  4E4F                    1471              TRAP    #15
0000187E                          1472              
0000187E                          1473              ; PLAY SOUND
0000187E  1E3C 0002               1474              MOVE.B  #SNDSCO,D7
00001882  4E42                    1475              TRAP    #SNDPLTN
00001884                          1476              
00001884  4CDF 0085               1477              MOVEM.L (A7)+,D0/D2/D7
00001888  4E75                    1478              RTS
0000188A                          1479              
0000188A                          1480  ; ------------------------------------------------------------------------------
0000188A                          1481  SCOPLOT
0000188A                          1482  ; PLOT THE SCOREBOARD
0000188A                          1483  ; INPUT    : NONE 
0000188A                          1484  ; OUTPUT   : NONE
0000188A                          1485  ; MODIFIES : NONE
0000188A                          1486  ; ------------------------------------------------------------------------------
0000188A                          1487  
0000188A  48E7 C040               1488              MOVEM.L D0-D1/A1,-(A7)
0000188E                          1489  
0000188E                          1490              ; SET BACKGROUND COLOR
0000188E  103C 0051               1491              MOVE.B  #81,D0
00001892  223C 0035DE3B           1492              MOVE.L  #SCOFCOL,D1
00001898  4E4F                    1493              TRAP    #15
0000189A                          1494              
0000189A                          1495              ; SET SCORE LINE POSITION
0000189A  103C 000B               1496              MOVE.B  #11,D0
0000189E  323C 101D               1497              MOVE.W  #SCOLINE,D1
000018A2  4E4F                    1498              TRAP    #15
000018A4                          1499              
000018A4                          1500              ; PLOT THE SCORE
000018A4  43F9 000018DC           1501              LEA     .SCOTXT,A1
000018AA  4281                    1502              CLR.L   D1
000018AC  3239 00002170           1503              MOVE.W  (SCORE),D1
000018B2  103C 0011               1504              MOVE.B  #17,D0
000018B6  4E4F                    1505              TRAP    #15
000018B8                          1506              
000018B8                          1507              ; SET HIGH SCORE LINE POSITION
000018B8  103C 000B               1508              MOVE.B  #11,D0
000018BC  323C 101E               1509              MOVE.W  #HSCOLINE,D1
000018C0  4E4F                    1510              TRAP    #15
000018C2                          1511              
000018C2                          1512              ; PLOT THE HIGHSCORE
000018C2  43F9 000018E4           1513              LEA     .HISCOTXT,A1
000018C8  4281                    1514              CLR.L   D1
000018CA  3239 00002172           1515              MOVE.W  (HIGHSCO),D1
000018D0  103C 0011               1516              MOVE.B  #17,D0
000018D4  4E4F                    1517              TRAP    #15
000018D6                          1518              
000018D6  4CDF 0203               1519              MOVEM.L (A7)+,D0-D1/A1
000018DA  4E75                    1520              RTS
000018DC                          1521              
000018DC= 53 43 4F 52 45 3A ...   1522  .SCOTXT     DC.B    'SCORE: ',0
000018E4= 48 49 47 48 53 43 ...   1523  .HISCOTXT   DC.B    'HIGHSCORE: ',0
000018F0                          1524  
000018F0                          1525  ; ------------------------------------------------------------------------------
000018F0                          1526  SCOSAVE
000018F0                          1527  ; SAVES THE HIGH SCORE
000018F0                          1528  ; INPUT    : NONE 
000018F0                          1529  ; OUTPUT   : NONE
000018F0                          1530  ; MODIFIES : NONE
000018F0                          1531  ; ------------------------------------------------------------------------------
000018F0                          1532  
000018F0  48E7 E0C0               1533              MOVEM.L A0-A1/D0-D2,-(A7)
000018F4                          1534              ; IF ACTUAL SCORE > HIGH SCORE
000018F4  3039 00002170           1535              MOVE.W  (SCORE),D0
000018FA  3239 00002172           1536              MOVE.W  (HIGHSCO),D1
00001900  B240                    1537              CMP.W   D0,D1
00001902  6C00 002C               1538              BGE     .END
00001906                          1539              
00001906                          1540              ; OPEN FILE
00001906  43F9 00002158           1541              LEA     SCOPATH,A1
0000190C  103C 0033               1542              MOVE.B  #51,D0
00001910  4E4F                    1543              TRAP    #15
00001912                          1544              
00001912                          1545              ; SAVE NEW HIGH SCORE
00001912  33F9 00002170 00002172  1546              MOVE.W  (SCORE),(HIGHSCO)
0000191C  43F9 00002172           1547              LEA     HIGHSCO,A1
00001922  7402                    1548              MOVE.L  #2,D2
00001924  103C 0036               1549              MOVE.B  #54,D0
00001928  4E4F                    1550              TRAP    #15
0000192A                          1551              
0000192A                          1552              ; CLOSE FILE
0000192A  103C 0038               1553              MOVE.B  #56,D0
0000192E  4E4F                    1554              TRAP    #15
00001930                          1555              
00001930                          1556              
00001930  4CDF 0307               1557  .END        MOVEM.L (A7)+,A0-A1/D0-D2
00001934  4E75                    1558              RTS
00001936                          1559  
00001936                          1560  
00001936                          1561  
00001936                          1562  
00001936                          1563  
00001936                          1564  -------------------- end include --------------------
00001936                          1565              INCLUDE "CLOUD.X68"         ; CLOUD MANAGEMENT
00001936                          1566  ; =============================================================================
00001936                          1567  ; CLOUD MANAGEMENT (AGENT)
00001936                          1568  ; CLOUDPOSX  (W) (A0)
00001936                          1569  ; CLOUDPOSY  (W) 2(A0)
00001936                          1570  ; CLOUDSPEED (W) 4(A0)
00001936                          1571  ; CLOUDTYPE  (W) 6(A0)
00001936                          1572  ; =============================================================================
00001936                          1573  
00001936                          1574  ; -----------------------------------------------------------------------------
00001936                          1575  CLDINIT
00001936                          1576  ; INITIALIZE CLOUD.
00001936                          1577  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001936                          1578  ; OUTPUT    : NONE
00001936                          1579  ; MODIFIES  : NONE
00001936                          1580  ; -----------------------------------------------------------------------------
00001936                          1581  
00001936  2F00                    1582              MOVE.L  D0,-(A7)
00001938                          1583  
00001938                          1584              ; INIT POSITION
00001938  30BC 0280               1585              MOVE.W  #SCRWIDTH,(A0)
0000193C  4EB8 118E               1586              JSR UTLRAND             ; RANDOM NUMBER BETWEEN 0-255
00001940  3140 0002               1587              MOVE.W  D0,2(A0)
00001944                          1588              ; INIT CLOUD TYPE
00001944  C03C 0007               1589              AND.B   #7,D0
00001948  3140 0006               1590              MOVE.W  D0,6(A0)
0000194C                          1591              ; INIT SPEED
0000194C  82BC FFFFFFFC           1592              OR.L    #CLDSPMSK,D1
00001952  3141 0004               1593              MOVE.W  D1,4(A0)
00001956                          1594              
00001956  201F                    1595              MOVE.L (A7)+,D0
00001958  4E75                    1596              RTS
0000195A                          1597  
0000195A                          1598  ; -----------------------------------------------------------------------------
0000195A                          1599  CLDUPD
0000195A                          1600  ; UPDATES CLOUD.
0000195A                          1601  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
0000195A                          1602  ; OUTPUT    : NONE
0000195A                          1603  ; MODIFIES  : NONE
0000195A                          1604  ; -----------------------------------------------------------------------------
0000195A                          1605              
0000195A  48E7 8040               1606              MOVEM.L D0/A1,-(A7)
0000195E                          1607              
0000195E                          1608              ; UPDATE POSITION
0000195E  3028 0004               1609              MOVE.W  4(A0),D0
00001962  D050                    1610              ADD.W   (A0),D0
00001964  3080                    1611              MOVE.W  D0,(A0)
00001966                          1612              
00001966                          1613  ; CHECK AND HANDLE COLISION
00001966                          1614              ; SELECT CLOUD WIDTH
00001966  3028 0006               1615              MOVE.W  6(A0),D0
0000196A  E558                    1616              ROL.W   #2,D0           ; TIMES 4 TIMES SINCE WE ACCESS LONG
0000196C  43F9 000019B0           1617              LEA     CLDTBL,A1
00001972  2271 0000               1618              MOVE.L  (A1,D0.W),A1
00001976  3011                    1619              MOVE.W  (A1),D0
00001978                          1620              
00001978  D050                    1621              ADD.W   (A0),D0
0000197A  6E00 0006               1622              BGT     .NOKILL
0000197E  4EB8 10AC               1623              JSR AGLKILL             ; KILL AGENT
00001982                          1624              
00001982  4CDF 0201               1625  .NOKILL     MOVEM.L (A7)+,D0/A1       
00001986  4E75                    1626              RTS
00001988                          1627  
00001988                          1628  ; -----------------------------------------------------------------------------
00001988                          1629  CLDPLOT
00001988                          1630  ; PLOTS CLOUD.
00001988                          1631  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001988                          1632  ; OUTPUT    : NONE
00001988                          1633  ; MODIFIES  : NONE
00001988                          1634  ; -----------------------------------------------------------------------------
00001988                          1635              
00001988  48E7 B140               1636              MOVEM.L D0/D2-D3/D7/A1,-(A7)
0000198C                          1637              
0000198C                          1638              ; SELECT THE CLOUD TYPE
0000198C  3028 0006               1639              MOVE.W  6(A0),D0
00001990  E558                    1640              ROL.W   #2,D0           ; TIMES 4 TIMES SINCE WE ACCESS LONG
00001992  43F9 000019B0           1641              LEA     CLDTBL,A1
00001998  2271 0000               1642              MOVE.L  (A1,D0.W),A1
0000199C                          1643              
0000199C                          1644              ; PLOT IMAGE
0000199C  3E19                    1645              MOVE.W  (A1)+,D7        ; ASSUME CLOUDX IS RIGHT NEXT TO CLOUDXW
0000199E  3428 0002               1646              MOVE.W  2(A0),D2
000019A2  3610                    1647              MOVE.W  (A0),D3
000019A4  4EB9 000019D0           1648              JSR     IMGPLOT
000019AA                          1649              
000019AA  4CDF 028D               1650              MOVEM.L (A7)+,D0/D2-D3/D7/A1
000019AE  4E75                    1651              RTS
000019B0                          1652                
000019B0= 00001A1E                1653  CLDTBL      DC.L    CLOUD0W
000019B4= 00001ADC                1654              DC.L    CLOUD1W
000019B8= 00001B7A                1655              DC.L    CLOUD2W
000019BC= 00001D38                1656              DC.L    CLOUD3W
000019C0= 00001D96                1657              DC.L    CLOUD4W
000019C4= 00001EC4                1658              DC.L    CLOUD5W
000019C8= 00001F92                1659              DC.L    CLOUD6W
000019CC= 00002040                1660              DC.L    CLOUD7W
000019D0                          1661  
000019D0                          1662  
000019D0                          1663  
000019D0                          1664  -------------------- end include --------------------
000019D0                          1665              INCLUDE "IMAGE.X68"         ; IMAGE DRAWING ROUTINES
000019D0                          1666  ; =============================================================================
000019D0                          1667  ; IMAGE LIBRARY. IT CONTAINS ROUTINES TO DRAW IMAGES. EVERY IMAGE DATA SHOULD 
000019D0                          1668  ; HAVE N LONG PAIRS, THE FIRST OF THE PAIR MEANS THE COLOR OF A BLOCK IN 
000019D0                          1669  ; FORMAT $00BBGGRR AND THE SECOND IS THE AMMOUNT OF BLOCKS IN A ROW WITH 
000019D0                          1670  ; THE SAME COLOR.
000019D0                          1671  ; EVERY IMAGE DATA IS ENDING WITH THE FLAG $FFFFFFFF
000019D0                          1672  ; =============================================================================
000019D0                          1673  
000019D0                          1674  ; -----------------------------------------------------------------------------
000019D0                          1675  IMGPLOT
000019D0                          1676  ; PLOTS AN IMAGE IN THE GIVEN COORDINATES
000019D0                          1677  ; INPUT:    A1 POINTER TO IMAGE DATA
000019D0                          1678  ;           D2.W Y START
000019D0                          1679  ;           D3.W X START
000019D0                          1680  ;           D7.W IMAGE WIDTH
000019D0                          1681  ; NOTE : WON'T USE IMAGE HEIGHT TO MANAGE IMAGE END, AS WE ASSUME IMAGE DATA
000019D0                          1682  ;        IS ENDING WITH THE FLAG $FFFFFFFF
000019D0                          1683  ; -----------------------------------------------------------------------------
000019D0                          1684  
000019D0  48E7 FF40               1685              MOVEM.L A1/D0-D7,-(A7)
000019D4                          1686              
000019D4  33C3 00001A1C           1687              MOVE.W  D3,(.STARTX)  ; STORE STARTING X
000019DA  3A03                    1688              MOVE.W  D3,D5   
000019DC  DA47                    1689              ADD.W   D7,D5       ; X ENDING COORD
000019DE                          1690              
000019DE                          1691              
000019DE                          1692              ; SET PEN AND FILL COLOR
000019DE  2219                    1693              MOVE.L  (A1)+,D1
000019E0  103C 0050               1694  .LOOP1      MOVE.B  #80,D0
000019E4  4E4F                    1695              TRAP    #15
000019E6  5200                    1696              ADDQ.B  #1,D0
000019E8  4E4F                    1697              TRAP    #15
000019EA                          1698              
000019EA                          1699              ; DRAW BLOCK
000019EA  2C19                    1700              MOVE.L  (A1)+,D6
000019EC  5386                    1701              SUBQ.L  #1,D6            
000019EE  3203                    1702  .LOOP2      MOVE.W  D3,D1       ; BLOCK START X
000019F0  5843                    1703              ADDQ.W  #BLOCKSZ,D3 ; BLOCK END X
000019F2  3802                    1704              MOVE.W  D2,D4       
000019F4  5844                    1705              ADDQ.W  #BLOCKSZ,D4 ; BLOCK END Y
000019F6  103C 0057               1706              MOVE.B  #87,D0
000019FA  4E4F                    1707              TRAP    #15
000019FC                          1708              
000019FC  BA43                    1709              CMP.W   D3,D5
000019FE  6C00 000A               1710              BGE     .SAMEROW
00001A02                          1711              ; MOVE TO NEXT ROW
00001A02  3639 00001A1C           1712              MOVE.W  (.STARTX),D3
00001A08  5842                    1713              ADDQ.W  #BLOCKSZ,D2
00001A0A  51CE FFE2               1714  .SAMEROW    DBRA    D6,.LOOP2
00001A0E                          1715              
00001A0E  2219                    1716              MOVE.L  (A1)+,D1
00001A10  B27C FFFF               1717              CMP.W   #.ENDFLAG,D1
00001A14  66CA                    1718              BNE     .LOOP1
00001A16                          1719              
00001A16                          1720              
00001A16  4CDF 02FF               1721              MOVEM.L (A7)+,A1/D0-D7
00001A1A  4E75                    1722              RTS
00001A1C                          1723         
00001A1C  =FFFFFFFF               1724  .ENDFLAG    EQU     $FFFFFFFF
00001A1C                          1725  
00001A1C                          1726  .STARTX     DS.W    1
00001A1E                          1727  
00001A1E                          1728  
00001A1E                          1729  
00001A1E                          1730  
00001A1E                          1731  
00001A1E                          1732  
00001A1E                          1733  
00001A1E                          1734  -------------------- end include --------------------
00001A1E                          1735              
00001A1E                          1736  ; --- DATA INCLUDES -----------------------------------------------------------
00001A1E                          1737  
00001A1E                          1738              INCLUDE "DATA/CLOUDSDATA.X68"    ; CLOUD IMAGES DATA
00001A1E                          1739  ; =============================================================================
00001A1E                          1740  ; THIS FILE HAS BEEN GENERATED BY CLOUDSCONVERTER.JAVA FROM CLOUD IMAGES.
00001A1E                          1741  ; TO IMPROVE PERFORMANCE, EACH BLOCK ACTS LIKE A PIXEL, BUT IT'S ACTUALLY A 
00001A1E                          1742  ;4x4 SQUARE. IMAGES ARE ADDAPTED TO IMAGE.X68 DRAWING.
00001A1E                          1743  ; =============================================================================
00001A1E                          1744  
00001A1E                          1745  
00001A1E                          1746  ; -----------------------------------------------------------------------------
00001A1E                          1747  ; EVERY CLOUD DATA STORES:
00001A1E                          1748  ; ONE WORD TO STORE THE CLOUD WIDTH IN BLOCKS.
00001A1E                          1749  ; TWO LONGS PAIRS STORING A COLOR AND THE AMMOUNT OF BLOCKS WITH THE SAME COLOR
00001A1E                          1750  ; IN A ROW.
00001A1E                          1751  ; EVERY IMAGE ENDS WITH A FLAG $FFFFFFFF
00001A1E                          1752  ; -----------------------------------------------------------------------------
00001A1E                          1753  
00001A1E= 0070                    1754  CLOUD0W     DC.W    112
00001A20                          1755  CLOUD0
00001A20= 00FFBF80 0000002C       1756              DC.L    $00FFBF80,44
00001A28= 00FEFDFB 00000009       1757              DC.L    $00FEFDFB,9
00001A30= 00FFBF80 00000012       1758              DC.L    $00FFBF80,18
00001A38= 00FEFDFB 0000000B       1759              DC.L    $00FEFDFB,11
00001A40= 00FFBF80 00000010       1760              DC.L    $00FFBF80,16
00001A48= 00FEFDFB 0000000D       1761              DC.L    $00FEFDFB,13
00001A50= 00FFBF80 00000007       1762              DC.L    $00FFBF80,7
00001A58= 00FEFDFB 00000006       1763              DC.L    $00FEFDFB,6
00001A60= 00FFBF80 00000001       1764              DC.L    $00FFBF80,1
00001A68= 00FEFDFB 0000000E       1765              DC.L    $00FEFDFB,14
00001A70= 00FFBF80 00000006       1766              DC.L    $00FFBF80,6
00001A78= 00FEFDFB 00000017       1767              DC.L    $00FEFDFB,23
00001A80= 00FFBF80 00000005       1768              DC.L    $00FFBF80,5
00001A88= 00FEFDFB 00000016       1769              DC.L    $00FEFDFB,22
00001A90= 00FFBF80 00000005       1770              DC.L    $00FFBF80,5
00001A98= 00FEFDFB 00000017       1771              DC.L    $00FEFDFB,23
00001AA0= 00FFBF80 00000002       1772              DC.L    $00FFBF80,2
00001AA8= 00FEFDFB 0000001A       1773              DC.L    $00FEFDFB,26
00001AB0= 00FFBF80 00000002       1774              DC.L    $00FFBF80,2
00001AB8= 00FEFDFB 0000001A       1775              DC.L    $00FEFDFB,26
00001AC0= 00FFBF80 00000003       1776              DC.L    $00FFBF80,3
00001AC8= 00FEFDFB 00000018       1777              DC.L    $00FEFDFB,24
00001AD0= 00FFBF80 0000001E       1778              DC.L    $00FFBF80,30
00001AD8= FFFFFFFF                1779              DC.L    $FFFFFFFF
00001ADC                          1780  
00001ADC                          1781  
00001ADC= 0060                    1782  CLOUD1W     DC.W    96
00001ADE                          1783  CLOUD1
00001ADE= 00FFBF80 00000020       1784              DC.L    $00FFBF80,32
00001AE6= 00FEFDFB 00000007       1785              DC.L    $00FEFDFB,7
00001AEE= 00FFBF80 00000010       1786              DC.L    $00FFBF80,16
00001AF6= 00FEFDFB 00000009       1787              DC.L    $00FEFDFB,9
00001AFE= 00FFBF80 0000000E       1788              DC.L    $00FFBF80,14
00001B06= 00FEFDFB 0000000B       1789              DC.L    $00FEFDFB,11
00001B0E= 00FFBF80 0000000C       1790              DC.L    $00FFBF80,12
00001B16= 00FEFDFB 0000000C       1791              DC.L    $00FEFDFB,12
00001B1E= 00FFBF80 00000001       1792              DC.L    $00FFBF80,1
00001B26= 00FEFDFB 00000001       1793              DC.L    $00FEFDFB,1
00001B2E= 00FFBF80 0000000A       1794              DC.L    $00FFBF80,10
00001B36= 00FEFDFB 0000000F       1795              DC.L    $00FEFDFB,15
00001B3E= 00FFBF80 00000006       1796              DC.L    $00FFBF80,6
00001B46= 00FEFDFB 00000013       1797              DC.L    $00FEFDFB,19
00001B4E= 00FFBF80 00000004       1798              DC.L    $00FFBF80,4
00001B56= 00FEFDFB 00000016       1799              DC.L    $00FEFDFB,22
00001B5E= 00FFBF80 00000002       1800              DC.L    $00FFBF80,2
00001B66= 00FEFDFB 00000016       1801              DC.L    $00FEFDFB,22
00001B6E= 00FFBF80 00000019       1802              DC.L    $00FFBF80,25
00001B76= FFFFFFFF                1803              DC.L    $FFFFFFFF
00001B7A                          1804  
00001B7A                          1805  
00001B7A= 00C6                    1806  CLOUD2W     DC.W    198
00001B7C                          1807  CLOUD2
00001B7C= 00FFBF80 00000014       1808              DC.L    $00FFBF80,20
00001B84= 00FEFDFB 00000004       1809              DC.L    $00FEFDFB,4
00001B8C= 00FFBF80 0000002B       1810              DC.L    $00FFBF80,43
00001B94= 00FEFDFB 00000009       1811              DC.L    $00FEFDFB,9
00001B9C= 00FFBF80 00000028       1812              DC.L    $00FFBF80,40
00001BA4= 00FEFDFB 0000000B       1813              DC.L    $00FEFDFB,11
00001BAC= 00FFBF80 00000026       1814              DC.L    $00FFBF80,38
00001BB4= 00FEFDFB 0000000C       1815              DC.L    $00FEFDFB,12
00001BBC= 00FFBF80 00000026       1816              DC.L    $00FFBF80,38
00001BC4= 00FEFDFB 0000000C       1817              DC.L    $00FEFDFB,12
00001BCC= 00FFBF80 00000026       1818              DC.L    $00FFBF80,38
00001BD4= 00FEFDFB 0000000C       1819              DC.L    $00FEFDFB,12
00001BDC= 00FFBF80 00000021       1820              DC.L    $00FFBF80,33
00001BE4= 00FEFDFB 00000015       1821              DC.L    $00FEFDFB,21
00001BEC= 00FFBF80 0000001C       1822              DC.L    $00FFBF80,28
00001BF4= 00FEFDFB 00000017       1823              DC.L    $00FEFDFB,23
00001BFC= 00FFBF80 00000001       1824              DC.L    $00FFBF80,1
00001C04= 00FEFDFB 00000001       1825              DC.L    $00FEFDFB,1
00001C0C= 00FFBF80 00000007       1826              DC.L    $00FFBF80,7
00001C14= 00FEFDFB 00000003       1827              DC.L    $00FEFDFB,3
00001C1C= 00FFBF80 0000000F       1828              DC.L    $00FFBF80,15
00001C24= 00FEFDFB 0000001C       1829              DC.L    $00FEFDFB,28
00001C2C= 00FFBF80 00000003       1830              DC.L    $00FFBF80,3
00001C34= 00FEFDFB 00000004       1831              DC.L    $00FEFDFB,4
00001C3C= 00FFBF80 0000000F       1832              DC.L    $00FFBF80,15
00001C44= 00FEFDFB 0000001C       1833              DC.L    $00FEFDFB,28
00001C4C= 00FFBF80 00000002       1834              DC.L    $00FFBF80,2
00001C54= 00FEFDFB 00000005       1835              DC.L    $00FEFDFB,5
00001C5C= 00FFBF80 00000008       1836              DC.L    $00FFBF80,8
00001C64= 00FEFDFB 00000002       1837              DC.L    $00FEFDFB,2
00001C6C= 00FFBF80 00000004       1838              DC.L    $00FFBF80,4
00001C74= 00FEFDFB 0000001E       1839              DC.L    $00FEFDFB,30
00001C7C= 00FFBF80 00000002       1840              DC.L    $00FFBF80,2
00001C84= 00FEFDFB 00000004       1841              DC.L    $00FEFDFB,4
00001C8C= 00FFBF80 00000003       1842              DC.L    $00FFBF80,3
00001C94= 00FEFDFB 00000001       1843              DC.L    $00FEFDFB,1
00001C9C= 00FFBF80 00000003       1844              DC.L    $00FFBF80,3
00001CA4= 00FEFDFB 00000004       1845              DC.L    $00FEFDFB,4
00001CAC= 00FFBF80 00000003       1846              DC.L    $00FFBF80,3
00001CB4= 00FEFDFB 0000001E       1847              DC.L    $00FEFDFB,30
00001CBC= 00FFBF80 00000002       1848              DC.L    $00FFBF80,2
00001CC4= 00FEFDFB 00000004       1849              DC.L    $00FEFDFB,4
00001CCC= 00FFBF80 00000002       1850              DC.L    $00FFBF80,2
00001CD4= 00FEFDFB 00000003       1851              DC.L    $00FEFDFB,3
00001CDC= 00FFBF80 00000001       1852              DC.L    $00FFBF80,1
00001CE4= 00FEFDFB 00000005       1853              DC.L    $00FEFDFB,5
00001CEC= 00FFBF80 00000004       1854              DC.L    $00FFBF80,4
00001CF4= 00FEFDFB 0000001C       1855              DC.L    $00FEFDFB,28
00001CFC= 00FFBF80 00000004       1856              DC.L    $00FFBF80,4
00001D04= 00FEFDFB 00000002       1857              DC.L    $00FEFDFB,2
00001D0C= 00FFBF80 00000008       1858              DC.L    $00FFBF80,8
00001D14= 00FEFDFB 00000003       1859              DC.L    $00FEFDFB,3
00001D1C= 00FFBF80 00000005       1860              DC.L    $00FFBF80,5
00001D24= 00FEFDFB 0000001B       1861              DC.L    $00FEFDFB,27
00001D2C= 00FFBF80 00000040       1862              DC.L    $00FFBF80,64
00001D34= FFFFFFFF                1863              DC.L    $FFFFFFFF
00001D38                          1864  
00001D38                          1865  
00001D38= 0031                    1866  CLOUD3W     DC.W    49
00001D3A                          1867  CLOUD3
00001D3A= 00FFBF80 00000012       1868              DC.L    $00FFBF80,18
00001D42= 00FEFDFB 00000003       1869              DC.L    $00FEFDFB,3
00001D4A= 00FFBF80 00000009       1870              DC.L    $00FFBF80,9
00001D52= 00FEFDFB 00000004       1871              DC.L    $00FEFDFB,4
00001D5A= 00FFBF80 00000007       1872              DC.L    $00FFBF80,7
00001D62= 00FEFDFB 00000009       1873              DC.L    $00FEFDFB,9
00001D6A= 00FFBF80 00000003       1874              DC.L    $00FFBF80,3
00001D72= 00FEFDFB 0000000A       1875              DC.L    $00FEFDFB,10
00001D7A= 00FFBF80 00000003       1876              DC.L    $00FFBF80,3
00001D82= 00FEFDFB 0000000A       1877              DC.L    $00FEFDFB,10
00001D8A= 00FFBF80 0000001C       1878              DC.L    $00FFBF80,28
00001D92= FFFFFFFF                1879              DC.L    $FFFFFFFF
00001D96                          1880  
00001D96                          1881  
00001D96= 00AF                    1882  CLOUD4W     DC.W    175
00001D98                          1883  CLOUD4
00001D98= 00FFBF80 0000003C       1884              DC.L    $00FFBF80,60
00001DA0= 00FEFDFB 00000006       1885              DC.L    $00FEFDFB,6
00001DA8= 00FFBF80 00000024       1886              DC.L    $00FFBF80,36
00001DB0= 00FEFDFB 00000009       1887              DC.L    $00FEFDFB,9
00001DB8= 00FFBF80 00000022       1888              DC.L    $00FFBF80,34
00001DC0= 00FEFDFB 0000000C       1889              DC.L    $00FEFDFB,12
00001DC8= 00FFBF80 0000001F       1890              DC.L    $00FFBF80,31
00001DD0= 00FEFDFB 0000000D       1891              DC.L    $00FEFDFB,13
00001DD8= 00FFBF80 0000001F       1892              DC.L    $00FFBF80,31
00001DE0= 00FEFDFB 0000000E       1893              DC.L    $00FEFDFB,14
00001DE8= 00FFBF80 0000001E       1894              DC.L    $00FFBF80,30
00001DF0= 00FEFDFB 0000000E       1895              DC.L    $00FEFDFB,14
00001DF8= 00FFBF80 00000019       1896              DC.L    $00FFBF80,25
00001E00= 00FEFDFB 00000015       1897              DC.L    $00FEFDFB,21
00001E08= 00FFBF80 00000016       1898              DC.L    $00FFBF80,22
00001E10= 00FEFDFB 00000017       1899              DC.L    $00FEFDFB,23
00001E18= 00FFBF80 0000000A       1900              DC.L    $00FFBF80,10
00001E20= 00FEFDFB 00000002       1901              DC.L    $00FEFDFB,2
00001E28= 00FFBF80 00000008       1902              DC.L    $00FFBF80,8
00001E30= 00FEFDFB 00000019       1903              DC.L    $00FEFDFB,25
00001E38= 00FFBF80 00000008       1904              DC.L    $00FFBF80,8
00001E40= 00FEFDFB 00000005       1905              DC.L    $00FEFDFB,5
00001E48= 00FFBF80 00000006       1906              DC.L    $00FFBF80,6
00001E50= 00FEFDFB 00000019       1907              DC.L    $00FEFDFB,25
00001E58= 00FFBF80 00000008       1908              DC.L    $00FFBF80,8
00001E60= 00FEFDFB 00000005       1909              DC.L    $00FEFDFB,5
00001E68= 00FFBF80 00000003       1910              DC.L    $00FFBF80,3
00001E70= 00FEFDFB 00000020       1911              DC.L    $00FEFDFB,32
00001E78= 00FFBF80 00000004       1912              DC.L    $00FFBF80,4
00001E80= 00FEFDFB 00000005       1913              DC.L    $00FEFDFB,5
00001E88= 00FFBF80 00000002       1914              DC.L    $00FFBF80,2
00001E90= 00FEFDFB 00000021       1915              DC.L    $00FEFDFB,33
00001E98= 00FFBF80 00000004       1916              DC.L    $00FFBF80,4
00001EA0= 00FEFDFB 00000005       1917              DC.L    $00FEFDFB,5
00001EA8= 00FFBF80 00000002       1918              DC.L    $00FFBF80,2
00001EB0= 00FEFDFB 00000022       1919              DC.L    $00FEFDFB,34
00001EB8= 00FFBF80 00000035       1920              DC.L    $00FFBF80,53
00001EC0= FFFFFFFF                1921              DC.L    $FFFFFFFF
00001EC4                          1922  
00001EC4                          1923  
00001EC4= 0089                    1924  CLOUD5W     DC.W    137
00001EC6                          1925  CLOUD5
00001EC6= 00FFBF80 0000002F       1926              DC.L    $00FFBF80,47
00001ECE= 00FEFDFB 00000009       1927              DC.L    $00FEFDFB,9
00001ED6= 00FFBF80 00000019       1928              DC.L    $00FFBF80,25
00001EDE= 00FEFDFB 0000000B       1929              DC.L    $00FEFDFB,11
00001EE6= 00FFBF80 00000018       1930              DC.L    $00FFBF80,24
00001EEE= 00FEFDFB 0000000B       1931              DC.L    $00FEFDFB,11
00001EF6= 00FFBF80 00000017       1932              DC.L    $00FFBF80,23
00001EFE= 00FEFDFB 0000000C       1933              DC.L    $00FEFDFB,12
00001F06= 00FFBF80 00000001       1934              DC.L    $00FFBF80,1
00001F0E= 00FEFDFB 00000003       1935              DC.L    $00FEFDFB,3
00001F16= 00FFBF80 00000010       1936              DC.L    $00FFBF80,16
00001F1E= 00FEFDFB 00000015       1937              DC.L    $00FEFDFB,21
00001F26= 00FFBF80 0000000E       1938              DC.L    $00FFBF80,14
00001F2E= 00FEFDFB 00000015       1939              DC.L    $00FEFDFB,21
00001F36= 00FFBF80 0000000D       1940              DC.L    $00FFBF80,13
00001F3E= 00FEFDFB 00000016       1941              DC.L    $00FEFDFB,22
00001F46= 00FFBF80 00000001       1942              DC.L    $00FFBF80,1
00001F4E= 00FEFDFB 00000001       1943              DC.L    $00FEFDFB,1
00001F56= 00FFBF80 0000000B       1944              DC.L    $00FFBF80,11
00001F5E= 00FEFDFB 0000001A       1945              DC.L    $00FEFDFB,26
00001F66= 00FFBF80 00000006       1946              DC.L    $00FFBF80,6
00001F6E= 00FEFDFB 0000001D       1947              DC.L    $00FEFDFB,29
00001F76= 00FFBF80 00000004       1948              DC.L    $00FFBF80,4
00001F7E= 00FEFDFB 00000020       1949              DC.L    $00FEFDFB,32
00001F86= 00FFBF80 00000025       1950              DC.L    $00FFBF80,37
00001F8E= FFFFFFFF                1951              DC.L    $FFFFFFFF
00001F92                          1952  
00001F92                          1953  
00001F92= 005D                    1954  CLOUD6W     DC.W    93
00001F94                          1955  CLOUD6
00001F94= 00FFBF80 0000001E       1956              DC.L    $00FFBF80,30
00001F9C= 00FEFDFB 00000005       1957              DC.L    $00FEFDFB,5
00001FA4= 00FFBF80 00000012       1958              DC.L    $00FFBF80,18
00001FAC= 00FEFDFB 00000007       1959              DC.L    $00FEFDFB,7
00001FB4= 00FFBF80 00000003       1960              DC.L    $00FFBF80,3
00001FBC= 00FEFDFB 00000002       1961              DC.L    $00FEFDFB,2
00001FC4= 00FFBF80 0000000C       1962              DC.L    $00FFBF80,12
00001FCC= 00FEFDFB 0000000E       1963              DC.L    $00FEFDFB,14
00001FD4= 00FFBF80 00000009       1964              DC.L    $00FFBF80,9
00001FDC= 00FEFDFB 0000000F       1965              DC.L    $00FEFDFB,15
00001FE4= 00FFBF80 00000009       1966              DC.L    $00FFBF80,9
00001FEC= 00FEFDFB 0000000F       1967              DC.L    $00FEFDFB,15
00001FF4= 00FFBF80 00000008       1968              DC.L    $00FFBF80,8
00001FFC= 00FEFDFB 00000010       1969              DC.L    $00FEFDFB,16
00002004= 00FFBF80 00000007       1970              DC.L    $00FFBF80,7
0000200C= 00FEFDFB 00000013       1971              DC.L    $00FEFDFB,19
00002014= 00FFBF80 00000004       1972              DC.L    $00FFBF80,4
0000201C= 00FEFDFB 00000015       1973              DC.L    $00FEFDFB,21
00002024= 00FFBF80 00000003       1974              DC.L    $00FFBF80,3
0000202C= 00FEFDFB 00000014       1975              DC.L    $00FEFDFB,20
00002034= 00FFBF80 0000001B       1976              DC.L    $00FFBF80,27
0000203C= FFFFFFFF                1977              DC.L    $FFFFFFFF
00002040                          1978  
00002040                          1979  
00002040= 0077                    1980  CLOUD7W     DC.W    119
00002042                          1981  CLOUD7
00002042= 00FFBF80 00000029       1982              DC.L    $00FFBF80,41
0000204A= 00FEFDFB 00000006       1983              DC.L    $00FEFDFB,6
00002052= 00FFBF80 00000016       1984              DC.L    $00FFBF80,22
0000205A= 00FEFDFB 00000009       1985              DC.L    $00FEFDFB,9
00002062= 00FFBF80 00000003       1986              DC.L    $00FFBF80,3
0000206A= 00FEFDFB 00000004       1987              DC.L    $00FEFDFB,4
00002072= 00FFBF80 0000000A       1988              DC.L    $00FFBF80,10
0000207A= 00FEFDFB 00000002       1989              DC.L    $00FEFDFB,2
00002082= 00FFBF80 00000002       1990              DC.L    $00FFBF80,2
0000208A= 00FEFDFB 0000000A       1991              DC.L    $00FEFDFB,10
00002092= 00FFBF80 00000001       1992              DC.L    $00FFBF80,1
0000209A= 00FEFDFB 00000007       1993              DC.L    $00FEFDFB,7
000020A2= 00FFBF80 00000007       1994              DC.L    $00FFBF80,7
000020AA= 00FEFDFB 00000017       1995              DC.L    $00FEFDFB,23
000020B2= 00FFBF80 00000006       1996              DC.L    $00FFBF80,6
000020BA= 00FEFDFB 00000018       1997              DC.L    $00FEFDFB,24
000020C2= 00FFBF80 00000006       1998              DC.L    $00FFBF80,6
000020CA= 00FEFDFB 00000019       1999              DC.L    $00FEFDFB,25
000020D2= 00FFBF80 00000004       2000              DC.L    $00FFBF80,4
000020DA= 00FEFDFB 0000001A       2001              DC.L    $00FEFDFB,26
000020E2= 00FFBF80 00000003       2002              DC.L    $00FFBF80,3
000020EA= 00FEFDFB 0000001C       2003              DC.L    $00FEFDFB,28
000020F2= 00FFBF80 00000002       2004              DC.L    $00FFBF80,2
000020FA= 00FEFDFB 0000001C       2005              DC.L    $00FEFDFB,28
00002102= 00FFBF80 0000000A       2006              DC.L    $00FFBF80,10
0000210A= 00FEFDFB 00000004       2007              DC.L    $00FEFDFB,4
00002112= 00FFBF80 0000002F       2008              DC.L    $00FFBF80,47
0000211A= FFFFFFFF                2009              DC.L    $FFFFFFFF
0000211E                          2010  
0000211E                          2011  
0000211E                          2012  -------------------- end include --------------------
0000211E                          2013              
0000211E                          2014  
0000211E                          2015  START
0000211E                          2016  
0000211E                          2017  ; --- INITIALIZATION ----------------------------------------------------------
0000211E                          2018  
0000211E  007C 0700               2019              ORI.W   #$0700,SR
00002122  4EB8 12AC               2020              JSR     SYSINIT
00002126  4EB8 1146               2021              JSR     UTLINIT
0000212A  4EB8 1410               2022              JSR     STAINIT
0000212E                          2023              
0000212E                          2024  .LOOP
0000212E                          2025  
0000212E                          2026  ; --- UPDATE ------------------------------------------------------------------
0000212E                          2027  
0000212E                          2028              ; READ INPUT DEVICES
0000212E                          2029  
0000212E  4E41                    2030              TRAP    #KBDUPDTN
00002130                          2031  
00002130  4EB8 1420               2032              JSR     STAUPD
00002134                          2033              
00002134                          2034  ; --- SYNC --------------------------------------------------------------------
00002134                          2035  
00002134  4A39 00002154           2036  .WINT       TST.B   (SCRINTCT)
0000213A  67F8                    2037              BEQ     .WINT
0000213C  4239 00002154           2038              CLR.B   (SCRINTCT)
00002142                          2039              
00002142                          2040  ; --- PLOT --------------------------------------------------------------------
00002142                          2041  
00002142  4EB8 17C4               2042              JSR     BACKPLOT
00002146  4EB8 1486               2043              JSR     STAPLOT
0000214A                          2044              
0000214A  4E40                    2045              TRAP    #SCRUPDTN
0000214C                          2046              
0000214C  60E0                    2047              BRA     .LOOP
0000214E                          2048              
0000214E  FFFF FFFF               2049              SIMHALT
00002152                          2050              
00002152                          2051  ; --- VARIABLES ---------------------------------------------------------------
00002152                          2052              
00002152                          2053              INCLUDE "SYSVARS.X68"       ; SYSTEM VARIABLES
00002152                          2054  ; =============================================================================
00002152                          2055  ; SYSTEM VARIABLES
00002152                          2056  ; =============================================================================
00002152                          2057  
00002152                          2058  ; --- KEYBOARD RELATED VARIABLES ----------------------------------------------
00002152                          2059  
00002152                          2060  KBDVAL      DS.B    1                       ; KEY STATE
00002153                          2061  KBDEDGE     DS.B    1                       ; KEY EDGE
00002154                          2062  
00002154                          2063  ; --- TIMED INTERRUPT RELATED VARIABLES ---------------------------------------
00002154                          2064  
00002154                          2065  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
00002155                          2066  SCRCYCCT    DS.B    1                       ; SCREEN CYCLE COUNTER
00002156= 00                      2067  GAMCYCCT    DC.B    0                       ; GAME CYCLE COUNTER
00002158                          2068              DS.W    0
00002158                          2069              
00002158                          2070  ; --- FILE PATHS --------------------------------------------------------------
00002158                          2071  
00002158= 44 41 54 41 2F 53 ...   2072  SCOPATH     DC.B     'DATA/SCORES.dat',0
00002168                          2073              DS.W     0
00002168                          2074  
00002168                          2075  
00002168                          2076  
00002168                          2077  
00002168                          2078  -------------------- end include --------------------
00002168                          2079              INCLUDE "VARS.X68"          ; GAME VARIABLES
00002168                          2080  ; =============================================================================
00002168                          2081  ; GAME VARIABLES
00002168                          2082  ; =============================================================================
00002168                          2083  
00002168                          2084  ; --- BIRD RELATED VARIABLES --------------------------------------------------
00002168                          2085  
00002168= 00F0                    2086  BIRDPOSY    DC.W    SCRHEIGH/2         ; BIRD POSITION Y
0000216A= 0000                    2087  BIRDVELY    DC.W    0                   ; BIRD SPEED Y
0000216C= BBBB                    2088  BIRDPCOL    DC.W    DKYELLOW            ; BIRD PEN COLOR
0000216E= FFFF                    2089  BIRDFCOL    DC.W    LGYELLOW            ; BIRD FILL COLOR
00002170                          2090  
00002170                          2091  ; --- SCOREBOARD RELATED VARIABLES --------------------------------------------
00002170                          2092  
00002170                          2093  SCORE       DS.W    1                   ; ACTUAL GAME SCORE
00002172                          2094  HIGHSCO     DS.W    1                   ; HIGH SCORE
00002174                          2095  
00002174                          2096  ;  --- STATE RELATED VARIABLES ------------------------------------------------
00002174                          2097  
00002174                          2098  STACUR      DS.W    1                   ; CURRENT STATE
00002176                          2099  STANEXT     DS.W    1                   ; NEXT STATE
00002178                          2100  
00002178                          2101  
00002178                          2102  
00002178                          2103  
00002178                          2104  
00002178                          2105  
00002178                          2106  
00002178                          2107  -------------------- end include --------------------
00002178                          2108              INCLUDE "LIB/UTLVARS.X68"   ; UTIL CODE VARIABLES
00002178                          2109  ; =============================================================================
00002178                          2110  ; UTILITY VARIABLES
00002178                          2111  ; =============================================================================
00002178                          2112  
00002178                          2113  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
0000217A                          2114              DS.W    0
0000217A                          2115  -------------------- end include --------------------
0000217A                          2116              INCLUDE "LIB/DMMVARS.X68"   ; DYNAMIC MEMORY VARIABLES
0000217A                          2117  ; =============================================================================
0000217A                          2118  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
0000217A                          2119  ; =============================================================================
0000217A                          2120  
00002180                          2121              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00002180                          2122  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00002E00                          2123              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00002E00                          2124  -------------------- end include --------------------
00002E00                          2125  
00002E00                          2126              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              10C2
AGLADD:END          10D8
AGLCLEAN            1126
AGLCLEAN:END        1140
AGLCLEAN:LOOP       112A
AGLKILL             10AC
AGLPLOT             1100
AGLPLOT:END         1120
AGLPLOT:LOOP        1108
AGLUPD              10DC
AGLUPD:END          10FA
AGLUPD:LOOP         10E4
BACKPLOT            17C4
BACKUPD             1792
BACKUPD:NONEWCL     17BE
BIRDFCOL            216E
BIRDINIT            15EA
BIRDPCOL            216C
BIRDPLOT            164C
BIRDPOSX            A0
BIRDPOSY            2168
BIRDRAD             F
BIRDUPD             15FA
BIRDUPD:COLBOT      1638
BIRDUPD:CORDUPD     1624
BIRDUPD:DONE        1646
BIRDUPD:NOCOL       1640
BIRDUPD:NOJUMP      161E
BIRDVELY            216A
BLOCKSZ             4
CLDINIT             1936
CLDPLOT             1988
CLDSPMSK            FFFFFFFC
CLDTBL              19B0
CLDUPD              195A
CLDUPD:NOKILL       1982
CLOUD0              1A20
CLOUD0W             1A1E
CLOUD1              1ADE
CLOUD1W             1ADC
CLOUD2              1B7C
CLOUD2W             1B7A
CLOUD3              1D3A
CLOUD3W             1D38
CLOUD4              1D98
CLOUD4W             1D96
CLOUD5              1EC6
CLOUD5W             1EC4
CLOUD6              1F94
CLOUD6W             1F92
CLOUD7              2042
CLOUD7W             2040
CLOUDAGT            2
DARKRED             BB
DKYELLOW            BBBB
DMMALLOC            1092
DMMALLOC:END        10AA
DMMBNUM             32
DMMBSIZE            40
DMMDATA             2180
DMMFCOM             106C
DMMFFND             107A
DMMFIRST            1022
DMMFLOOP            1060
DMMFRCOM            1034
DMMFREE             10AC
DMMFRFND            1042
DMMFRLOP            1028
DMMFRSTO            105A
DMMINIT             1000
DMMINIT:LOOP        100E
DMMNEXT             1044
DMMNEXTO            107C
DMMSYSID            0
FLOCOLOR            35DE3B
FLOHEIGH            3C
FLOPLOT             1800
GAMCYCCT            2156
GAMEINIT            14FC
GAMEPLOT            1576
GAMEUPD             1508
GAMEUPD:NOPAUSE     1530
GOVINIT             15BE
GOVPLOT             15E4
GOVUPD              15C2
GOVUPD:CONT         15E0
HIGHSCO             2172
HSCOLINE            101E
IMGPLOT             19D0
IMGPLOT:ENDFLAG     FFFFFFFF
IMGPLOT:LOOP1       19E0
IMGPLOT:LOOP2       19EE
IMGPLOT:SAMEROW     1A0A
IMGPLOT:STARTX      1A1C
INSINIT             14F6
INSPLOT             14FA
INSUPD              14F8
ISCINIT             14B8
ISCPLOT             14F0
ISCUPD              14CE
ISCUPD:CONT         14EE
JUMPVELY            FFFFFFF6
KBDEDGE             2153
KBDINIT             13C2
KBDP                50
KBDSPACE            20
KBDUPD              13D0
KBDUPD:LOOP         1406
KBDUPD:PACK         1402
KBDUPDTN            1
KBDVAL              2152
LGGREEN             35DE3B
LGYELLOW            FFFF
LIGHTRED            FF
MASKNWCL            7F
MASKNWPP            3F
NEWPIPE             1544
NEWPIPE:GOUPD       1570
PAUSINIT            1584
PAUSINIT:CONT       159C
PAUSPLOT            15BC
PAUSUPD             15A0
PAUSUPD:CONT        15B8
PIPEAGTP            1
PIPEFCOL            20284D
PIPEGAPS            78
PIPEINIT            168E
PIPEPCOL            151A30
PIPEPLOT            1734
PIPEUPD             16A6
PIPEUPD:COL         1706
PIPEUPD:END         172E
PIPEUPD:NOCOL       1720
PIPEUPD:NOKILL      16CE
PIPEVELX            FFFFFFFB
PIPEWIDT            32
PPOPHEIG            F
PPOPOVER            5
SCOFCOL             35DE3B
SCOINC              186C
SCOINIT             1836
SCOLINE             101D
SCOPATH             2158
SCOPLOT             188A
SCOPLOT:HISCOTXT    18E4
SCOPLOT:SCOTXT      18DC
SCORE               2170
SCOSAVE             18F0
SCOSAVE:END         1930
SCRCYCCT            2155
SCRFPS              3C
SCRHEIGH            1E0
SCRINIT             1356
SCRINTCT            2154
SCRINTN             1
SCRPLOT             139A
SCRTIM              13B4
SCRUPDTN            0
SCRWIDTH            280
SKYBLUE             FFBF80
SKYCOLOR            FFBF80
SKYPLOT             17CE
SNDDIE              0
SNDINIT             12EA
SNDINIT:DONE        1308
SNDINIT:LOOP        12F6
SNDINIT:SNDDIE      130E
SNDINIT:SNDJUMP     131A
SNDINIT:SNDLIST     1334
SNDINIT:SNDSCO      1327
SNDJUMP             1
SNDPLAY             1344
SNDPLTN             2
SNDSCO              2
STACUR              2174
STAEMPTY            14B6
STAGAME             2
STAGOVER            4
STAINIT             1410
STAINSTR            1
STAINTRO            0
STANEXT             2176
STANONE             FFFFFFFF
STAPAUSE            3
STAPLOT             1486
STAPLOT:PLTTBL      14A2
START               211E
START:LOOP          212E
START:WINT          2134
STAUPD              1420
STAUPD:DOUPD        1446
STAUPD:INITBL       145E
STAUPD:UPDTBL       1472
SYSINIT             12AC
UTLCHRWD            8
UTLINIT             1146
UTLPRINT            115C
UTLPRINT:ENDLOOP    116E
UTLPRINT:LOOP       1164
UTLRAND             118E
UTLRAND:RANDVEC     11AC
UTLRNDIX            2178
WHITE               FEFDFB
