000017B0 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 06/12/2023 19:35:06

00000000                             1  ; =============================================================================
00000000                             2  ; TITLE       :
00000000                             3  ; DESCRIPTION :
00000000                             4  ; AUTHOR      :
00000000                             5  ; HISTORY     :
00000000                             6  ; =============================================================================
00000000                             7  
00001000                             8              ORG     $1000
00001000                             9              
00001000                            10              ; CONSTANTS INCLUDES
00001000                            11              INCLUDE "SYSCONST.X68"
00001000                            12  ; =============================================================================
00001000                            13  ; SYSTEM CONSTANTS
00001000                            14  ; =============================================================================
00001000                            15  
00001000                            16  ; --- COLORS CONSTANTS 00BBGGRR -----------------------------------------------
00001000                            17  
00001000  =0000BBBB                 18  DKYELLOW    EQU     $0000BBBB           ; DARK YELLOW COLOR
00001000  =0000FFFF                 19  LGYELLOW    EQU     $0000FFFF           ; LIGHT YELLOW COLOR
00001000  =000000BB                 20  DARKRED     EQU     $000000BB           ; DARK RED COLOR
00001000  =000000FF                 21  LIGHTRED    EQU     $000000FF           ; LIGHT RED COLOR
00001000                            22  
00001000                            23  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            24  
00001000  =0000003C                 25  SCRFPS      EQU     60                  ; SCREEN FRAMES PER SECOND
00001000  =00000280                 26  SCRWIDTH    EQU     640                 ; SCREEN WIDTH
00001000  =000001E0                 27  SCRHEIGH    EQU     480                 ; SCREEN HEIGHT
00001000                            28  
00001000                            29  ; --- KEYCODES ----------------------------------------------------------------
00001000                            30  
00001000  =00000020                 31  KBDSPACE    EQU     ' '
00001000                            32  
00001000                            33  ; --- SOUND IDENTIFIERS -------------------------------------------------------
00001000                            34  
00001000  =00000000                 35  SNDDIE      EQU     0
00001000  =00000001                 36  SNDJUMP     EQU     1
00001000  =00000002                 37  SNDSCO      EQU     2
00001000                            38  
00001000                            39  ; --- TRAP NUMBERS ------------------------------------------------------------
00001000                            40  
00001000  =00000000                 41  SCRUPDTN    EQU     0                   ; SCREEN UPDATE TRAP NUMBER
00001000  =00000001                 42  KBDUPDTN    EQU     1                   ; KEYBOARD UPDATE TRAP NUMBER
00001000  =00000002                 43  SNDPLTN     EQU     2                   ; SOUND PLAY TRAP NUMBER
00001000                            44  
00001000                            45  ; --- INTERRUPTION NUMBERS ----------------------------------------------------
00001000                            46  
00001000  =00000001                 47  SCRINTN     EQU     1                   ; SCREEN INTERRUPT TRAP NUMBER    
00001000                            48  
00001000                            49  
00001000                            50  
00001000                            51  
00001000                            52  
00001000                            53  
00001000                            54  
00001000                            55  
00001000                            56  -------------------- end include --------------------
00001000                            57              INCLUDE "CONST.X68"
00001000                            58  ; =============================================================================
00001000                            59  ; GAME CONSTANTS
00001000                            60  ; =============================================================================
00001000                            61  
00001000                            62  ; --- BIRD RELATED CONSTANTS --------------------------------------------------
00001000                            63  
00001000  =FFFFFFF6                 64  JUMPVELY    EQU     -10
00001000  =000000A0                 65  BIRDPOSX    EQU     SCRWIDTH/4
00001000                            66          ; THE FOLLOWING CONSTANTS WILL BE REMOVED WHEN USE AN IMAGE AS A BIRD
00001000  =0000000F                 67  BIRDRAD     EQU     15                  ; BIRD RADIUS
00001000                            68  
00001000                            69  ; --- PIPE RELATED CONSTANTS --------------------------------------------------
00001000                            70  
00001000  =00151A30                 71  PIPEPCOL    EQU     $00151A30           ; PIPE PEN COLOR
00001000  =0020284D                 72  PIPEFCOL    EQU     $0020284D           ; PIPE FILL COLOR
00001000  =FFFFFFFB                 73  PIPEVELX    EQU     -5                  ; PIPE X SPEED
00001000  =00000032                 74  PIPEWIDT    EQU     50                  ; PIPE WIDTH
00001000  =00000078                 75  PIPEGAPS    EQU     120                 ; PIPE GAP SIZE
00001000  =00000001                 76  PIPEAGTP    EQU     1                   ; PIPE AGENT TYPE CODE
00001000  =0000003F                 77  MASKNWPP    EQU     %00111111           ; NEW PIPE MASK 
00001000                            78  
00001000                            79  ; --- BACKGROUND RELATED CONSTANTS --------------------------------------------
00001000                            80  
00001000  =00FFBF80                 81  SKYCOLOR    EQU     $00FFBF80           ; SKY BACKGROUND COLOR
00001000  =0035DE3B                 82  FLOCOLOR    EQU     $0035DE3B           ; FLOOR BACKGROUND COLOR
00001000  =0000003C                 83  FLOHEIGH    EQU     60                  ; FLOOR HEIGHT
00001000                            84  
00001000                            85  ; --- SCOREBOARD RELATED CONSTANTS --------------------------------------------
00001000                            86  
00001000  =0035DE3B                 87  SCOFCOL     EQU     FLOCOLOR           ; TEXT BACKGROUND COLOR
00001000  =0000101D                 88  SCOLINE     EQU     $101D              ; SCORE TEXT COORDINATE 
00001000  =0000101E                 89  HSCOLINE    EQU     $101E              ; HIGHSCORE TEXT COORDINATE
00001000                            90  
00001000                            91  ; --- STATE RELATED CONSTANTS -------------------------------------------------
00001000                            92  
00001000  =FFFFFFFF                 93  STANONE     EQU     -1                 ; NON-EXISTENT STATE NUMBER
00001000  =00000000                 94  STAINTRO    EQU     0                  ; INTRO SCREEN STATE NUMBER
00001000  =00000001                 95  STAINSTR    EQU     1                  ; INSTRUCTION STATE NUMBER
00001000  =00000002                 96  STAGAME     EQU     2                  ; GAME SCREEN STATE NUMBER
00001000  =00000003                 97  STAPAUSE    EQU     3                  ; PAUSE SCREEN STATE NUMBER
00001000  =00000004                 98  STAGOVER    EQU     4                  ; GAME OVER SCREEN STATE NUMBER
00001000                            99  
00001000                           100  
00001000                           101  
00001000                           102  
00001000                           103  
00001000                           104  
00001000                           105  
00001000                           106  
00001000                           107  
00001000                           108  
00001000                           109  
00001000                           110  
00001000                           111  
00001000                           112  
00001000                           113  -------------------- end include --------------------
00001000                           114              ; LIB INCLUDES
00001000                           115              INCLUDE "LIB/DMMCONST.X68"
00001000                           116  ; =============================================================================
00001000                           117  ; DYNAMIC MEMORY MANAGEMENT CONSTANTS (SYSTEM CONSTANTS)
00001000                           118  ; =============================================================================
00001000                           119  
00001000  =00000040                120  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                121  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                122  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000  =00000000                123  -------------------- end include --------------------
00001000                           124              INCLUDE "LIB/UTLCONST.X68"
00001000                           125  ; ==============================================================================
00001000                           126  ; UTIL CONSTANTS
00001000                           127  ; ==============================================================================
00001000                           128  
00001000  =00000008                129  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
00001000  =00000008                130  -------------------- end include --------------------
00001000                           131              INCLUDE "LIB/DMMCODE.X68"
00001000                           132  ; =============================================================================
00001000                           133  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001000                           134  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001000                           135  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001000                           136  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001000                           137  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001000                           138  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001000                           139  ; =============================================================================
00001000                           140  
00001000                           141  ; -----------------------------------------------------------------------------
00001000                           142  DMMINIT
00001000                           143  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001000                           144  ; INPUT    - NONE
00001000                           145  ; OUTPUT   - NONE
00001000                           146  ; MODIFIES - NONE
00001000                           147  ; -----------------------------------------------------------------------------
00001000  48E7 8080                148              MOVEM.L D0/A0,-(A7)
00001004  41F9 00001800            149              LEA     DMMDATA,A0
0000100A  303C 0031                150              MOVE.W  #DMMBNUM-1,D0
0000100E  30BC 0000                151  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001012  D1FC 00000040            152              ADD.L   #DMMBSIZE,A0
00001018  51C8 FFF4                153              DBRA.W  D0,.LOOP
0000101C  4CDF 0101                154              MOVEM.L (A7)+,D0/A0
00001020  4E75                     155              RTS
00001022                           156  
00001022                           157  ; -----------------------------------------------------------------------------
00001022                           158  DMMFIRST
00001022                           159  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001022                           160  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001022                           161  ; INPUT    - NONE
00001022                           162  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001022                           163  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001022                           164  ; -----------------------------------------------------------------------------
00001022  41F9 00001800            165              LEA     DMMDATA,A0
00001028  4A58                     166  DMMFRLOP    TST.W   (A0)+
0000102A  6600 0016                167              BNE     DMMFRFND
0000102E  D1FC 0000003E            168              ADD.L   #DMMBSIZE-2,A0
00001034  B1FC 0000247F            169  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000103A  6DEC                     170              BLT     DMMFRLOP
0000103C  207C 00000000            171              MOVE.L  #0,A0
00001042  4E75                     172  DMMFRFND    RTS
00001044                           173  
00001044                           174  ; -----------------------------------------------------------------------------
00001044                           175  DMMNEXT
00001044                           176  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001044                           177  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001044                           178  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001044                           179  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001044                           180  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001044                           181  ; -----------------------------------------------------------------------------
00001044  2F00                     182              MOVE.L  D0,-(A7)
00001046  2008                     183              MOVE.L  A0,D0
00001048  C0BC FFFFFFC0            184              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000104E  0680 00000040            185              ADD.L   #DMMBSIZE,D0
00001054  2040                     186              MOVE.L  D0,A0
00001056  201F                     187              MOVE.L  (A7)+,D0
00001058  60DA                     188              BRA     DMMFRCOM
0000105A                           189  
0000105A                           190  ; -----------------------------------------------------------------------------
0000105A                           191  DMMFRSTO
0000105A                           192  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000105A                           193  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000105A                           194  ; INPUT    - D0.W : ID TO SEARCH
0000105A                           195  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000105A                           196  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000105A                           197  ; -----------------------------------------------------------------------------
0000105A  41F9 00001800            198              LEA     DMMDATA,A0
00001060  B058                     199  DMMFLOOP    CMP.W   (A0)+,D0
00001062  6700 0016                200              BEQ     DMMFFND
00001066  D1FC 0000003E            201              ADD.L   #DMMBSIZE-2,A0
0000106C  B1FC 0000247F            202  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001072  6DEC                     203              BLT     DMMFLOOP
00001074  207C 00000000            204              MOVE.L  #0,A0
0000107A  4E75                     205  DMMFFND     RTS
0000107C                           206  
0000107C                           207  ; -----------------------------------------------------------------------------
0000107C                           208  DMMNEXTO
0000107C                           209  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000107C                           210  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000107C                           211  ; INPUT    - D0.W : ID TO SEARCH
0000107C                           212  ;            A0   : POINTER WITHIN THE CURRENT SLOT
0000107C                           213  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000107C                           214  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000107C                           215  ; -----------------------------------------------------------------------------
0000107C  2F00                     216              MOVE.L  D0,-(A7)
0000107E  2008                     217              MOVE.L  A0,D0
00001080  C0BC FFFFFFC0            218              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001086  0680 00000040            219              ADD.L   #DMMBSIZE,D0
0000108C  2040                     220              MOVE.L  D0,A0
0000108E  201F                     221              MOVE.L  (A7)+,D0
00001090  60DA                     222              BRA     DMMFCOM
00001092                           223  
00001092                           224  ; -----------------------------------------------------------------------------
00001092                           225  DMMALLOC
00001092                           226  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
00001092                           227  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
00001092                           228  ; INPUT    - D0.W : ID TO ASSIGN
00001092                           229  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
00001092                           230  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001092                           231  ; -----------------------------------------------------------------------------
00001092  3F00                     232              MOVE.W  D0,-(A7)
00001094  4240                     233              CLR.W   D0
00001096  4EB8 105A                234              JSR     DMMFRSTO
0000109A  301F                     235              MOVE.W  (A7)+,D0
0000109C  B1FC 00000000            236              CMP.L   #0,A0
000010A2  6700 0006                237              BEQ     .END
000010A6  3140 FFFE                238              MOVE.W  D0,-2(A0)
000010AA  4E75                     239  .END        RTS
000010AC                           240  
000010AC                           241  ; -----------------------------------------------------------------------------
000010AC                           242  DMMFREE
000010AC                           243  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000010AC                           244  ; SYSTEM (0)
000010AC                           245  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000010AC                           246  ; OUTPUT   - NONE
000010AC                           247  ; MODIFIES - NONE
000010AC                           248  ; -----------------------------------------------------------------------------
000010AC  48E7 8080                249              MOVEM.L D0/A0,-(A7)
000010B0  2008                     250              MOVE.L  A0,D0
000010B2  C0BC FFFFFFC0            251              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000010B8  2040                     252              MOVE.L  D0,A0
000010BA  4250                     253              CLR.W   (A0)
000010BC  4CDF 0101                254              MOVEM.L (A7)+,D0/A0
000010C0  4E75                     255              RTS
000010C0  4E75                     256  -------------------- end include --------------------
000010C2                           257              INCLUDE "LIB/AGLCODE.X68"
000010C2                           258  ; =============================================================================
000010C2                           259  ; AGENT MANAGEMENT
000010C2                           260  ; EACH AGENT HAS A DATA BLOCK FROM DMM AS FOLLOWS:
000010C2                           261  ; +0 - LONG : UPDATE SUBROUTINE POINTER
000010C2                           262  ; +4 - LONG : PLOT SUBROUTINE POINTER
000010C2                           263  ; +8:END    : DATA (AGENT SPECIFIC)
000010C2                           264  ; =============================================================================
000010C2                           265  
000010C2                           266  ; -----------------------------------------------------------------------------
000010C2                           267  AGLADD
000010C2                           268  ; CREATES A NEW AGENT
000010C2                           269  ; INPUT    - A1 - POINTER TO AGENT INIT FUNCTION
000010C2                           270  ;            A2 - POINTER TO AGENT UPDATE FUNCTION
000010C2                           271  ;            A3 - POINTER TO AGENT PLOT FUNCTION
000010C2                           272  ;            D0 - AGENT TYPE (USED AS OWNER BY DMM)
000010C2                           273  ;            D1 - AGENT INITIALIZATION PARAMETER 1
000010C2                           274  ;            D2 - AGENT INITIALIZATION PARAMETER 2
000010C2                           275  ;            D3 - AGENT INITIALIZATION PARAMETER 3
000010C2                           276  ; OUTPUT   - NONE
000010C2                           277  ; MODIFIES - NONE
000010C2                           278  ; -----------------------------------------------------------------------------
000010C2  2F08                     279              MOVE.L  A0,-(A7)
000010C4  4EB8 1092                280              JSR     DMMALLOC
000010C8  B1FC 00000000            281              CMP.L   #0,A0
000010CE  6700 0008                282              BEQ     .END
000010D2  20CA                     283              MOVE.L  A2,(A0)+
000010D4  20CB                     284              MOVE.L  A3,(A0)+
000010D6  4E91                     285              JSR     (A1)
000010D8  205F                     286  .END        MOVE.L  (A7)+,A0
000010DA  4E75                     287              RTS
000010DC                           288  
000010DC                           289  ; -----------------------------------------------------------------------------
000010DC                           290  AGLUPD
000010DC                           291  ; UPDATES THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
000010DC                           292  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
000010DC                           293  ; INPUT    - NONE
000010DC                           294  ; OUTPUT   - NONE
000010DC                           295  ; MODIFIES - NONE
000010DC                           296  ; -----------------------------------------------------------------------------
000010DC  48E7 00C0                297              MOVEM.L A0-A1,-(A7)
000010E0  4EB8 1022                298              JSR     DMMFIRST
000010E4  B1FC 00000000            299  .LOOP       CMP.L   #0,A0
000010EA  6700 000E                300              BEQ     .END
000010EE  2250                     301              MOVE.L  (A0),A1
000010F0  5088                     302              ADD.L   #8,A0
000010F2  4E91                     303              JSR     (A1)
000010F4  4EB8 1044                304              JSR     DMMNEXT
000010F8  60EA                     305              BRA     .LOOP
000010FA  4CDF 0300                306  .END        MOVEM.L (A7)+,A0-A1
000010FE  4E75                     307              RTS
00001100                           308  
00001100                           309  ; -----------------------------------------------------------------------------
00001100                           310  AGLPLOT
00001100                           311  ; PLOTS THE AGENT LIST. PRIOR TO CALLING THE UPDATE FUNCTIONS, A0 IS SET
00001100                           312  ; TO THE DATA BLOCK OF THE CORRESPONDING SLOT.
00001100                           313  ; INPUT    - NONE
00001100                           314  ; OUTPUT   - NONE
00001100                           315  ; MODIFIES - NONE
00001100                           316  ; -----------------------------------------------------------------------------
00001100  48E7 00C0                317              MOVEM.L A0-A1,-(A7)
00001104  4EB8 1022                318              JSR     DMMFIRST
00001108  B1FC 00000000            319  .LOOP       CMP.L   #0,A0
0000110E  6700 0010                320              BEQ     .END
00001112  2268 0004                321              MOVE.L  4(A0),A1
00001116  5088                     322              ADD.L   #8,A0
00001118  4E91                     323              JSR     (A1)
0000111A  4EB8 1044                324              JSR     DMMNEXT
0000111E  60E8                     325              BRA     .LOOP
00001120  4CDF 0300                326  .END        MOVEM.L (A7)+,A0-A1
00001124  4E75                     327              RTS
00001126                           328  
00001126                           329  ; -----------------------------------------------------------------------------
00001126  =000010AC                330  AGLKILL     EQU     DMMFREE
00001126                           331  ; KILLS THE AGENT BY RELEASING ITS MEMORY
00001126                           332  ; INPUT    - A0 POINTER WITHIN THE AGENT MEMORY
00001126                           333  ; OUTPUT   - NONE
00001126                           334  ; MODIFIES - NONE
00001126                           335  ; NOTE     - IT IS JUST A WRAPPER FOR DMMFREE
00001126                           336  ; -----------------------------------------------------------------------------
00001126                           337  -------------------- end include --------------------
00001126                           338              INCLUDE "LIB/UTLCODE.X68"
00001126                           339  ; =============================================================================
00001126                           340  ; UTILITY CODE
00001126                           341  ; =============================================================================
00001126                           342  
00001126                           343  ; -----------------------------------------------------------------------------
00001126                           344  UTLINIT
00001126                           345  ; INITIALIZES UTILITY CODE
00001126                           346  ; INPUT    - NONE
00001126                           347  ; OUTPUT   - NONE
00001126                           348  ; MODIFIES - NONE
00001126                           349  ; -----------------------------------------------------------------------------
00001126  48E7 C000                350              MOVEM.L D0-D1,-(A7)
0000112A  103C 0008                351              MOVE.B  #8,D0
0000112E  4E4F                     352              TRAP    #15
00001130  13C1 000017F4            353              MOVE.B  D1,(UTLRNDIX)
00001136  4CDF 0003                354              MOVEM.L (A7)+,D0-D1
0000113A  4E75                     355              RTS
0000113C                           356              
0000113C                           357  ; -----------------------------------------------------------------------------
0000113C                           358  UTLPRINT
0000113C                           359  ; PRINT SCREEN CENTERED TEXT
0000113C                           360  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000113C                           361  ;            D0.B SCREEN ROW TO PRINT TEXT
0000113C                           362  ; OUTPUT   : D0.B NEXT ROW
0000113C                           363  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000113C                           364  ; -----------------------------------------------------------------------------
0000113C  48E7 C0C0                365              MOVEM.L D0-D1/A0-A1,-(A7)
00001140  4201                     366              CLR.B   D1
00001142  2248                     367              MOVE.L  A0,A1
00001144  4A18                     368  .LOOP       TST.B   (A0)+
00001146  6700 0006                369              BEQ     .ENDLOOP
0000114A  5201                     370              ADDQ.B  #1,D1
0000114C  60F6                     371              BRA     .LOOP
0000114E  E209                     372  .ENDLOOP    LSR.B   #1,D1
00001150  0401 0028                373              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
00001154  4401                     374              NEG.B   D1
00001156  E141                     375              ASL.W   #8,D1
00001158  8240                     376              OR.W    D0,D1
0000115A  103C 000B                377              MOVE.B  #11,D0
0000115E  4E4F                     378              TRAP    #15
00001160  103C 000D                379              MOVE.B  #13,D0
00001164  4E4F                     380              TRAP    #15
00001166  4CDF 0303                381              MOVEM.L (A7)+,D0-D1/A0-A1
0000116A  5200                     382              ADDQ.B  #1,D0
0000116C  4E75                     383              RTS
0000116E                           384  
0000116E                           385  ; -----------------------------------------------------------------------------
0000116E                           386  UTLRAND
0000116E                           387  ; PROVIDES A PSEUDO-RANDOM BYTE
0000116E                           388  ; INPUT    - NONE
0000116E                           389  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
0000116E                           390  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000116E                           391  ; -----------------------------------------------------------------------------
0000116E  2F08                     392              MOVE.L  A0,-(A7)
00001170  41F9 0000118C            393              LEA     .RANDVEC,A0
00001176  4280                     394              CLR.L   D0
00001178  1039 000017F4            395              MOVE.B  (UTLRNDIX),D0
0000117E  1030 0800                396              MOVE.B  (A0,D0.L),D0
00001182  5239 000017F4            397              ADDQ.B  #1,(UTLRNDIX)
00001188  205F                     398              MOVE.L  (A7)+,A0
0000118A  4E75                     399              RTS
0000118C                           400  
0000118C                           401  
0000118C= A2 EE 9A 0C F5 24 ...    402  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
00001194= 2A A3 51 26 E0 AC ...    403              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
0000119C= 75 51 CA FD 33 EB ...    404              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
000011A4= 60 CC E7 B8 9A EB ...    405              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
000011AC= 1D 76 B5 95 B0 89 ...    406              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
000011B4= 39 15 48 C9 6E CA ...    407              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
000011BC= 43 E7 E2 7C 37 25 ...    408              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000011C4= E9 94 CE E9 E4 52 ...    409              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000011CC= 37 6D 9A 84 A2 28 ...    410              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000011D4= 19 E2 C6 77 80 D4 ...    411              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000011DC= 0A 5A 32 67 33 C2 ...    412              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
000011E4= 59 80 DC 0E 57 FC ...    413              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
000011EC= 8A AB BC F7 07 4D ...    414              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
000011F4= EF D5 77 6E 1E BB ...    415              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
000011FC= D6 E0 2A 8F BD 28 ...    416              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
00001204= 13 4F 66 EC 0A 64 ...    417              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
0000120C= 56 52 9A 16 9B 90 ...    418              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
00001214= 06 8A A4 F7 01 DA ...    419              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
0000121C= F2 E7 77 28 B1 76 ...    420              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001224= A4 42 E3 81 B1 67 ...    421              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000122C= BF CE FA 16 BF 38 ...    422              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001234= D1 8B 50 0C 5F 49 ...    423              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000123C= DE 4C 14 A2 40 DC ...    424              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001244= B6 9B 0A 38 5D AB ...    425              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
0000124C= E2 1B DD 75 15 82 ...    426              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001254= 8A 26 51 30 9F 47 ...    427              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
0000125C= 1E 8A BB 71 C6 6E ...    428              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001264= 9F 47 E5 34 94 27 ...    429              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
0000126C= 7D 06 D6 BA 30 0F ...    430              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001274= EC 7F 7E 03 CF 2D ...    431              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
0000127C= 94 5B 23 F2 8B CD ...    432              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
00001284= 74 33 EC B9 0F D5 ...    433              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
0000128C                           434  
0000128C                           435  -------------------- end include --------------------
0000128C                           436              ; SYSTEM INCLUDES
0000128C                           437              INCLUDE "SYSTEM.X68"
0000128C                           438  ; =============================================================================
0000128C                           439  ; SYSTEM
0000128C                           440  ; =============================================================================
0000128C                           441  
0000128C                           442  ; -----------------------------------------------------------------------------
0000128C                           443  SYSINIT
0000128C                           444  ; INITIALIZE SYSTEM
0000128C                           445  ; INPUT     : NONE
0000128C                           446  ; OUTPUT    : NONE
0000128C                           447  ; MODIFIES  : NONE
0000128C                           448  ; -----------------------------------------------------------------------------
0000128C                           449              ; INSTALL TRAPS AND INTERRUPTIONS
0000128C  21FC 0000137A 0080       450              MOVE.L  #SCRPLOT,($80+SCRUPDTN*4)
00001294  21FC 000013B0 0084       451              MOVE.L  #KBDUPD,($80+KBDUPDTN*4)
0000129C  21FC 00001324 0088       452              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
000012A4  21FC 00001394 0064       453              MOVE.L  #SCRTIM,($60+SCRINTN*4)
000012AC                           454              
000012AC  4EB9 000013A2            455              JSR     KBDINIT
000012B2  4EB9 000012CA            456              JSR     SNDINIT
000012B8  4EB9 00001336            457              JSR     SCRINIT
000012BE  4EB8 1000                458              JSR     DMMINIT
000012C2                           459              
000012C2                           460              ; SET USER MODE AND ALLOW INTERRUPTIONS
000012C2  40E7                     461              MOVE.W  SR,-(A7)
000012C4  0257 D8FF                462              ANDI.W  #$D8FF,(A7)
000012C8  4E73                     463              RTE
000012CA                           464              
000012CA                           465  ; -----------------------------------------------------------------------------
000012CA                           466  SNDINIT
000012CA                           467  ; INITIALIZES SOUND SYSTEM
000012CA                           468  ; INPUT     : NONE
000012CA                           469  ; OUTPUT    : NONE
000012CA                           470  ; MODIFIES  : NONE
000012CA                           471  ; -----------------------------------------------------------------------------
000012CA  48E7 C0C0                472              MOVEM.L D0-D1/A0-A1,-(A7)
000012CE                           473              
000012CE  4201                     474              CLR.B   D1
000012D0  41F9 00001314            475              LEA     .SNDLIST,A0
000012D6  2018                     476  .LOOP       MOVE.L  (A0)+,D0
000012D8  6700 000E                477              BEQ     .DONE
000012DC  2240                     478              MOVE.L  D0,A1
000012DE  103C 0047                479              MOVE.B  #71,D0
000012E2  4E4F                     480              TRAP    #15
000012E4  5201                     481              ADDQ.B  #1,D1
000012E6  60EE                     482              BRA     .LOOP
000012E8                           483              
000012E8  4CDF 0303                484  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1
000012EC  4E75                     485              RTS
000012EE                           486              
000012EE= 53 4E 44 2F 44 49 ...    487  .SNDDIE     DC.B    'SND/DIE.wav',0
000012FA= 53 4E 44 2F 4A 55 ...    488  .SNDJUMP    DC.B    'SND/JUMP.wav',0
00001307= 53 4E 44 2F 53 43 ...    489  .SNDSCO     DC.B    'SND/SCO.wav',0
00001314                           490              DS.W    0                       ; WORD ALIGN
00001314= 000012EE 000012FA ...    491  .SNDLIST    DC.L    .SNDDIE,.SNDJUMP,.SNDSCO,0
00001324                           492              
00001324                           493  ; ------------------------------------------------------------------------------
00001324                           494  SNDPLAY
00001324                           495  ; PLAY SOUND
00001324                           496  ; INPUT    : D7 SOUND ID
00001324                           497  ; OUTPUT   : NONE
00001324                           498  ; MODIFIES : NONE
00001324                           499  ; ------------------------------------------------------------------------------
00001324  48A7 C000                500              MOVEM.W D0-D1,-(A7)
00001328                           501              
00001328  103C 0048                502              MOVE.B  #72,D0
0000132C  1207                     503              MOVE.B  D7,D1
0000132E  4E4F                     504              TRAP    #15
00001330                           505              
00001330  4C9F 0003                506              MOVEM.W (A7)+,D0-D1
00001334  4E73                     507              RTE
00001336                           508  
00001336                           509  ; -----------------------------------------------------------------------------
00001336                           510  SCRINIT
00001336                           511  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
00001336                           512  ; ENABLE DOUBLE BUFFER, ENABLE TIMED INTERRUPT.
00001336                           513  ; INPUT     : NONE
00001336                           514  ; OUTPUT    : NONE
00001336                           515  ; MODIFIES  : NONE
00001336                           516  ; -----------------------------------------------------------------------------
00001336                           517  
00001336  48E7 C000                518              MOVEM.L D0-D1,-(A7)
0000133A                           519              
0000133A                           520              ; SET SCREEN RESOLUTION
0000133A  103C 0021                521              MOVE.B  #33,D0
0000133E  223C 028001E0            522              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
00001344  4E4F                     523              TRAP    #15
00001346                           524              
00001346                           525              ; SET WINDOWED MODE
00001346  7201                     526              MOVE.L  #1,D1
00001348  4E4F                     527              TRAP    #15
0000134A                           528              
0000134A                           529              ; CLEAR SCREEN
0000134A  103C 000B                530              MOVE.B  #11,D0
0000134E  323C FF00                531              MOVE.W  #$FF00,D1
00001352  4E4F                     532              TRAP    #15
00001354                           533              
00001354                           534              ; ENABLE DOUBLE BUFFER
00001354  103C 005C                535              MOVE.B  #92,D0
00001358  123C 0011                536              MOVE.B  #17,D1
0000135C  4E4F                     537              TRAP    #15
0000135E                           538              
0000135E                           539              ; ENABLE TIMED INTERRUPT
0000135E  103C 0020                540              MOVE.B  #32,D0
00001362  123C 0006                541              MOVE.B  #6,D1
00001366  143C 0081                542              MOVE.B  #$80|SCRINTN,D2
0000136A  7610                     543              MOVE.L  #1000/SCRFPS,D3
0000136C  4E4F                     544              TRAP    #15
0000136E                           545              
0000136E                           546              ; CLEAR INTERRUPT COUNTER
0000136E  4279 000017F8            547              CLR.W   (SCRINTCT)
00001374                           548              
00001374  4CDF 0003                549              MOVEM.L (A7)+,D0-D1
00001378  4E75                     550              RTS
0000137A                           551              
0000137A                           552  ; -----------------------------------------------------------------------------
0000137A                           553  SCRPLOT
0000137A                           554  ; UPDATES DOUBLE BUFFER
0000137A                           555  ; INPUT    : NONE
0000137A                           556  ; OUTPUT   : NONE
0000137A                           557  ; MODIFIES : NONE
0000137A                           558  ; -----------------------------------------------------------------------------
0000137A  48A7 C000                559              MOVEM.W D0-D1,-(A7)
0000137E                           560              
0000137E                           561              ; SWITCH BUFFERS
0000137E  103C 005E                562              MOVE.B  #94,D0
00001382  4E4F                     563              TRAP    #15
00001384                           564              
00001384                           565              ; CLEAN HIDDEN BUFFER
00001384  103C 000B                566              MOVE.B  #11,D0
00001388  323C FF00                567              MOVE.W  #$FF00,D1
0000138C  4E4F                     568              TRAP    #15
0000138E  4C9F 0003                569              MOVEM.W (A7)+,D0-D1
00001392  4E73                     570              RTE
00001394                           571  
00001394                           572  ; -----------------------------------------------------------------------------
00001394                           573  SCRTIM
00001394                           574  ; TIMED INTERRUPT SERVICE ROUTINE, COUNTS TIME FALLING
00001394                           575  ; INPUT     : NONE
00001394                           576  ; OUTPUT    : NONE
00001394                           577  ; MODIFIES  : NONE
00001394                           578  ; -----------------------------------------------------------------------------
00001394  5239 000017F8            579              ADDQ.B  #1,(SCRINTCT)
0000139A  5239 000017F9            580              ADDQ.B  #1,(SCRCYCCT)
000013A0  4E73                     581              RTE
000013A2                           582              
000013A2                           583  ; -----------------------------------------------------------------------------
000013A2                           584  KBDINIT
000013A2                           585  ; INIT KEYBOARD
000013A2                           586  ; INPUT     : NONE
000013A2                           587  ; OUTPUT    : NONE
000013A2                           588  ; MODIFIES  : NONE
000013A2                           589  ; -----------------------------------------------------------------------------
000013A2  4239 000017F6            590              CLR.B   (KBDVAL)
000013A8  4239 000017F7            591              CLR.B   (KBDEDGE)
000013AE  4E75                     592              RTS
000013B0                           593              
000013B0                           594  ; -----------------------------------------------------------------------------
000013B0                           595  KBDUPD
000013B0                           596  ; UPDATE KEYBOARD INFO
000013B0                           597  ; 0 -> SPACE
000013B0                           598  ; INPUT     : NONE
000013B0                           599  ; OUTPUT    : NONE
000013B0                           600  ; MODIFIES  : NONE
000013B0                           601  ; -----------------------------------------------------------------------------
000013B0  48E7 C000                602              MOVEM.L D0-D1,-(A7)
000013B4                           603              
000013B4                           604              ; READ KEYBOARD
000013B4  103C 0013                605              MOVE.B  #19,D0
000013B8  7220                     606              MOVE.L  #KBDSPACE,D1
000013BA  4E4F                     607              TRAP    #15
000013BC                           608              
000013BC                           609              ; CONVERT TO DESIRED FORMAT
000013BC  C2BC 00000001            610              AND.L   #$0001,D1
000013C2                           611  
000013C2                           612              ; COMPUTE KBDEDGE
000013C2  1039 000017F6            613              MOVE.B  (KBDVAL),D0
000013C8  4600                     614              NOT.B   D0
000013CA  C041                     615              AND.W   D1,D0
000013CC  13C0 000017F7            616              MOVE.B  D0,(KBDEDGE)
000013D2                           617              
000013D2  4CDF 0003                618              MOVEM.L (A7)+,D0-D1
000013D6  4E73                     619              RTE
000013D8                           620  
000013D8                           621      
000013D8                           622  
000013D8                           623  
000013D8                           624  
000013D8                           625  
000013D8                           626  
000013D8                           627  
000013D8                           628  
000013D8                           629  -------------------- end include --------------------
000013D8                           630              ; STATES INCLUDES
000013D8                           631              INCLUDE "STATES.X68"
000013D8                           632  ; =============================================================================
000013D8                           633  ; GAME STATE MANAGEMENT
000013D8                           634  ; =============================================================================
000013D8                           635  
000013D8                           636  ; -----------------------------------------------------------------------------
000013D8                           637  STAINIT
000013D8                           638  ; INITALIZES THE STATE MANAGER
000013D8                           639  ; INPUT    - NONE
000013D8                           640  ; OUTPUT   - NONE
000013D8                           641  ; MODIFIES - NONE
000013D8                           642  ; -----------------------------------------------------------------------------
000013D8  33FC FFFF 000017F0       643              MOVE.W  #STANONE,(STACUR)
000013E0  4279 000017F2            644              CLR.W   (STANEXT)
000013E6  4E75                     645              RTS
000013E8                           646  
000013E8                           647  ; -----------------------------------------------------------------------------
000013E8                           648  STAUPD
000013E8                           649  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
000013E8                           650  ; INPUT    - NONE
000013E8                           651  ; OUTPUT   - NONE
000013E8                           652  ; MODIFIES - NONE
000013E8                           653  ; -----------------------------------------------------------------------------
000013E8  48E7 8080                654              MOVEM.L D0/A0,-(A7)
000013EC  4280                     655              CLR.L   D0
000013EE  3039 000017F2            656              MOVE.W  (STANEXT),D0
000013F4  B079 000017F0            657              CMP.W   (STACUR),D0
000013FA  6700 0012                658              BEQ     .DOUPD
000013FE  33C0 000017F0            659              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00001404  E588                     660              LSL.L   #2,D0
00001406  2040                     661              MOVE.L  D0,A0
00001408  2068 1426                662              MOVE.L  .INITBL(A0),A0
0000140C  4E90                     663              JSR     (A0)
0000140E  4280                     664  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001410  3039 000017F0            665              MOVE.W  (STACUR),D0
00001416  E588                     666              LSL.L   #2,D0
00001418  2040                     667              MOVE.L  D0,A0
0000141A  2068 143A                668              MOVE.L  .UPDTBL(A0),A0
0000141E  4E90                     669              JSR     (A0)
00001420  4CDF 0101                670              MOVEM.L (A7)+,D0/A0
00001424  4E75                     671              RTS
00001426= 00001480 00001498 ...    672  .INITBL     DC.L    ISCINIT,INSINIT,GAMEINIT,PAUSINIT,GOVINIT
0000143A= 00001482 0000149A ...    673  .UPDTBL     DC.L    ISCUPD,INSUPD,GAMEUPD,PAUSUPD,GOVUPD
0000144E                           674  
0000144E                           675  ; -----------------------------------------------------------------------------
0000144E                           676  STAPLOT
0000144E                           677  ; PERFORMS STATE PLOT
0000144E                           678  ; INPUT    - NONE
0000144E                           679  ; OUTPUT   - NONE
0000144E                           680  ; MODIFIES - NONE
0000144E                           681  ; -----------------------------------------------------------------------------
0000144E  48E7 8080                682              MOVEM.L D0/A0,-(A7)
00001452  4280                     683              CLR.L   D0
00001454  3039 000017F0            684              MOVE.W  (STACUR),D0
0000145A  E588                     685              LSL.L   #2,D0
0000145C  2040                     686              MOVE.L  D0,A0
0000145E  2068 146A                687              MOVE.L  .PLTTBL(A0),A0
00001462  4E90                     688              JSR     (A0)
00001464  4CDF 0101                689              MOVEM.L (A7)+,D0/A0
00001468  4E75                     690              RTS
0000146A= 00001496 0000149C ...    691  .PLTTBL     DC.L    ISCPLOT,INSPLOT,GAMEPLOT,PAUSPLOT,GOVPLOT
0000147E                           692  
0000147E                           693  ; -----------------------------------------------------------------------------
0000147E                           694  STAEMPTY
0000147E                           695  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
0000147E                           696  ; INPUT    - NONE
0000147E                           697  ; OUTPUT   - NONE
0000147E                           698  ; MODIFIES - NONE
0000147E                           699  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
0000147E                           700  ; -----------------------------------------------------------------------------
0000147E  4E75                     701              RTS
00001480                           702  
00001480                           703  
00001480                           704  
00001480                           705  
00001480                           706  
00001480                           707  
00001480                           708  
00001480                           709  
00001480                           710  -------------------- end include --------------------
00001480                           711              INCLUDE "INTRO.X68"
00001480                           712  ; =============================================================================
00001480                           713  ; INTRO SCREEN MANAGEMENT
00001480                           714  ; =============================================================================
00001480                           715  
00001480                           716  ; ------------------------------------------------------------------------------
00001480                           717  ISCINIT
00001480                           718  ; INTRO SCREEN INIT
00001480                           719  ; INPUT    : NONE
00001480                           720  ; OUTPUT   : NONE
00001480                           721  ; MODIFIES : NONE
00001480                           722  ; ------------------------------------------------------------------------------
00001480  4E75                     723              RTS
00001482                           724  
00001482                           725  ; ------------------------------------------------------------------------------
00001482                           726  ISCUPD
00001482                           727  ; INTRO SCREEN UPDATE
00001482                           728  ; INPUT    : NONE
00001482                           729  ; OUTPUT   : NONE
00001482                           730  ; MODIFIES : NONE
00001482                           731  ; ------------------------------------------------------------------------------
00001482                           732  
00001482  1039 000017F7            733              MOVE.B  (KBDEDGE),D0
00001488  6700 000A                734              BEQ     .CONT
0000148C  33FC 0002 000017F2       735              MOVE.W  #STAGAME,STANEXT      
00001494                           736  .CONT
00001494  4E75                     737              RTS
00001496                           738  
00001496                           739  ; ------------------------------------------------------------------------------
00001496                           740  ISCPLOT
00001496                           741  ; INTRO SCREEN PLOT
00001496                           742  ; INPUT    : NONE
00001496                           743  ; OUTPUT   : NONE
00001496                           744  ; MODIFIES : NONE
00001496                           745  ; ------------------------------------------------------------------------------
00001496  4E75                     746              RTS
00001498                           747  
00001498                           748  
00001498                           749  
00001498                           750  -------------------- end include --------------------
00001498                           751              INCLUDE "INSTRUCTIONS.X68"
00001498                           752  ; =============================================================================
00001498                           753  ; INSTRUCTION SCREEN MANAGEMENT
00001498                           754  ; =============================================================================
00001498                           755  
00001498                           756  ; ==============================================================================
00001498                           757  ; INSTRUCTIONS SCREEN
00001498                           758  ; ==============================================================================
00001498                           759  
00001498                           760  ; ------------------------------------------------------------------------------
00001498                           761  INSINIT
00001498                           762  ; INSTRUCTIONS SCREEN INIT
00001498                           763  ; INPUT    : NONE
00001498                           764  ; OUTPUT   : NONE
00001498                           765  ; MODIFIES : NONE
00001498                           766  ; ------------------------------------------------------------------------------
00001498  4E75                     767              RTS
0000149A                           768  
0000149A                           769  ; ------------------------------------------------------------------------------
0000149A                           770  INSUPD
0000149A                           771  ; INSTRUCTIONS SCREEN UPDATE
0000149A                           772  ; INPUT    : NONE
0000149A                           773  ; OUTPUT   : NONE
0000149A                           774  ; MODIFIES : NONE
0000149A                           775  ; ------------------------------------------------------------------------------
0000149A  4E75                     776              RTS
0000149C                           777  
0000149C                           778  ; ------------------------------------------------------------------------------
0000149C                           779  INSPLOT
0000149C                           780  ; INSTRUCTIONS SCREEN PLOT
0000149C                           781  ; INPUT    : NONE
0000149C                           782  ; OUTPUT   : NONE
0000149C                           783  ; MODIFIES : NONE
0000149C                           784  ; ------------------------------------------------------------------------------
0000149C  4E75                     785              RTS
0000149E                           786  
0000149E                           787  
0000149E                           788  
0000149E                           789  
0000149E                           790  
0000149E                           791  
0000149E                           792  
0000149E                           793  
0000149E                           794  
0000149E                           795  -------------------- end include --------------------
0000149E                           796              INCLUDE "GAME.X68"
0000149E                           797  ; =============================================================================
0000149E                           798  ; GAME MANAGEMENT
0000149E                           799  ; =============================================================================
0000149E                           800  
0000149E                           801  ; -----------------------------------------------------------------------------
0000149E                           802  GAMEINIT
0000149E                           803  ; INITIALIZES GAME.
0000149E                           804  ; INPUT    : NONE
0000149E                           805  ; OUTPUT   : NONE
0000149E                           806  ; MODIFIES : NONE
0000149E                           807  ; ------------------------------------------------------------------------------        
0000149E                           808  
0000149E  4EB9 0000150C            809              JSR     BIRDINIT
000014A4  4EB9 0000171E            810              JSR     SCOINIT
000014AA  4239 000017F9            811              CLR.B   (SCRCYCCT)
000014B0  4E75                     812              RTS
000014B2                           813              
000014B2                           814  ; -----------------------------------------------------------------------------
000014B2                           815  GAMEUPD
000014B2                           816  ; UPDATES GAME.
000014B2                           817  ; INPUT     : NONE
000014B2                           818  ; OUTPUT    : NONE
000014B2                           819  ; MODIFIES  : NONE
000014B2                           820  ; -----------------------------------------------------------------------------
000014B2                           821  
000014B2  4EB9 000014C0            822              JSR     NEWPIPE
000014B8  4EB8 10DC                823              JSR     AGLUPD
000014BC  6000 005E                824              BRA     BIRDUPD
000014C0                           825  
000014C0                           826  ; -----------------------------------------------------------------------------
000014C0                           827  NEWPIPE
000014C0                           828  ; CREATES A NEW PIPE IN CASE IT'S NECESSARY.
000014C0                           829  ; INPUT     : NONE
000014C0                           830  ; OUTPUT    : NONE
000014C0                           831  ; MODIFIES  : NONE
000014C0                           832  ; -----------------------------------------------------------------------------
000014C0                           833  
000014C0  48E7 8070                834              MOVEM.L D0/A1-A3,-(A7)
000014C4                           835              
000014C4  1039 000017F9            836              MOVE.B  (SCRCYCCT),D0
000014CA  0200 003F                837              ANDI.B  #MASKNWPP,D0
000014CE  6600 001C                838              BNE     .GOUPD
000014D2  43F9 000015C0            839              LEA     PIPEINIT,A1
000014D8  45F9 000015D8            840              LEA     PIPEUPD,A2
000014DE  47F9 00001668            841              LEA     PIPEPLOT,A3
000014E4  303C 0001                842              MOVE    #PIPEAGTP,D0
000014E8  4EB8 10C2                843              JSR     AGLADD
000014EC                           844              
000014EC  4CDF 0E01                845  .GOUPD      MOVEM.L (A7)+,D0/A1-A3
000014F0  4E75                     846              RTS
000014F2                           847  
000014F2                           848  ; -----------------------------------------------------------------------------
000014F2                           849  GAMEPLOT
000014F2                           850  ; PLOTS THE GAME.
000014F2                           851  ; INPUT     : NONE
000014F2                           852  ; OUTPUT    : NONE
000014F2                           853  ; MODIFIES  : NONE
000014F2                           854  ; -----------------------------------------------------------------------------
000014F2                           855              
000014F2  4EB9 0000174A            856              JSR     SCOPLOT
000014F8  4EB8 1100                857              JSR     AGLPLOT
000014FC  6000 0080                858              BRA     BIRDPLOT
00001500                           859           
00001500                           860  
00001500                           861  
00001500                           862  
00001500                           863  
00001500                           864  
00001500                           865  
00001500                           866  
00001500                           867  -------------------- end include --------------------
00001500                           868              INCLUDE "PAUSE.X68"
00001500                           869  ; =============================================================================
00001500                           870  ; PAUSE SCREEN MANAGEMENT
00001500                           871  ; =============================================================================
00001500                           872  
00001500                           873  ; ------------------------------------------------------------------------------
00001500                           874  PAUSINIT
00001500                           875  ; PAUSE SCREEN INIT
00001500                           876  ; INPUT    : NONE
00001500                           877  ; OUTPUT   : NONE
00001500                           878  ; MODIFIES : NONE
00001500                           879  ; ------------------------------------------------------------------------------
00001500  4E75                     880              RTS
00001502                           881  
00001502                           882  ; ------------------------------------------------------------------------------
00001502                           883  PAUSUPD
00001502                           884  ; PAUSE SCREEN UPDATE
00001502                           885  ; INPUT    : NONE
00001502                           886  ; OUTPUT   : NONE
00001502                           887  ; MODIFIES : NONE
00001502                           888  ; ------------------------------------------------------------------------------
00001502  4E75                     889              RTS
00001504                           890  
00001504                           891  ; ------------------------------------------------------------------------------
00001504                           892  PAUSPLOT
00001504                           893  ; PAUSE SCREEN PLOT
00001504                           894  ; INPUT    : NONE
00001504                           895  ; OUTPUT   : NONE
00001504                           896  ; MODIFIES : NONE
00001504                           897  ; ------------------------------------------------------------------------------
00001504  4E75                     898              RTS
00001506                           899  
00001506                           900  
00001506                           901  
00001506                           902  
00001506                           903  
00001506                           904  
00001506                           905  
00001506                           906  
00001506                           907  -------------------- end include --------------------
00001506                           908              INCLUDE "GOVER.X68"
00001506                           909  ; =============================================================================
00001506                           910  ; GAME OVER SCREEN MANAGEMENT
00001506                           911  ; =============================================================================
00001506                           912  
00001506                           913  ; ------------------------------------------------------------------------------
00001506                           914  GOVINIT
00001506                           915  ; GAME OVER SCREEN INIT
00001506                           916  ; INPUT    : NONE
00001506                           917  ; OUTPUT   : NONE
00001506                           918  ; MODIFIES : NONE
00001506                           919  ; ------------------------------------------------------------------------------
00001506  4E75                     920              RTS
00001508                           921  
00001508                           922  ; ------------------------------------------------------------------------------
00001508                           923  GOVUPD
00001508                           924  ; GAME OVER SCREEN UPDATE
00001508                           925  ; INPUT    : NONE
00001508                           926  ; OUTPUT   : NONE
00001508                           927  ; MODIFIES : NONE
00001508                           928  ; ------------------------------------------------------------------------------
00001508  4E75                     929              RTS
0000150A                           930  
0000150A                           931  ; ------------------------------------------------------------------------------
0000150A                           932  GOVPLOT
0000150A                           933  ; GAME OVER SCREEN PLOT
0000150A                           934  ; INPUT    : NONE
0000150A                           935  ; OUTPUT   : NONE
0000150A                           936  ; MODIFIES : NONE
0000150A                           937  ; ------------------------------------------------------------------------------
0000150A  4E75                     938              RTS
0000150C                           939  
0000150C                           940  
0000150C                           941  
0000150C                           942  
0000150C                           943  
0000150C                           944  
0000150C                           945  
0000150C                           946  -------------------- end include --------------------
0000150C                           947              ; FEATURE INCLUDES
0000150C                           948              INCLUDE "BIRD.X68"
0000150C                           949  ; =============================================================================
0000150C                           950  ; BIRD MANAGEMENT
0000150C                           951  ; =============================================================================
0000150C                           952  
0000150C                           953  ; -----------------------------------------------------------------------------
0000150C                           954  BIRDINIT
0000150C                           955  ; INITIALIZE BIRD.
0000150C                           956  ; INPUT     : NONE 
0000150C                           957  ; OUTPUT    : NONE
0000150C                           958  ; MODIFIES  : NONE
0000150C                           959  ; -----------------------------------------------------------------------------
0000150C                           960  
0000150C  33FC 00F0 000017E4       961              MOVE.W  #SCRHEIGH/2,(BIRDPOSY)
00001514  4279 000017E6            962              CLR.W   (BIRDVELY)
0000151A  4E75                     963              RTS
0000151C                           964              
0000151C                           965  ; -----------------------------------------------------------------------------
0000151C                           966  BIRDUPD
0000151C                           967  ; UPDATES THE BIRD.
0000151C                           968  ; INPUT    : NONE 
0000151C                           969  ; OUTPUT   : NONE
0000151C                           970  ; MODIFIES : NONE
0000151C                           971  ; -----------------------------------------------------------------------------
0000151C                           972  
0000151C  48E7 E000                973              MOVEM.L D0-D2,-(A7)
00001520                           974  
00001520                           975              ; UPDATE VELOCITY
00001520  1439 000017F7            976              MOVE.B  (KBDEDGE),D2        ; CHECK IF SHOULD JUMP
00001526  0802 0000                977              BTST    #0,D2
0000152A  6700 0014                978              BEQ     .NOJUMP
0000152E                           979              
0000152E  1E3C 0001                980              MOVE.B  #SNDJUMP,D7         ; PLAY SOUND
00001532  4E42                     981              TRAP    #SNDPLTN
00001534  33FC FFF6 000017E6       982              MOVE.W  #JUMPVELY,(BIRDVELY)
0000153C  6000 0008                983              BRA     .CORDUPD
00001540                           984              
00001540                           985  .NOJUMP     ;MOVE.B  (SCRCYCCT),D0       ; CHECK IF SHOULD ACCELERATE DOWN
00001540                           986              ;AND.B   #$01,D0
00001540                           987              ;BNE     .CORDUPD            
00001540                           988  
00001540  5279 000017E6            989              ADDQ.W  #1,BIRDVELY          ; ACCELERATE
00001546                           990              
00001546                           991              ; UPDATE BIRD COORDINATES
00001546  3039 000017E4            992  .CORDUPD    MOVE.W  (BIRDPOSY),D0
0000154C  D079 000017E6            993              ADD.W   (BIRDVELY),D0
00001552                           994              
00001552                           995              ; CHECK SCREEN COLLISIONS
00001552  B07C 0195                996              CMP.W   #SCRHEIGH-FLOHEIGH-BIRDRAD,D0
00001556  6E00 000E                997              BGT     .COLBOT
0000155A  B07C 000F                998              CMP.W   #BIRDRAD,D0
0000155E  6D00 0012                999              BLT     .COLTOP
00001562  6000 000E               1000              BRA     .NOCOL
00001566                          1001              
00001566                          1002  ; TODO MANAGE COLLISIONS
00001566                          1003          
00001566                          1004              ; COLLISION BOT
00001566  33FC 0195 000017E4      1005  .COLBOT     MOVE.W  #SCRHEIGH-FLOHEIGH-BIRDRAD,(BIRDPOSY)
0000156E  6000 0008               1006              BRA     .DONE
00001572                          1007  
00001572                          1008              ; COLLISION TOP
00001572                          1009  .COLTOP     ;BRA     .DONE
00001572                          1010              
00001572                          1011              ; STORE POSITION
00001572  33C0 000017E4           1012  .NOCOL      MOVE.W  D0,(BIRDPOSY)
00001578                          1013  
00001578  4CDF 0007               1014  .DONE       MOVEM.L (A7)+,D0-D2
0000157C                          1015              
0000157C  4E75                    1016              RTS
0000157E                          1017  
0000157E                          1018  ; -----------------------------------------------------------------------------
0000157E                          1019  BIRDPLOT
0000157E                          1020  ; PLOT THE BIRD.
0000157E                          1021  ; INPUT    : NONE 
0000157E                          1022  ; OUTPUT   : NONE
0000157E                          1023  ; MODIFIES : NONE
0000157E                          1024  ; -----------------------------------------------------------------------------
0000157E                          1025  
0000157E  48E7 F800               1026              MOVEM.L D0-D4,-(A7)
00001582                          1027  
00001582                          1028              ; SET PEN COLOR
00001582  103C 0050               1029              MOVE.B  #80,D0
00001586  4281                    1030              CLR.L   D1
00001588  3239 000017E8           1031              MOVE.W  (BIRDPCOL),D1
0000158E  4E4F                    1032              TRAP    #15
00001590                          1033              
00001590                          1034              ; SET FILL COLOR
00001590  103C 0051               1035              MOVE.B  #81,D0
00001594  3239 000017EA           1036              MOVE.W  (BIRDFCOL),D1
0000159A  4E4F                    1037              TRAP    #15
0000159C                          1038  
0000159C                          1039              ; DEFINE COORDINATES
0000159C  323C 0091               1040              MOVE.W  #(BIRDPOSX)-BIRDRAD,D1
000015A0  363C 00AF               1041              MOVE.W  #(BIRDPOSX)+BIRDRAD,D3
000015A4  3439 000017E4           1042              MOVE.W  (BIRDPOSY),D2
000015AA  3802                    1043              MOVE.W  D2,D4
000015AC  0442 000F               1044              SUB.W  #BIRDRAD,D2
000015B0  0644 000F               1045              ADD.W  #BIRDRAD,D4
000015B4                          1046              
000015B4                          1047              ; DRAW CIRCLE
000015B4  103C 0058               1048              MOVE.B  #88,D0
000015B8  4E4F                    1049              TRAP    #15
000015BA                          1050              
000015BA  4CDF 001F               1051              MOVEM.L (A7)+,D0-D4
000015BE                          1052  
000015BE  4E75                    1053              RTS
000015C0                          1054  
000015C0                          1055  
000015C0                          1056  
000015C0                          1057  
000015C0                          1058  
000015C0                          1059  
000015C0                          1060  
000015C0                          1061  
000015C0                          1062  
000015C0                          1063  
000015C0                          1064  -------------------- end include --------------------
000015C0                          1065              INCLUDE "PIPE.X68"
000015C0                          1066  ; =============================================================================
000015C0                          1067  ; PIPE MANAGEMENT (AGENT)
000015C0                          1068  ; PIPEPOSX (W) (A0)
000015C0                          1069  ; PIPETOPH (B) 2(A0)
000015C0                          1070  ; =============================================================================
000015C0                          1071  
000015C0                          1072  ; -----------------------------------------------------------------------------
000015C0                          1073  PIPEINIT
000015C0                          1074  ; INITIALIZE PIPE.
000015C0                          1075  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
000015C0                          1076  ; OUTPUT    : NONE
000015C0                          1077  ; MODIFIES  : NONE
000015C0                          1078  ; -----------------------------------------------------------------------------
000015C0                          1079  
000015C0  2F00                    1080              MOVE.L  D0,-(A7)
000015C2                          1081              
000015C2  30BC 0280               1082              MOVE.W  #SCRWIDTH,(A0)
000015C6  4EB8 116E               1083              JSR UTLRAND
000015CA  0680 00000096           1084              ADD.L   #(SCRHEIGH-PIPEGAPS-FLOHEIGH)/2,D0
000015D0  1140 0002               1085              MOVE.B  D0,2(A0)
000015D4                          1086              
000015D4  201F                    1087              MOVE.L  (A7)+,D0
000015D6  4E75                    1088              RTS
000015D8                          1089              
000015D8                          1090  ; -----------------------------------------------------------------------------
000015D8                          1091  PIPEUPD
000015D8                          1092  ; UPDATES PIPE.
000015D8                          1093  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
000015D8                          1094  ; OUTPUT    : NONE
000015D8                          1095  ; MODIFIES  : NONE
000015D8                          1096  ; -----------------------------------------------------------------------------
000015D8                          1097              ; UPDATE POSITION
000015D8  0650 FFFB               1098              ADD.W   #PIPEVELX,(A0)
000015DC                          1099  
000015DC                          1100              ; CHECK AND HANDLE COLLISIONS
000015DC  6000 0002               1101              BRA PIPECOLI
000015E0                          1102              
000015E0                          1103  ; -----------------------------------------------------------------------------
000015E0                          1104  PIPECOLI
000015E0                          1105  ; CHECKS AND HANDLE PIPE COLLISIONS
000015E0                          1106  ; INPUT     : A0 POINTER TO INSTANCE VARIABLE
000015E0                          1107  ; OUTPUT    : NONE
000015E0                          1108  ; MODIFIES  : NONE
000015E0                          1109  ; -----------------------------------------------------------------------------
000015E0  2F00                    1110              MOVE.L  D0,-(A7)
000015E2  2F01                    1111              MOVE.L  D1,-(A7)
000015E4                          1112           
000015E4                          1113              ; COLLISION WITH SCREEN
000015E4  3010                    1114              MOVE.W  (A0),D0
000015E6  0640 0032               1115              ADD.W   #PIPEWIDT,D0
000015EA  6A00 000A               1116              BPL     .NOKILL
000015EE  4EB8 10AC               1117              JSR AGLKILL
000015F2  6000 006E               1118              BRA     .END
000015F6                          1119              
000015F6                          1120              ; COLLISION WITH BIRD
000015F6  B07C 00E1               1121  .NOKILL     CMP.W   #BIRDPOSX+BIRDRAD+PIPEWIDT,D0
000015FA  6A00 004E               1122              BPL     .NOCOL
000015FE  B07C 0091               1123              CMP.W   #BIRDPOSX-BIRDRAD,D0
00001602  6B00 0046               1124              BMI     .NOCOL
00001606                          1125  
00001606                          1126              
00001606                          1127              ; BIRD IS IN PIPE X RANGE
00001606  4280                    1128              CLR.L   D0
00001608  1028 0002               1129              MOVE.B  2(A0),D0
0000160C  3239 000017E4           1130              MOVE.W  (BIRDPOSY),D1
00001612  0441 000F               1131              SUB.W   #BIRDRAD,D1
00001616  B041                    1132              CMP.W   D1,D0
00001618  6A00 0014               1133              BPL     .COL
0000161C  0640 0078               1134              ADD.W   #PIPEGAPS,D0
00001620  0641 001E               1135              ADD.W   #2*BIRDRAD,D1
00001624  B041                    1136              CMP.W   D1,D0
00001626  6B00 0006               1137              BMI     .COL
0000162A                          1138  
0000162A  6000 001E               1139              BRA     .NOCOL
0000162E  23FC 00BB00FF 000017E8  1140  .COL        MOVE.L  #DARKRED<<16|LIGHTRED,(BIRDPCOL) ; TURN BIRD TO RED TEMPORAL
00001638                          1141  
00001638                          1142              ; STOP ALL SOUNDS
00001638  103C 004C               1143              MOVE.B  #76,D0
0000163C  7403                    1144              MOVE.L  #3,D2
0000163E  4E4F                    1145              TRAP    #15
00001640                          1146              
00001640  1E3C 0000               1147              MOVE.B  #SNDDIE,D7  ; PLAY DIE SOUND
00001644  4E42                    1148              TRAP    #SNDPLTN
00001646  6000 001A               1149              BRA     .END
0000164A                          1150  
0000164A  23FC BBBBFFFF 000017E8  1151  .NOCOL      MOVE.L  #DKYELLOW<<16|LGYELLOW,(BIRDPCOL) ; TURN BIRD TO YELLOW TEMPORAL
00001654                          1152              
00001654                          1153              ; SCORE INCREASE
00001654  0C50 005F               1154              CMP.W   #BIRDPOSX-PIPEWIDT-BIRDRAD,(A0)
00001658  6600 0008               1155              BNE     .END
0000165C  4EB9 0000172C           1156              JSR     SCOINC
00001662                          1157              
00001662  221F                    1158  .END        MOVE.L  (A7)+,D1
00001664  201F                    1159              MOVE.L  (A7)+,D0
00001666  4E75                    1160              RTS
00001668                          1161  
00001668                          1162  ; -----------------------------------------------------------------------------
00001668                          1163  PIPEPLOT
00001668                          1164  ; PLOT THE PIPE.
00001668                          1165  ; INPUT     : A0 POINTER TO INSTANCE VARIABLES
00001668                          1166  ; OUTPUT    : NONE
00001668                          1167  ; MODIFIES  : NONE
00001668                          1168  ; -----------------------------------------------------------------------------
00001668                          1169      
00001668  48E7 F800               1170              MOVEM.L D0-D4,-(A7)
0000166C                          1171              
0000166C                          1172              ; SET PEN AND FILL COLORS
0000166C  103C 0050               1173              MOVE.B  #80,D0
00001670  223C 00151A30           1174              MOVE.L  #PIPEPCOL,D1
00001676  4E4F                    1175              TRAP    #15
00001678  103C 0051               1176              MOVE.B  #81,D0
0000167C  223C 0020284D           1177              MOVE.L  #PIPEFCOL,D1
00001682  4E4F                    1178              TRAP    #15
00001684                          1179              
00001684                          1180              ; PLOT TOP HALF
00001684  3210                    1181              MOVE.W  (A0),D1
00001686  4242                    1182              CLR.W   D2
00001688  3601                    1183              MOVE.W  D1,D3
0000168A  0643 0032               1184              ADD.W   #PIPEWIDT,D3
0000168E  4244                    1185              CLR.W   D4
00001690  1828 0002               1186              MOVE.B  2(A0),D4
00001694  103C 0057               1187              MOVE.B  #87,D0
00001698  4E4F                    1188              TRAP    #15
0000169A                          1189              
0000169A                          1190              ; PLOT BOTTOM HALF
0000169A  3404                    1191              MOVE.W  D4,D2
0000169C  0642 0078               1192              ADD.W   #PIPEGAPS,D2
000016A0  383C 01A4               1193              MOVE.W  #SCRHEIGH-FLOHEIGH,D4
000016A4  4E4F                    1194              TRAP    #15
000016A6                          1195              
000016A6  4CDF 001F               1196              MOVEM.L (A7)+,D0-D4
000016AA  4E75                    1197              RTS
000016AC                          1198  
000016AC                          1199  
000016AC                          1200  
000016AC                          1201  
000016AC                          1202  
000016AC                          1203  
000016AC                          1204  
000016AC                          1205  
000016AC                          1206  
000016AC                          1207  
000016AC                          1208  -------------------- end include --------------------
000016AC                          1209              INCLUDE "BACKGROUND.X68"
000016AC                          1210  ; =============================================================================
000016AC                          1211  ; BACKGROUND MANAGEMENT
000016AC                          1212  ; =============================================================================
000016AC                          1213  
000016AC                          1214  ; -----------------------------------------------------------------------------
000016AC                          1215  BACKPLOT
000016AC                          1216  ; DRAWS BACKGROUND
000016AC                          1217  ; INPUT     : NONE
000016AC                          1218  ; OUTPUT    : NONE
000016AC                          1219  ; MODIFIES  : NONE
000016AC                          1220  ; -----------------------------------------------------------------------------
000016AC                          1221  
000016AC  4EB9 000016B6           1222              JSR SKYPLOT
000016B2  6000 0034               1223              BRA FLOPLOT
000016B6                          1224              ; TODO CLOUD PLOT
000016B6                          1225              ; RTS 
000016B6                          1226              
000016B6                          1227  ; -----------------------------------------------------------------------------
000016B6                          1228  SKYPLOT
000016B6                          1229  ; DRAWS THE SKY BACKGROUND
000016B6                          1230  ; INPUT     : NONE
000016B6                          1231  ; OUTPUT    : NONE
000016B6                          1232  ; MODIFIES  : NONE
000016B6                          1233  ; -----------------------------------------------------------------------------
000016B6                          1234              
000016B6  48E7 F800               1235              MOVEM.L D0-D4,-(A7)
000016BA                          1236              ; SET PEN COLOR
000016BA  223C 00FFBF80           1237              MOVE.L  #SKYCOLOR,D1
000016C0  103C 0050               1238              MOVE.B  #80,D0
000016C4  4E4F                    1239              TRAP    #15
000016C6                          1240              
000016C6                          1241              ; SET FILL COLOR
000016C6  103C 0051               1242              MOVE.B  #81,D0
000016CA  4E4F                    1243              TRAP    #15
000016CC                          1244              
000016CC                          1245              ; SET COORDS AND DRAW
000016CC  103C 0057               1246              MOVE.B  #87,D0
000016D0  4281                    1247              CLR.L   D1
000016D2  4282                    1248              CLR.L   D2
000016D4  263C 00000280           1249              MOVE.L  #SCRWIDTH,D3
000016DA  283C 000001E0           1250              MOVE.L  #SCRHEIGH,D4
000016E0  4E4F                    1251              TRAP    #15
000016E2                          1252              
000016E2  4CDF 001F               1253              MOVEM.L (A7)+,D0-D4
000016E6  4E75                    1254              RTS
000016E8                          1255              
000016E8                          1256  ; -----------------------------------------------------------------------------
000016E8                          1257  FLOPLOT
000016E8                          1258  ; DRAWS THE FLOOR BACKGROUND
000016E8                          1259  ; INPUT     : NONE
000016E8                          1260  ; OUTPUT    : NONE
000016E8                          1261  ; MODIFIES  : NONE
000016E8                          1262  ; -----------------------------------------------------------------------------
000016E8                          1263  
000016E8  48E7 F800               1264              MOVEM.L D0-D4,-(A7)
000016EC                          1265              ; SET PEN COLOR 
000016EC  223C 0035DE3B           1266              MOVE.L  #FLOCOLOR,D1
000016F2  103C 0050               1267              MOVE.B  #80,D0
000016F6  4E4F                    1268              TRAP    #15
000016F8                          1269              
000016F8                          1270              ; SET FILL COLOR
000016F8  103C 0051               1271              MOVE.B  #81,D0
000016FC  4E4F                    1272              TRAP    #15
000016FE                          1273              
000016FE                          1274              ; SET COORDS AND DRAW
000016FE  103C 0057               1275              MOVE.B  #87,D0
00001702  4281                    1276              CLR.L   D1
00001704  243C 000001A4           1277              MOVE.L  #SCRHEIGH-FLOHEIGH,D2
0000170A  263C 00000280           1278              MOVE.L  #SCRWIDTH,D3
00001710  283C 000001E0           1279              MOVE.L  #SCRHEIGH,D4
00001716  4E4F                    1280              TRAP    #15
00001718                          1281              
00001718  4CDF 001F               1282              MOVEM.L (A7)+,D0-D4
0000171C  4E75                    1283              RTS
0000171E                          1284  
0000171E                          1285  -------------------- end include --------------------
0000171E                          1286              INCLUDE "SCORE.X68"
0000171E                          1287  ; =============================================================================
0000171E                          1288  ; SCOREBOARD MANAGEMENT
0000171E                          1289  ; =============================================================================
0000171E                          1290  
0000171E                          1291  ; ------------------------------------------------------------------------------
0000171E                          1292  SCOINIT
0000171E                          1293  ; INITIALIZE SCOREBOARD
0000171E                          1294  ; INPUT    : NONE 
0000171E                          1295  ; OUTPUT   : NONE
0000171E                          1296  ; MODIFIES : NONE
0000171E                          1297  ; ------------------------------------------------------------------------------
0000171E  4279 000017EC           1298              CLR.W   (SCORE)
00001724  4279 000017EE           1299              CLR.W   (HIGHSCO)
0000172A  4E75                    1300              RTS
0000172C                          1301              
0000172C                          1302  ; -----------------------------------------------------------------------------
0000172C                          1303  SCOINC
0000172C                          1304  ; INCREASES THE SCORE BY 1
0000172C                          1305  ; INPUT     : NONE
0000172C                          1306  ; OUTPUT    : SCORE = SCORE + 1
0000172C                          1307  ; MODIFIES  : NONE (APART FROM OUTPUT)
0000172C                          1308  ; -----------------------------------------------------------------------------
0000172C  48E7 A100               1309              MOVEM.L D0/D2/D7,-(A7)
00001730                          1310  
00001730  5279 000017EC           1311              ADDQ.W  #1,(SCORE)
00001736                          1312              ; STOP ALL SOUNDS
00001736  103C 004C               1313              MOVE.B  #76,D0
0000173A  7403                    1314              MOVE.L  #3,D2
0000173C  4E4F                    1315              TRAP    #15
0000173E                          1316              
0000173E                          1317              ; PLAY SOUND
0000173E  1E3C 0002               1318              MOVE.B  #SNDSCO,D7
00001742  4E42                    1319              TRAP    #SNDPLTN
00001744                          1320              
00001744  4CDF 0085               1321              MOVEM.L (A7)+,D0/D2/D7
00001748  4E75                    1322              RTS
0000174A                          1323              
0000174A                          1324  ; ------------------------------------------------------------------------------
0000174A                          1325  SCOPLOT
0000174A                          1326  ; PLOT THE SCOREBOARD
0000174A                          1327  ; INPUT    : NONE 
0000174A                          1328  ; OUTPUT   : NONE
0000174A                          1329  ; MODIFIES : NONE
0000174A                          1330  ; ------------------------------------------------------------------------------
0000174A                          1331  
0000174A  48E7 C040               1332              MOVEM.L D0-D1/A1,-(A7)
0000174E                          1333  
0000174E                          1334              ; SET BACKGROUND COLOR
0000174E  103C 0051               1335              MOVE.B  #81,D0
00001752  223C 0035DE3B           1336              MOVE.L  #SCOFCOL,D1
00001758  4E4F                    1337              TRAP    #15
0000175A                          1338              
0000175A                          1339              ; SET SCORE LINE POSITION
0000175A  103C 000B               1340              MOVE.B  #11,D0
0000175E  323C 101D               1341              MOVE.W  #SCOLINE,D1
00001762  4E4F                    1342              TRAP    #15
00001764                          1343              
00001764                          1344              ; PLOT THE SCORE
00001764  43F9 0000179C           1345              LEA     .SCOTXT,A1
0000176A  4281                    1346              CLR.L   D1
0000176C  3239 000017EC           1347              MOVE.W  (SCORE),D1
00001772  103C 0011               1348              MOVE.B  #17,D0
00001776  4E4F                    1349              TRAP    #15
00001778                          1350              
00001778                          1351              ; SET HIGH SCORE LINE POSITION
00001778  103C 000B               1352              MOVE.B  #11,D0
0000177C  323C 101E               1353              MOVE.W  #HSCOLINE,D1
00001780  4E4F                    1354              TRAP    #15
00001782                          1355              
00001782                          1356              ; PLOT THE HIGHSCORE
00001782  43F9 000017A4           1357              LEA     .HISCOTXT,A1
00001788  4281                    1358              CLR.L   D1
0000178A  3239 000017EE           1359              MOVE.W  (HIGHSCO),D1
00001790  103C 0011               1360              MOVE.B  #17,D0
00001794  4E4F                    1361              TRAP    #15
00001796                          1362              
00001796  4CDF 0203               1363              MOVEM.L (A7)+,D0-D1/A1
0000179A  4E75                    1364              RTS
0000179C                          1365              
0000179C= 53 43 4F 52 45 3A ...   1366  .SCOTXT     DC.B    'SCORE: ',0
000017A4= 48 49 47 48 53 43 ...   1367  .HISCOTXT   DC.B    'HIGHSCORE: ',0
000017B0                          1368  
000017B0                          1369  
000017B0                          1370  
000017B0                          1371  
000017B0                          1372  
000017B0                          1373  -------------------- end include --------------------
000017B0                          1374              
000017B0                          1375  
000017B0                          1376  START
000017B0                          1377  
000017B0                          1378  ; --- INITIALIZATION ----------------------------------------------------------
000017B0                          1379  
000017B0  007C 0700               1380              ORI.W   #$0700,SR
000017B4  4EB8 128C               1381              JSR     SYSINIT
000017B8  4EB8 1126               1382              JSR     UTLINIT
000017BC  4EB8 13D8               1383              JSR     STAINIT
000017C0                          1384              
000017C0                          1385  .LOOP
000017C0                          1386  
000017C0                          1387  ; --- UPDATE ------------------------------------------------------------------
000017C0                          1388  
000017C0                          1389              ; READ INPUT DEVICES
000017C0                          1390  
000017C0  4E41                    1391              TRAP    #KBDUPDTN
000017C2                          1392  
000017C2  4EB8 13E8               1393              JSR     STAUPD
000017C6                          1394              
000017C6                          1395  ; --- SYNC --------------------------------------------------------------------
000017C6                          1396  
000017C6  4A39 000017F8           1397  .WINT       TST.B   (SCRINTCT)
000017CC  67F8                    1398              BEQ     .WINT
000017CE  4239 000017F8           1399              CLR.B   (SCRINTCT)
000017D4                          1400              
000017D4                          1401  ; --- PLOT --------------------------------------------------------------------
000017D4                          1402  
000017D4  4EB8 16AC               1403              JSR     BACKPLOT
000017D8  4EB8 144E               1404              JSR     STAPLOT
000017DC                          1405              
000017DC  4E40                    1406              TRAP    #SCRUPDTN
000017DE                          1407              
000017DE  60E0                    1408              BRA     .LOOP
000017E0                          1409              
000017E0  FFFF FFFF               1410              SIMHALT
000017E4                          1411              
000017E4                          1412              INCLUDE "VARS.X68"
000017E4                          1413  ; =============================================================================
000017E4                          1414  ; GAME VARIABLES
000017E4                          1415  ; =============================================================================
000017E4                          1416  
000017E4                          1417  ; --- BIRD RELATED VARIABLES --------------------------------------------------
000017E4                          1418  
000017E4                          1419  BIRDPOSY    DS.W    1                   ; BIRD POSITION Y
000017E6                          1420  BIRDVELY    DS.W    1                   ; BIRD SPEED Y
000017E8= BBBB                    1421  BIRDPCOL    DC.W    DKYELLOW            ; BIRD PEN COLOR
000017EA= FFFF                    1422  BIRDFCOL    DC.W    LGYELLOW            ; BIRD FILL COLOR
000017EC                          1423  
000017EC                          1424  ; --- SCOREBOARD RELATED VARIABLES --------------------------------------------
000017EC                          1425  
000017EC                          1426  SCORE       DS.W    1                   ; ACTUAL GAME SCORE
000017EE                          1427  HIGHSCO     DS.W    1                   ; HIGH SCORE
000017F0                          1428  
000017F0                          1429  ;  --- STATE RELATED VARIABLES ------------------------------------------------
000017F0                          1430  
000017F0                          1431  STACUR      DS.W    1                   ; CURRENT STATE
000017F2                          1432  STANEXT     DS.W    1                   ; NEXT STATE
000017F4                          1433  
000017F4                          1434  
000017F4                          1435  
000017F4                          1436  
000017F4                          1437  
000017F4                          1438  
000017F4                          1439  -------------------- end include --------------------
000017F4                          1440              INCLUDE "LIB/UTLVARS.X68"
000017F4                          1441  ; =============================================================================
000017F4                          1442  ; UTILITY VARIABLES
000017F4                          1443  ; =============================================================================
000017F4                          1444  
000017F4                          1445  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
000017F6                          1446              DS.W    0
000017F6                          1447  -------------------- end include --------------------
000017F6                          1448              INCLUDE "SYSVARS.X68"
000017F6                          1449  ; =============================================================================
000017F6                          1450  ; SYSTEM VARIABLES
000017F6                          1451  ; =============================================================================
000017F6                          1452  
000017F6                          1453  ; --- KEYBOARD RELATED VARIABLES ----------------------------------------------
000017F6                          1454  
000017F6                          1455  KBDVAL      DS.B    1                       ; KEY STATE
000017F7                          1456  KBDEDGE     DS.B    1                       ; KEY EDGE
000017F8                          1457  
000017F8                          1458  ; --- TIMED INTERRUPT RELATED VARIABLES ---------------------------------------
000017F8                          1459  
000017F8                          1460  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER
000017F9                          1461  SCRCYCCT    DS.B    1                       ; SCREEN CYCLE COUNTER
000017FA                          1462              DS.W    0
000017FA                          1463  
000017FA                          1464  
000017FA                          1465  
000017FA                          1466  
000017FA                          1467  -------------------- end include --------------------
000017FA                          1468              INCLUDE "LIB/DMMVARS.X68"
000017FA                          1469  ; =============================================================================
000017FA                          1470  ; DYNAMIC MEMORY MANAGEMENT VARIABLES (SYSTEM VARIABLES)
000017FA                          1471  ; =============================================================================
000017FA                          1472  
00001800                          1473              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00001800                          1474  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
00002480                          1475              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
00002480                          1476  -------------------- end include --------------------
00002480                          1477  
00002480                          1478              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AGLADD              10C2
AGLADD:END          10D8
AGLKILL             10AC
AGLPLOT             1100
AGLPLOT:END         1120
AGLPLOT:LOOP        1108
AGLUPD              10DC
AGLUPD:END          10FA
AGLUPD:LOOP         10E4
BACKPLOT            16AC
BIRDFCOL            17EA
BIRDINIT            150C
BIRDPCOL            17E8
BIRDPLOT            157E
BIRDPOSX            A0
BIRDPOSY            17E4
BIRDRAD             F
BIRDUPD             151C
BIRDUPD:COLBOT      1566
BIRDUPD:COLTOP      1572
BIRDUPD:CORDUPD     1546
BIRDUPD:DONE        1578
BIRDUPD:NOCOL       1572
BIRDUPD:NOJUMP      1540
BIRDVELY            17E6
DARKRED             BB
DKYELLOW            BBBB
DMMALLOC            1092
DMMALLOC:END        10AA
DMMBNUM             32
DMMBSIZE            40
DMMDATA             1800
DMMFCOM             106C
DMMFFND             107A
DMMFIRST            1022
DMMFLOOP            1060
DMMFRCOM            1034
DMMFREE             10AC
DMMFRFND            1042
DMMFRLOP            1028
DMMFRSTO            105A
DMMINIT             1000
DMMINIT:LOOP        100E
DMMNEXT             1044
DMMNEXTO            107C
DMMSYSID            0
FLOCOLOR            35DE3B
FLOHEIGH            3C
FLOPLOT             16E8
GAMEINIT            149E
GAMEPLOT            14F2
GAMEUPD             14B2
GOVINIT             1506
GOVPLOT             150A
GOVUPD              1508
HIGHSCO             17EE
HSCOLINE            101E
INSINIT             1498
INSPLOT             149C
INSUPD              149A
ISCINIT             1480
ISCPLOT             1496
ISCUPD              1482
ISCUPD:CONT         1494
JUMPVELY            FFFFFFF6
KBDEDGE             17F7
KBDINIT             13A2
KBDSPACE            20
KBDUPD              13B0
KBDUPDTN            1
KBDVAL              17F6
LGYELLOW            FFFF
LIGHTRED            FF
MASKNWPP            3F
NEWPIPE             14C0
NEWPIPE:GOUPD       14EC
PAUSINIT            1500
PAUSPLOT            1504
PAUSUPD             1502
PIPEAGTP            1
PIPECOLI            15E0
PIPECOLI:COL        162E
PIPECOLI:END        1662
PIPECOLI:NOCOL      164A
PIPECOLI:NOKILL     15F6
PIPEFCOL            20284D
PIPEGAPS            78
PIPEINIT            15C0
PIPEPCOL            151A30
PIPEPLOT            1668
PIPEUPD             15D8
PIPEVELX            FFFFFFFB
PIPEWIDT            32
SCOFCOL             35DE3B
SCOINC              172C
SCOINIT             171E
SCOLINE             101D
SCOPLOT             174A
SCOPLOT:HISCOTXT    17A4
SCOPLOT:SCOTXT      179C
SCORE               17EC
SCRCYCCT            17F9
SCRFPS              3C
SCRHEIGH            1E0
SCRINIT             1336
SCRINTCT            17F8
SCRINTN             1
SCRPLOT             137A
SCRTIM              1394
SCRUPDTN            0
SCRWIDTH            280
SKYCOLOR            FFBF80
SKYPLOT             16B6
SNDDIE              0
SNDINIT             12CA
SNDINIT:DONE        12E8
SNDINIT:LOOP        12D6
SNDINIT:SNDDIE      12EE
SNDINIT:SNDJUMP     12FA
SNDINIT:SNDLIST     1314
SNDINIT:SNDSCO      1307
SNDJUMP             1
SNDPLAY             1324
SNDPLTN             2
SNDSCO              2
STACUR              17F0
STAEMPTY            147E
STAGAME             2
STAGOVER            4
STAINIT             13D8
STAINSTR            1
STAINTRO            0
STANEXT             17F2
STANONE             FFFFFFFF
STAPAUSE            3
STAPLOT             144E
STAPLOT:PLTTBL      146A
START               17B0
START:LOOP          17C0
START:WINT          17C6
STAUPD              13E8
STAUPD:DOUPD        140E
STAUPD:INITBL       1426
STAUPD:UPDTBL       143A
SYSINIT             128C
UTLCHRWD            8
UTLINIT             1126
UTLPRINT            113C
UTLPRINT:ENDLOOP    114E
UTLPRINT:LOOP       1144
UTLRAND             116E
UTLRAND:RANDVEC     118C
UTLRNDIX            17F4
